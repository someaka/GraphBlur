import{c,g as m}from"./apiConfig-BkCDF--i.js";const g=document.getElementById("formLogin"),s=document.getElementById("submitButton"),d=document.getElementById("inputUsername"),l=document.getElementById("inputPassword"),n=document.getElementById("loginStatusMessage"),f=m();function o(t){n.textContent=t,n.classList.add("error"),n.style.display="block"}function p(){s.disabled=!1,s.textContent="Submit"}async function y(t){var i,r;t.preventDefault();const a=d.value.trim(),u=l.value.trim();if(!a){o("Please enter a username.");return}s.disabled=!0,s.textContent="Loading...";try{const e=await axios.post(`${f}/login`,{username:a,password:u},{withCredentials:!0});c.log("Login response:",e.data),e.data.authenticated?(e.data.sessionCookie&&localStorage.setItem("sessionid",e.data.sessionCookie),window.location.href="/feeds.html"):o(e.data.error||"Login failed. Please try again.")}catch(e){o(((r=(i=e.response)==null?void 0:i.data)==null?void 0:r.error)||"An error occurred. Please try again.")}finally{p()}}g.addEventListener("submit",y);[d,l].forEach(t=>{t.addEventListener("focus",()=>{n.style.display="none"})});
