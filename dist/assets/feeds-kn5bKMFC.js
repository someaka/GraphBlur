import{f as ge,g as Ro,a as De}from"./apiConfig-BkCDF--i.js";function Th(r){return r.replace(/<\/?[^>]+(>|$)/g,"").replace(/&nbsp;/g," ").trim()}let Ae={};function Nh(r){const t=r.feedId;Ae[t]||(Ae[t]=[]),Ae[t].findIndex(n=>n.id===r.id)===-1&&Ae[t].push({id:r.id,title:r.title,content:r.content,feedColor:r.feedColor})}function Fo(r,t){return function(){return r.apply(t,arguments)}}const{toString:Lh}=Object.prototype,{getPrototypeOf:Gn}=Object,Ar=(r=>t=>{const e=Lh.call(t);return r[e]||(r[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),He=r=>(r=r.toLowerCase(),t=>Ar(t)===r),Sr=r=>t=>typeof t===r,{isArray:Dt}=Array,Vt=Sr("undefined");function Rh(r){return r!==null&&!Vt(r)&&r.constructor!==null&&!Vt(r.constructor)&&ke(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const Do=He("ArrayBuffer");function Fh(r){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(r):t=r&&r.buffer&&Do(r.buffer),t}const Dh=Sr("string"),ke=Sr("function"),ko=Sr("number"),Cr=r=>r!==null&&typeof r=="object",kh=r=>r===!0||r===!1,gr=r=>{if(Ar(r)!=="object")return!1;const t=Gn(r);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},Oh=He("Date"),$h=He("File"),Ph=He("Blob"),Gh=He("FileList"),Mh=r=>Cr(r)&&ke(r.pipe),Ih=r=>{let t;return r&&(typeof FormData=="function"&&r instanceof FormData||ke(r.append)&&((t=Ar(r))==="formdata"||t==="object"&&ke(r.toString)&&r.toString()==="[object FormData]"))},Uh=He("URLSearchParams"),zh=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Yt(r,t,{allOwnKeys:e=!1}={}){if(r===null||typeof r>"u")return;let n,i;if(typeof r!="object"&&(r=[r]),Dt(r))for(n=0,i=r.length;n<i;n++)t.call(null,r[n],n,r);else{const a=e?Object.getOwnPropertyNames(r):Object.keys(r),o=a.length;let u;for(n=0;n<o;n++)u=a[n],t.call(null,r[u],u,r)}}function Oo(r,t){t=t.toLowerCase();const e=Object.keys(r);let n=e.length,i;for(;n-- >0;)if(i=e[n],t===i.toLowerCase())return i;return null}const $o=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Po=r=>!Vt(r)&&r!==$o;function Dn(){const{caseless:r}=Po(this)&&this||{},t={},e=(n,i)=>{const a=r&&Oo(t,i)||i;gr(t[a])&&gr(n)?t[a]=Dn(t[a],n):gr(n)?t[a]=Dn({},n):Dt(n)?t[a]=n.slice():t[a]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&Yt(arguments[n],e);return t}const Bh=(r,t,e,{allOwnKeys:n}={})=>(Yt(t,(i,a)=>{e&&ke(i)?r[a]=Fo(i,e):r[a]=i},{allOwnKeys:n}),r),jh=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),Hh=(r,t,e,n)=>{r.prototype=Object.create(t.prototype,n),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:t.prototype}),e&&Object.assign(r.prototype,e)},Wh=(r,t,e,n)=>{let i,a,o;const u={};if(t=t||{},r==null)return t;do{for(i=Object.getOwnPropertyNames(r),a=i.length;a-- >0;)o=i[a],(!n||n(o,r,t))&&!u[o]&&(t[o]=r[o],u[o]=!0);r=e!==!1&&Gn(r)}while(r&&(!e||e(r,t))&&r!==Object.prototype);return t},qh=(r,t,e)=>{r=String(r),(e===void 0||e>r.length)&&(e=r.length),e-=t.length;const n=r.indexOf(t,e);return n!==-1&&n===e},Vh=r=>{if(!r)return null;if(Dt(r))return r;let t=r.length;if(!ko(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=r[t];return e},Yh=(r=>t=>r&&t instanceof r)(typeof Uint8Array<"u"&&Gn(Uint8Array)),Kh=(r,t)=>{const n=(r&&r[Symbol.iterator]).call(r);let i;for(;(i=n.next())&&!i.done;){const a=i.value;t.call(r,a[0],a[1])}},Xh=(r,t)=>{let e;const n=[];for(;(e=r.exec(t))!==null;)n.push(e);return n},Jh=He("HTMLFormElement"),Zh=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,n,i){return n.toUpperCase()+i}),Ua=(({hasOwnProperty:r})=>(t,e)=>r.call(t,e))(Object.prototype),Qh=He("RegExp"),Go=(r,t)=>{const e=Object.getOwnPropertyDescriptors(r),n={};Yt(e,(i,a)=>{let o;(o=t(i,a,r))!==!1&&(n[a]=o||i)}),Object.defineProperties(r,n)},ef=r=>{Go(r,(t,e)=>{if(ke(r)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const n=r[e];if(ke(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},tf=(r,t)=>{const e={},n=i=>{i.forEach(a=>{e[a]=!0})};return Dt(r)?n(r):n(String(r).split(t)),e},rf=()=>{},nf=(r,t)=>(r=+r,Number.isFinite(r)?r:t),yn="abcdefghijklmnopqrstuvwxyz",za="0123456789",Mo={DIGIT:za,ALPHA:yn,ALPHA_DIGIT:yn+yn.toUpperCase()+za},af=(r=16,t=Mo.ALPHA_DIGIT)=>{let e="";const{length:n}=t;for(;r--;)e+=t[Math.random()*n|0];return e};function of(r){return!!(r&&ke(r.append)&&r[Symbol.toStringTag]==="FormData"&&r[Symbol.iterator])}const sf=r=>{const t=new Array(10),e=(n,i)=>{if(Cr(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[i]=n;const a=Dt(n)?[]:{};return Yt(n,(o,u)=>{const h=e(o,i+1);!Vt(h)&&(a[u]=h)}),t[i]=void 0,a}}return n};return e(r,0)},uf=He("AsyncFunction"),cf=r=>r&&(Cr(r)||ke(r))&&ke(r.then)&&ke(r.catch),C={isArray:Dt,isArrayBuffer:Do,isBuffer:Rh,isFormData:Ih,isArrayBufferView:Fh,isString:Dh,isNumber:ko,isBoolean:kh,isObject:Cr,isPlainObject:gr,isUndefined:Vt,isDate:Oh,isFile:$h,isBlob:Ph,isRegExp:Qh,isFunction:ke,isStream:Mh,isURLSearchParams:Uh,isTypedArray:Yh,isFileList:Gh,forEach:Yt,merge:Dn,extend:Bh,trim:zh,stripBOM:jh,inherits:Hh,toFlatObject:Wh,kindOf:Ar,kindOfTest:He,endsWith:qh,toArray:Vh,forEachEntry:Kh,matchAll:Xh,isHTMLForm:Jh,hasOwnProperty:Ua,hasOwnProp:Ua,reduceDescriptors:Go,freezeMethods:ef,toObjectSet:tf,toCamelCase:Zh,noop:rf,toFiniteNumber:nf,findKey:Oo,global:$o,isContextDefined:Po,ALPHABET:Mo,generateString:af,isSpecCompliantForm:of,toJSONObject:sf,isAsyncFn:uf,isThenable:cf};function Q(r,t,e,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),n&&(this.request=n),i&&(this.response=i)}C.inherits(Q,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:C.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Io=Q.prototype,Uo={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{Uo[r]={value:r}});Object.defineProperties(Q,Uo);Object.defineProperty(Io,"isAxiosError",{value:!0});Q.from=(r,t,e,n,i,a)=>{const o=Object.create(Io);return C.toFlatObject(r,o,function(h){return h!==Error.prototype},u=>u!=="isAxiosError"),Q.call(o,r.message,t,e,n,i),o.cause=r,o.name=r.name,a&&Object.assign(o,a),o};const lf=null;function kn(r){return C.isPlainObject(r)||C.isArray(r)}function zo(r){return C.endsWith(r,"[]")?r.slice(0,-2):r}function Ba(r,t,e){return r?r.concat(t).map(function(i,a){return i=zo(i),!e&&a?"["+i+"]":i}).join(e?".":""):t}function df(r){return C.isArray(r)&&!r.some(kn)}const hf=C.toFlatObject(C,{},null,function(t){return/^is[A-Z]/.test(t)});function Tr(r,t,e){if(!C.isObject(r))throw new TypeError("target must be an object");t=t||new FormData,e=C.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,T){return!C.isUndefined(T[y])});const n=e.metaTokens,i=e.visitor||p,a=e.dots,o=e.indexes,h=(e.Blob||typeof Blob<"u"&&Blob)&&C.isSpecCompliantForm(t);if(!C.isFunction(i))throw new TypeError("visitor must be a function");function d(E){if(E===null)return"";if(C.isDate(E))return E.toISOString();if(!h&&C.isBlob(E))throw new Q("Blob is not supported. Use a Buffer instead.");return C.isArrayBuffer(E)||C.isTypedArray(E)?h&&typeof Blob=="function"?new Blob([E]):Buffer.from(E):E}function p(E,y,T){let L=E;if(E&&!T&&typeof E=="object"){if(C.endsWith(y,"{}"))y=n?y:y.slice(0,-2),E=JSON.stringify(E);else if(C.isArray(E)&&df(E)||(C.isFileList(E)||C.endsWith(y,"[]"))&&(L=C.toArray(E)))return y=zo(y),L.forEach(function(N,z){!(C.isUndefined(N)||N===null)&&t.append(o===!0?Ba([y],z,a):o===null?y:y+"[]",d(N))}),!1}return kn(E)?!0:(t.append(Ba(T,y,a),d(E)),!1)}const f=[],w=Object.assign(hf,{defaultVisitor:p,convertValue:d,isVisitable:kn});function A(E,y){if(!C.isUndefined(E)){if(f.indexOf(E)!==-1)throw Error("Circular reference detected in "+y.join("."));f.push(E),C.forEach(E,function(L,k){(!(C.isUndefined(L)||L===null)&&i.call(t,L,C.isString(k)?k.trim():k,y,w))===!0&&A(L,y?y.concat(k):[k])}),f.pop()}}if(!C.isObject(r))throw new TypeError("data must be an object");return A(r),t}function ja(r){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function Mn(r,t){this._pairs=[],r&&Tr(r,this,t)}const Bo=Mn.prototype;Bo.append=function(t,e){this._pairs.push([t,e])};Bo.toString=function(t){const e=t?function(n){return t.call(this,n,ja)}:ja;return this._pairs.map(function(i){return e(i[0])+"="+e(i[1])},"").join("&")};function ff(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function jo(r,t,e){if(!t)return r;const n=e&&e.encode||ff,i=e&&e.serialize;let a;if(i?a=i(t,e):a=C.isURLSearchParams(t)?t.toString():new Mn(t,e).toString(n),a){const o=r.indexOf("#");o!==-1&&(r=r.slice(0,o)),r+=(r.indexOf("?")===-1?"?":"&")+a}return r}class Ha{constructor(){this.handlers=[]}use(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){C.forEach(this.handlers,function(n){n!==null&&t(n)})}}const Ho={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},pf=typeof URLSearchParams<"u"?URLSearchParams:Mn,gf=typeof FormData<"u"?FormData:null,vf=typeof Blob<"u"?Blob:null,mf={isBrowser:!0,classes:{URLSearchParams:pf,FormData:gf,Blob:vf},protocols:["http","https","file","blob","url","data"]},Wo=typeof window<"u"&&typeof document<"u",yf=(r=>Wo&&["ReactNative","NativeScript","NS"].indexOf(r)<0)(typeof navigator<"u"&&navigator.product),bf=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",wf=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Wo,hasStandardBrowserEnv:yf,hasStandardBrowserWebWorkerEnv:bf},Symbol.toStringTag,{value:"Module"})),ze={...wf,...mf};function _f(r,t){return Tr(r,new ze.classes.URLSearchParams,Object.assign({visitor:function(e,n,i,a){return ze.isNode&&C.isBuffer(e)?(this.append(n,e.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},t))}function Ef(r){return C.matchAll(/\w+|\[(\w*)]/g,r).map(t=>t[0]==="[]"?"":t[1]||t[0])}function xf(r){const t={},e=Object.keys(r);let n;const i=e.length;let a;for(n=0;n<i;n++)a=e[n],t[a]=r[a];return t}function qo(r){function t(e,n,i,a){let o=e[a++];if(o==="__proto__")return!0;const u=Number.isFinite(+o),h=a>=e.length;return o=!o&&C.isArray(i)?i.length:o,h?(C.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!u):((!i[o]||!C.isObject(i[o]))&&(i[o]=[]),t(e,n,i[o],a)&&C.isArray(i[o])&&(i[o]=xf(i[o])),!u)}if(C.isFormData(r)&&C.isFunction(r.entries)){const e={};return C.forEachEntry(r,(n,i)=>{t(Ef(n),i,e,0)}),e}return null}function Af(r,t,e){if(C.isString(r))try{return(t||JSON.parse)(r),C.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(e||JSON.stringify)(r)}const In={transitional:Ho,adapter:["xhr","http"],transformRequest:[function(t,e){const n=e.getContentType()||"",i=n.indexOf("application/json")>-1,a=C.isObject(t);if(a&&C.isHTMLForm(t)&&(t=new FormData(t)),C.isFormData(t))return i&&i?JSON.stringify(qo(t)):t;if(C.isArrayBuffer(t)||C.isBuffer(t)||C.isStream(t)||C.isFile(t)||C.isBlob(t))return t;if(C.isArrayBufferView(t))return t.buffer;if(C.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let u;if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return _f(t,this.formSerializer).toString();if((u=C.isFileList(t))||n.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return Tr(u?{"files[]":t}:t,h&&new h,this.formSerializer)}}return a||i?(e.setContentType("application/json",!1),Af(t)):t}],transformResponse:[function(t){const e=this.transitional||In.transitional,n=e&&e.forcedJSONParsing,i=this.responseType==="json";if(t&&C.isString(t)&&(n&&!this.responseType||i)){const o=!(e&&e.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(u){if(o)throw u.name==="SyntaxError"?Q.from(u,Q.ERR_BAD_RESPONSE,this,null,this.response):u}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ze.classes.FormData,Blob:ze.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};C.forEach(["delete","get","head","post","put","patch"],r=>{In.headers[r]={}});const Un=In,Sf=C.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Cf=r=>{const t={};let e,n,i;return r&&r.split(`
`).forEach(function(o){i=o.indexOf(":"),e=o.substring(0,i).trim().toLowerCase(),n=o.substring(i+1).trim(),!(!e||t[e]&&Sf[e])&&(e==="set-cookie"?t[e]?t[e].push(n):t[e]=[n]:t[e]=t[e]?t[e]+", "+n:n)}),t},Wa=Symbol("internals");function Bt(r){return r&&String(r).trim().toLowerCase()}function vr(r){return r===!1||r==null?r:C.isArray(r)?r.map(vr):String(r)}function Tf(r){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=e.exec(r);)t[n[1]]=n[2];return t}const Nf=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function bn(r,t,e,n,i){if(C.isFunction(n))return n.call(this,t,e);if(i&&(t=e),!!C.isString(t)){if(C.isString(n))return t.indexOf(n)!==-1;if(C.isRegExp(n))return n.test(t)}}function Lf(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,n)=>e.toUpperCase()+n)}function Rf(r,t){const e=C.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(r,n+e,{value:function(i,a,o){return this[n].call(this,t,i,a,o)},configurable:!0})})}class Nr{constructor(t){t&&this.set(t)}set(t,e,n){const i=this;function a(u,h,d){const p=Bt(h);if(!p)throw new Error("header name must be a non-empty string");const f=C.findKey(i,p);(!f||i[f]===void 0||d===!0||d===void 0&&i[f]!==!1)&&(i[f||h]=vr(u))}const o=(u,h)=>C.forEach(u,(d,p)=>a(d,p,h));return C.isPlainObject(t)||t instanceof this.constructor?o(t,e):C.isString(t)&&(t=t.trim())&&!Nf(t)?o(Cf(t),e):t!=null&&a(e,t,n),this}get(t,e){if(t=Bt(t),t){const n=C.findKey(this,t);if(n){const i=this[n];if(!e)return i;if(e===!0)return Tf(i);if(C.isFunction(e))return e.call(this,i,n);if(C.isRegExp(e))return e.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=Bt(t),t){const n=C.findKey(this,t);return!!(n&&this[n]!==void 0&&(!e||bn(this,this[n],n,e)))}return!1}delete(t,e){const n=this;let i=!1;function a(o){if(o=Bt(o),o){const u=C.findKey(n,o);u&&(!e||bn(n,n[u],u,e))&&(delete n[u],i=!0)}}return C.isArray(t)?t.forEach(a):a(t),i}clear(t){const e=Object.keys(this);let n=e.length,i=!1;for(;n--;){const a=e[n];(!t||bn(this,this[a],a,t,!0))&&(delete this[a],i=!0)}return i}normalize(t){const e=this,n={};return C.forEach(this,(i,a)=>{const o=C.findKey(n,a);if(o){e[o]=vr(i),delete e[a];return}const u=t?Lf(a):String(a).trim();u!==a&&delete e[a],e[u]=vr(i),n[u]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return C.forEach(this,(n,i)=>{n!=null&&n!==!1&&(e[i]=t&&C.isArray(n)?n.join(", "):n)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const n=new this(t);return e.forEach(i=>n.set(i)),n}static accessor(t){const n=(this[Wa]=this[Wa]={accessors:{}}).accessors,i=this.prototype;function a(o){const u=Bt(o);n[u]||(Rf(i,o),n[u]=!0)}return C.isArray(t)?t.forEach(a):a(t),this}}Nr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);C.reduceDescriptors(Nr.prototype,({value:r},t)=>{let e=t[0].toUpperCase()+t.slice(1);return{get:()=>r,set(n){this[e]=n}}});C.freezeMethods(Nr);const Ve=Nr;function wn(r,t){const e=this||Un,n=t||e,i=Ve.from(n.headers);let a=n.data;return C.forEach(r,function(u){a=u.call(e,a,i.normalize(),t?t.status:void 0)}),i.normalize(),a}function Vo(r){return!!(r&&r.__CANCEL__)}function Kt(r,t,e){Q.call(this,r??"canceled",Q.ERR_CANCELED,t,e),this.name="CanceledError"}C.inherits(Kt,Q,{__CANCEL__:!0});function Ff(r,t,e){const n=e.config.validateStatus;!e.status||!n||n(e.status)?r(e):t(new Q("Request failed with status code "+e.status,[Q.ERR_BAD_REQUEST,Q.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}const Df=ze.hasStandardBrowserEnv?{write(r,t,e,n,i,a){const o=[r+"="+encodeURIComponent(t)];C.isNumber(e)&&o.push("expires="+new Date(e).toGMTString()),C.isString(n)&&o.push("path="+n),C.isString(i)&&o.push("domain="+i),a===!0&&o.push("secure"),document.cookie=o.join("; ")},read(r){const t=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(r){this.write(r,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function kf(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function Of(r,t){return t?r.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):r}function Yo(r,t){return r&&!kf(t)?Of(r,t):t}const $f=ze.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let n;function i(a){let o=a;return t&&(e.setAttribute("href",o),o=e.href),e.setAttribute("href",o),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:e.pathname.charAt(0)==="/"?e.pathname:"/"+e.pathname}}return n=i(window.location.href),function(o){const u=C.isString(o)?i(o):o;return u.protocol===n.protocol&&u.host===n.host}}():function(){return function(){return!0}}();function Pf(r){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return t&&t[1]||""}function Gf(r,t){r=r||10;const e=new Array(r),n=new Array(r);let i=0,a=0,o;return t=t!==void 0?t:1e3,function(h){const d=Date.now(),p=n[a];o||(o=d),e[i]=h,n[i]=d;let f=a,w=0;for(;f!==i;)w+=e[f++],f=f%r;if(i=(i+1)%r,i===a&&(a=(a+1)%r),d-o<t)return;const A=p&&d-p;return A?Math.round(w*1e3/A):void 0}}function qa(r,t){let e=0;const n=Gf(50,250);return i=>{const a=i.loaded,o=i.lengthComputable?i.total:void 0,u=a-e,h=n(u),d=a<=o;e=a;const p={loaded:a,total:o,progress:o?a/o:void 0,bytes:u,rate:h||void 0,estimated:h&&o&&d?(o-a)/h:void 0,event:i};p[t?"download":"upload"]=!0,r(p)}}const Mf=typeof XMLHttpRequest<"u",If=Mf&&function(r){return new Promise(function(e,n){let i=r.data;const a=Ve.from(r.headers).normalize();let{responseType:o,withXSRFToken:u}=r,h;function d(){r.cancelToken&&r.cancelToken.unsubscribe(h),r.signal&&r.signal.removeEventListener("abort",h)}let p;if(C.isFormData(i)){if(ze.hasStandardBrowserEnv||ze.hasStandardBrowserWebWorkerEnv)a.setContentType(!1);else if((p=a.getContentType())!==!1){const[y,...T]=p?p.split(";").map(L=>L.trim()).filter(Boolean):[];a.setContentType([y||"multipart/form-data",...T].join("; "))}}let f=new XMLHttpRequest;if(r.auth){const y=r.auth.username||"",T=r.auth.password?unescape(encodeURIComponent(r.auth.password)):"";a.set("Authorization","Basic "+btoa(y+":"+T))}const w=Yo(r.baseURL,r.url);f.open(r.method.toUpperCase(),jo(w,r.params,r.paramsSerializer),!0),f.timeout=r.timeout;function A(){if(!f)return;const y=Ve.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders()),L={data:!o||o==="text"||o==="json"?f.responseText:f.response,status:f.status,statusText:f.statusText,headers:y,config:r,request:f};Ff(function(N){e(N),d()},function(N){n(N),d()},L),f=null}if("onloadend"in f?f.onloadend=A:f.onreadystatechange=function(){!f||f.readyState!==4||f.status===0&&!(f.responseURL&&f.responseURL.indexOf("file:")===0)||setTimeout(A)},f.onabort=function(){f&&(n(new Q("Request aborted",Q.ECONNABORTED,r,f)),f=null)},f.onerror=function(){n(new Q("Network Error",Q.ERR_NETWORK,r,f)),f=null},f.ontimeout=function(){let T=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const L=r.transitional||Ho;r.timeoutErrorMessage&&(T=r.timeoutErrorMessage),n(new Q(T,L.clarifyTimeoutError?Q.ETIMEDOUT:Q.ECONNABORTED,r,f)),f=null},ze.hasStandardBrowserEnv&&(u&&C.isFunction(u)&&(u=u(r)),u||u!==!1&&$f(w))){const y=r.xsrfHeaderName&&r.xsrfCookieName&&Df.read(r.xsrfCookieName);y&&a.set(r.xsrfHeaderName,y)}i===void 0&&a.setContentType(null),"setRequestHeader"in f&&C.forEach(a.toJSON(),function(T,L){f.setRequestHeader(L,T)}),C.isUndefined(r.withCredentials)||(f.withCredentials=!!r.withCredentials),o&&o!=="json"&&(f.responseType=r.responseType),typeof r.onDownloadProgress=="function"&&f.addEventListener("progress",qa(r.onDownloadProgress,!0)),typeof r.onUploadProgress=="function"&&f.upload&&f.upload.addEventListener("progress",qa(r.onUploadProgress)),(r.cancelToken||r.signal)&&(h=y=>{f&&(n(!y||y.type?new Kt(null,r,f):y),f.abort(),f=null)},r.cancelToken&&r.cancelToken.subscribe(h),r.signal&&(r.signal.aborted?h():r.signal.addEventListener("abort",h)));const E=Pf(w);if(E&&ze.protocols.indexOf(E)===-1){n(new Q("Unsupported protocol "+E+":",Q.ERR_BAD_REQUEST,r));return}f.send(i||null)})},On={http:lf,xhr:If};C.forEach(On,(r,t)=>{if(r){try{Object.defineProperty(r,"name",{value:t})}catch{}Object.defineProperty(r,"adapterName",{value:t})}});const Va=r=>`- ${r}`,Uf=r=>C.isFunction(r)||r===null||r===!1,Ko={getAdapter:r=>{r=C.isArray(r)?r:[r];const{length:t}=r;let e,n;const i={};for(let a=0;a<t;a++){e=r[a];let o;if(n=e,!Uf(e)&&(n=On[(o=String(e)).toLowerCase()],n===void 0))throw new Q(`Unknown adapter '${o}'`);if(n)break;i[o||"#"+a]=n}if(!n){const a=Object.entries(i).map(([u,h])=>`adapter ${u} `+(h===!1?"is not supported by the environment":"is not available in the build"));let o=t?a.length>1?`since :
`+a.map(Va).join(`
`):" "+Va(a[0]):"as no adapter specified";throw new Q("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:On};function _n(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new Kt(null,r)}function Ya(r){return _n(r),r.headers=Ve.from(r.headers),r.data=wn.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),Ko.getAdapter(r.adapter||Un.adapter)(r).then(function(n){return _n(r),n.data=wn.call(r,r.transformResponse,n),n.headers=Ve.from(n.headers),n},function(n){return Vo(n)||(_n(r),n&&n.response&&(n.response.data=wn.call(r,r.transformResponse,n.response),n.response.headers=Ve.from(n.response.headers))),Promise.reject(n)})}const Ka=r=>r instanceof Ve?r.toJSON():r;function Nt(r,t){t=t||{};const e={};function n(d,p,f){return C.isPlainObject(d)&&C.isPlainObject(p)?C.merge.call({caseless:f},d,p):C.isPlainObject(p)?C.merge({},p):C.isArray(p)?p.slice():p}function i(d,p,f){if(C.isUndefined(p)){if(!C.isUndefined(d))return n(void 0,d,f)}else return n(d,p,f)}function a(d,p){if(!C.isUndefined(p))return n(void 0,p)}function o(d,p){if(C.isUndefined(p)){if(!C.isUndefined(d))return n(void 0,d)}else return n(void 0,p)}function u(d,p,f){if(f in t)return n(d,p);if(f in r)return n(void 0,d)}const h={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:u,headers:(d,p)=>i(Ka(d),Ka(p),!0)};return C.forEach(Object.keys(Object.assign({},r,t)),function(p){const f=h[p]||i,w=f(r[p],t[p],p);C.isUndefined(w)&&f!==u||(e[p]=w)}),e}const Xo="1.6.5",zn={};["object","boolean","number","function","string","symbol"].forEach((r,t)=>{zn[r]=function(n){return typeof n===r||"a"+(t<1?"n ":" ")+r}});const Xa={};zn.transitional=function(t,e,n){function i(a,o){return"[Axios v"+Xo+"] Transitional option '"+a+"'"+o+(n?". "+n:"")}return(a,o,u)=>{if(t===!1)throw new Q(i(o," has been removed"+(e?" in "+e:"")),Q.ERR_DEPRECATED);return e&&!Xa[o]&&(Xa[o]=!0,console.warn(i(o," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(a,o,u):!0}};function zf(r,t,e){if(typeof r!="object")throw new Q("options must be an object",Q.ERR_BAD_OPTION_VALUE);const n=Object.keys(r);let i=n.length;for(;i-- >0;){const a=n[i],o=t[a];if(o){const u=r[a],h=u===void 0||o(u,a,r);if(h!==!0)throw new Q("option "+a+" must be "+h,Q.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new Q("Unknown option "+a,Q.ERR_BAD_OPTION)}}const $n={assertOptions:zf,validators:zn},et=$n.validators;class br{constructor(t){this.defaults=t,this.interceptors={request:new Ha,response:new Ha}}request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=Nt(this.defaults,e);const{transitional:n,paramsSerializer:i,headers:a}=e;n!==void 0&&$n.assertOptions(n,{silentJSONParsing:et.transitional(et.boolean),forcedJSONParsing:et.transitional(et.boolean),clarifyTimeoutError:et.transitional(et.boolean)},!1),i!=null&&(C.isFunction(i)?e.paramsSerializer={serialize:i}:$n.assertOptions(i,{encode:et.function,serialize:et.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase();let o=a&&C.merge(a.common,a[e.method]);a&&C.forEach(["delete","get","head","post","put","patch","common"],E=>{delete a[E]}),e.headers=Ve.concat(o,a);const u=[];let h=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(e)===!1||(h=h&&y.synchronous,u.unshift(y.fulfilled,y.rejected))});const d=[];this.interceptors.response.forEach(function(y){d.push(y.fulfilled,y.rejected)});let p,f=0,w;if(!h){const E=[Ya.bind(this),void 0];for(E.unshift.apply(E,u),E.push.apply(E,d),w=E.length,p=Promise.resolve(e);f<w;)p=p.then(E[f++],E[f++]);return p}w=u.length;let A=e;for(f=0;f<w;){const E=u[f++],y=u[f++];try{A=E(A)}catch(T){y.call(this,T);break}}try{p=Ya.call(this,A)}catch(E){return Promise.reject(E)}for(f=0,w=d.length;f<w;)p=p.then(d[f++],d[f++]);return p}getUri(t){t=Nt(this.defaults,t);const e=Yo(t.baseURL,t.url);return jo(e,t.params,t.paramsSerializer)}}C.forEach(["delete","get","head","options"],function(t){br.prototype[t]=function(e,n){return this.request(Nt(n||{},{method:t,url:e,data:(n||{}).data}))}});C.forEach(["post","put","patch"],function(t){function e(n){return function(a,o,u){return this.request(Nt(u||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:a,data:o}))}}br.prototype[t]=e(),br.prototype[t+"Form"]=e(!0)});const mr=br;class Bn{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(a){e=a});const n=this;this.promise.then(i=>{if(!n._listeners)return;let a=n._listeners.length;for(;a-- >0;)n._listeners[a](i);n._listeners=null}),this.promise.then=i=>{let a;const o=new Promise(u=>{n.subscribe(u),a=u}).then(i);return o.cancel=function(){n.unsubscribe(a)},o},t(function(a,o,u){n.reason||(n.reason=new Kt(a,o,u),e(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}static source(){let t;return{token:new Bn(function(i){t=i}),cancel:t}}}const Bf=Bn;function jf(r){return function(e){return r.apply(null,e)}}function Hf(r){return C.isObject(r)&&r.isAxiosError===!0}const Pn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Pn).forEach(([r,t])=>{Pn[t]=r});const Wf=Pn;function Jo(r){const t=new mr(r),e=Fo(mr.prototype.request,t);return C.extend(e,mr.prototype,t,{allOwnKeys:!0}),C.extend(e,t,null,{allOwnKeys:!0}),e.create=function(i){return Jo(Nt(r,i))},e}const fe=Jo(Un);fe.Axios=mr;fe.CanceledError=Kt;fe.CancelToken=Bf;fe.isCancel=Vo;fe.VERSION=Xo;fe.toFormData=Tr;fe.AxiosError=Q;fe.Cancel=fe.CanceledError;fe.all=function(t){return Promise.all(t)};fe.spread=jf;fe.isAxiosError=Hf;fe.mergeConfig=Nt;fe.AxiosHeaders=Ve;fe.formToJSON=r=>qo(C.isHTMLForm(r)?new FormData(r):r);fe.getAdapter=Ko.getAdapter;fe.HttpStatusCode=Wf;fe.default=fe;const Zo=Ro();async function qf(){try{const r=localStorage.getItem("sessionid"),t=r?{Cookie:`sessionid=${r}`}:{},e=await fetch(`${Zo}/feeds`,{method:"GET",headers:t,credentials:"include"});if(!e.ok)return ge.error("HTTP error when fetching feeds:",e.status),null;const n=await e.text();try{return JSON.parse(n)}catch(i){return ge.error("Failed to parse JSON:",i),null}}catch(r){return ge.error("Failed to fetch feeds:",r),null}}async function Vf(r){ge.log(`Fetching articles for feedId: ${r}`);const t=document.querySelectorAll("#feedslist div.clicked"),e=Array.from(t).map(n=>n.id);try{const n=await fe.post(`${Zo}/fetch-articles`,{feedId:r,selectedFeedIds:e});return n.data.warning&&ge.warn("Warning from fetch-articles:",n.data.warning),n.data&&Array.isArray(n.data.articles)?n.data.articles:(ge.error("fetchHtmlResults did not return an array:",n.data),[])}catch(n){return ge.error("Failed to fetch articles:",n),[]}}async function Yf(r,t){return r.map(e=>({...e,feedColor:t}))}async function Kf(r){const{id:t,nt:e,unreadStories:n,feedColor:i}=r;if(ge.log(`Loading articles for feed ${t}`),Ae[t])return Ae[t];mainContentSpinner.style.display="block";const a=await Vf(t);if(mainContentSpinner.style.display="none",!Array.isArray(a))return ge.error("No articles fetched for feed:",t),Ae[t]=[];a.length!==e&&ge.warn(`Expected ${e} articles for feed ${t}, but got ${a.length}`);const o=await Yf(a,i);return Ae[t]=o,o}const Xf=document.querySelector("#maincontent"),wr=document.querySelector("#articles");function Qo(r){Xf.style.right=r?"0px":"-40%"}function jn(r,t){r.classList.toggle("clicked"),r.style.backgroundColor=r.classList.contains("clicked")?t+"80":t,r.style.boxShadow=r.classList.contains("clicked")?"inset 0 0 5px rgba(0,0,0,0.3)":""}function Jf(r,t){const e=document.querySelectorAll("#feedslist div.clicked"),i=Array.from(e).find(a=>a.dataset.originalColor===r);if(i){const a={id:i.id};Hn(a).then(()=>{setTimeout(()=>{const o=document.getElementById(`article-${t}`);console.log("articleElement",o),o&&o.scrollIntoView({behavior:"smooth"})},100)})}else console.error("No feed element found for color:",r)}async function Hn(r){wr.innerHTML="",Ae[r.id]||await Kf(r);const t=Ae[r.id];if(!Array.isArray(t)){ge.error("Expected articles to be an array, but got:",t);return}t.forEach(e=>{const n=document.createElement("div");if(n.classList.add("article-container"),e&&e.article){n.id=`article-${e.id}`;const i=document.createElement("h2");i.textContent=e.article.title,n.appendChild(i);const a=document.createElement("p");a.textContent=Th(e.article.text),n.appendChild(a),n.style.backgroundColor=e.feedColor}else{const i=document.createElement("p");i.textContent="Failed to fetch article",i.style.color="red",n.appendChild(i)}wr.appendChild(n)})}const Zf=document.querySelector("#articleTemplate");function Qf(r){const t=wr.querySelector(`.article[data-id="${r.id}"]`);if(console.log("updated article element :",t,"article id:",r.id),t){const e=t.querySelector(".content");e&&(e.innerHTML=r.content)}else{const n=Zf.content.cloneNode(!0).querySelector(".article");n.dataset.id=r.id;const i=n.querySelector(".title"),a=n.querySelector(".text");i.textContent=r.title,a.innerHTML=r.content,wr.appendChild(n)}}var $=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xt(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Wn={exports:{}},St=typeof Reflect=="object"?Reflect:null,Ja=St&&typeof St.apply=="function"?St.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)},yr;St&&typeof St.ownKeys=="function"?yr=St.ownKeys:Object.getOwnPropertySymbols?yr=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:yr=function(t){return Object.getOwnPropertyNames(t)};function ep(r){console&&console.warn&&console.warn(r)}var es=Number.isNaN||function(t){return t!==t};function oe(){oe.init.call(this)}Wn.exports=oe;Wn.exports.once=ip;oe.EventEmitter=oe;oe.prototype._events=void 0;oe.prototype._eventsCount=0;oe.prototype._maxListeners=void 0;var Za=10;function Lr(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(oe,"defaultMaxListeners",{enumerable:!0,get:function(){return Za},set:function(r){if(typeof r!="number"||r<0||es(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");Za=r}});oe.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};oe.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||es(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function ts(r){return r._maxListeners===void 0?oe.defaultMaxListeners:r._maxListeners}oe.prototype.getMaxListeners=function(){return ts(this)};oe.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i=t==="error",a=this._events;if(a!==void 0)i=i&&a.error===void 0;else if(!i)return!1;if(i){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var u=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw u.context=o,u}var h=a[t];if(h===void 0)return!1;if(typeof h=="function")Ja(h,this,e);else for(var d=h.length,p=os(h,d),n=0;n<d;++n)Ja(p[n],this,e);return!0};function rs(r,t,e,n){var i,a,o;if(Lr(e),a=r._events,a===void 0?(a=r._events=Object.create(null),r._eventsCount=0):(a.newListener!==void 0&&(r.emit("newListener",t,e.listener?e.listener:e),a=r._events),o=a[t]),o===void 0)o=a[t]=e,++r._eventsCount;else if(typeof o=="function"?o=a[t]=n?[e,o]:[o,e]:n?o.unshift(e):o.push(e),i=ts(r),i>0&&o.length>i&&!o.warned){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=r,u.type=t,u.count=o.length,ep(u)}return r}oe.prototype.addListener=function(t,e){return rs(this,t,e,!1)};oe.prototype.on=oe.prototype.addListener;oe.prototype.prependListener=function(t,e){return rs(this,t,e,!0)};function tp(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function ns(r,t,e){var n={fired:!1,wrapFn:void 0,target:r,type:t,listener:e},i=tp.bind(n);return i.listener=e,n.wrapFn=i,i}oe.prototype.once=function(t,e){return Lr(e),this.on(t,ns(this,t,e)),this};oe.prototype.prependOnceListener=function(t,e){return Lr(e),this.prependListener(t,ns(this,t,e)),this};oe.prototype.removeListener=function(t,e){var n,i,a,o,u;if(Lr(e),i=this._events,i===void 0)return this;if(n=i[t],n===void 0)return this;if(n===e||n.listener===e)--this._eventsCount===0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if(typeof n!="function"){for(a=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){u=n[o].listener,a=o;break}if(a<0)return this;a===0?n.shift():rp(n,a),n.length===1&&(i[t]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",t,u||e)}return this};oe.prototype.off=oe.prototype.removeListener;oe.prototype.removeAllListeners=function(t){var e,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var a=Object.keys(n),o;for(i=0;i<a.length;++i)o=a[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=n[t],typeof e=="function")this.removeListener(t,e);else if(e!==void 0)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this};function is(r,t,e){var n=r._events;if(n===void 0)return[];var i=n[t];return i===void 0?[]:typeof i=="function"?e?[i.listener||i]:[i]:e?np(i):os(i,i.length)}oe.prototype.listeners=function(t){return is(this,t,!0)};oe.prototype.rawListeners=function(t){return is(this,t,!1)};oe.listenerCount=function(r,t){return typeof r.listenerCount=="function"?r.listenerCount(t):as.call(r,t)};oe.prototype.listenerCount=as;function as(r){var t=this._events;if(t!==void 0){var e=t[r];if(typeof e=="function")return 1;if(e!==void 0)return e.length}return 0}oe.prototype.eventNames=function(){return this._eventsCount>0?yr(this._events):[]};function os(r,t){for(var e=new Array(t),n=0;n<t;++n)e[n]=r[n];return e}function rp(r,t){for(;t+1<r.length;t++)r[t]=r[t+1];r.pop()}function np(r){for(var t=new Array(r.length),e=0;e<t.length;++e)t[e]=r[e].listener||r[e];return t}function ip(r,t){return new Promise(function(e,n){function i(o){r.removeListener(t,a),n(o)}function a(){typeof r.removeListener=="function"&&r.removeListener("error",i),e([].slice.call(arguments))}ss(r,t,a,{once:!0}),t!=="error"&&ap(r,i,{once:!0})})}function ap(r,t,e){typeof r.on=="function"&&ss(r,"error",t,e)}function ss(r,t,e,n){if(typeof r.on=="function")n.once?r.once(t,e):r.on(t,e);else if(typeof r.addEventListener=="function")r.addEventListener(t,function i(a){n.once&&r.removeEventListener(t,i),e(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}var us=Wn.exports;function je(r){if(typeof r!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=r}typeof Symbol<"u"&&(je.prototype[Symbol.iterator]=function(){return this});je.of=function(){var r=arguments,t=r.length,e=0;return new je(function(){return e>=t?{done:!0}:{done:!1,value:r[e++]}})};je.empty=function(){var r=new je(function(){return{done:!0}});return r};je.fromSequence=function(r){var t=0,e=r.length;return new je(function(){return t>=e?{done:!0}:{done:!1,value:r[t++]}})};je.is=function(r){return r instanceof je?!0:typeof r=="object"&&r!==null&&typeof r.next=="function"};var qn=je;const $e=Xt(qn);var Vn={};Vn.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";Vn.SYMBOL_SUPPORT=typeof Symbol<"u";var op=qn,cs=Vn,sp=cs.ARRAY_BUFFER_SUPPORT,up=cs.SYMBOL_SUPPORT;function cp(r){return typeof r=="string"||Array.isArray(r)||sp&&ArrayBuffer.isView(r)?op.fromSequence(r):typeof r!="object"||r===null?null:up&&typeof r[Symbol.iterator]=="function"?r[Symbol.iterator]():typeof r.next=="function"?r:null}var ls=function(t){var e=cp(t);if(!e)throw new Error("obliterator: target is not iterable nor a valid iterator.");return e},lp=ls,dp=function(t,e){for(var n=arguments.length>1?e:1/0,i=n!==1/0?new Array(n):[],a,o=0,u=lp(t);;){if(o===n)return i;if(a=u.next(),a.done)return o!==e&&(i.length=o),i;i[o++]=a.value}};const ds=Xt(dp);var hp=qn,fp=ls,pp=function(){var t=arguments,e=null,n=-1;return new hp(function(){var a=null;do{if(e===null){if(n++,n>=t.length)return{done:!0};e=fp(t[n])}if(a=e.next(),a.done===!0){e=null;continue}break}while(!0);return a})};const Ye=Xt(pp);function gp(){const r=arguments[0];for(let t=1,e=arguments.length;t<e;t++)if(arguments[t])for(const n in arguments[t])r[n]=arguments[t][n];return r}let pe=gp;typeof Object.assign=="function"&&(pe=Object.assign);function Oe(r,t,e,n){const i=r._nodes.get(t);let a=null;return i&&(n==="mixed"?a=i.out&&i.out[e]||i.undirected&&i.undirected[e]:n==="directed"?a=i.out&&i.out[e]:a=i.undirected&&i.undirected[e]),a}function _e(r){return typeof r=="object"&&r!==null}function hs(r){let t;for(t in r)return!1;return!0}function Fe(r,t,e){Object.defineProperty(r,t,{enumerable:!1,configurable:!1,writable:!0,value:e})}function Ie(r,t,e){const n={enumerable:!0,configurable:!0};typeof e=="function"?n.get=e:(n.value=e,n.writable=!1),Object.defineProperty(r,t,n)}function Qa(r){return!(!_e(r)||r.attributes&&!Array.isArray(r.attributes))}function vp(){let r=Math.floor(Math.random()*256)&255;return()=>r++}class Yn extends Error{constructor(t){super(),this.name="GraphError",this.message=t}}class G extends Yn{constructor(t){super(t),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,G.prototype.constructor)}}class O extends Yn{constructor(t){super(t),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,O.prototype.constructor)}}class H extends Yn{constructor(t){super(t),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,H.prototype.constructor)}}function fs(r,t){this.key=r,this.attributes=t,this.clear()}fs.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function ps(r,t){this.key=r,this.attributes=t,this.clear()}ps.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function gs(r,t){this.key=r,this.attributes=t,this.clear()}gs.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function kt(r,t,e,n,i){this.key=t,this.attributes=i,this.undirected=r,this.source=e,this.target=n}kt.prototype.attach=function(){let r="out",t="in";this.undirected&&(r=t="undirected");const e=this.source.key,n=this.target.key;this.source[r][n]=this,!(this.undirected&&e===n)&&(this.target[t][e]=this)};kt.prototype.attachMulti=function(){let r="out",t="in";const e=this.source.key,n=this.target.key;this.undirected&&(r=t="undirected");const i=this.source[r],a=i[n];if(typeof a>"u"){i[n]=this,this.undirected&&e===n||(this.target[t][e]=this);return}a.previous=this,this.next=a,i[n]=this,this.target[t][e]=this};kt.prototype.detach=function(){const r=this.source.key,t=this.target.key;let e="out",n="in";this.undirected&&(e=n="undirected"),delete this.source[e][t],delete this.target[n][r]};kt.prototype.detachMulti=function(){const r=this.source.key,t=this.target.key;let e="out",n="in";this.undirected&&(e=n="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[e][t],delete this.target[n][r]):(this.next.previous=void 0,this.source[e][t]=this.next,this.target[n][r]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const vs=0,ms=1,mp=2,ys=3;function Ke(r,t,e,n,i,a,o){let u,h,d,p;if(n=""+n,e===vs){if(u=r._nodes.get(n),!u)throw new O(`Graph.${t}: could not find the "${n}" node in the graph.`);d=i,p=a}else if(e===ys){if(i=""+i,h=r._edges.get(i),!h)throw new O(`Graph.${t}: could not find the "${i}" edge in the graph.`);const f=h.source.key,w=h.target.key;if(n===f)u=h.target;else if(n===w)u=h.source;else throw new O(`Graph.${t}: the "${n}" node is not attached to the "${i}" edge (${f}, ${w}).`);d=a,p=o}else{if(h=r._edges.get(n),!h)throw new O(`Graph.${t}: could not find the "${n}" edge in the graph.`);e===ms?u=h.source:u=h.target,d=i,p=a}return[u,d,p]}function yp(r,t,e){r.prototype[t]=function(n,i,a){const[o,u]=Ke(this,t,e,n,i,a);return o.attributes[u]}}function bp(r,t,e){r.prototype[t]=function(n,i){const[a]=Ke(this,t,e,n,i);return a.attributes}}function wp(r,t,e){r.prototype[t]=function(n,i,a){const[o,u]=Ke(this,t,e,n,i,a);return o.attributes.hasOwnProperty(u)}}function _p(r,t,e){r.prototype[t]=function(n,i,a,o){const[u,h,d]=Ke(this,t,e,n,i,a,o);return u.attributes[h]=d,this.emit("nodeAttributesUpdated",{key:u.key,type:"set",attributes:u.attributes,name:h}),this}}function Ep(r,t,e){r.prototype[t]=function(n,i,a,o){const[u,h,d]=Ke(this,t,e,n,i,a,o);if(typeof d!="function")throw new G(`Graph.${t}: updater should be a function.`);const p=u.attributes,f=d(p[h]);return p[h]=f,this.emit("nodeAttributesUpdated",{key:u.key,type:"set",attributes:u.attributes,name:h}),this}}function xp(r,t,e){r.prototype[t]=function(n,i,a){const[o,u]=Ke(this,t,e,n,i,a);return delete o.attributes[u],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:u}),this}}function Ap(r,t,e){r.prototype[t]=function(n,i,a){const[o,u]=Ke(this,t,e,n,i,a);if(!_e(u))throw new G(`Graph.${t}: provided attributes are not a plain object.`);return o.attributes=u,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function Sp(r,t,e){r.prototype[t]=function(n,i,a){const[o,u]=Ke(this,t,e,n,i,a);if(!_e(u))throw new G(`Graph.${t}: provided attributes are not a plain object.`);return pe(o.attributes,u),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:u}),this}}function Cp(r,t,e){r.prototype[t]=function(n,i,a){const[o,u]=Ke(this,t,e,n,i,a);if(typeof u!="function")throw new G(`Graph.${t}: provided updater is not a function.`);return o.attributes=u(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const Tp=[{name:r=>`get${r}Attribute`,attacher:yp},{name:r=>`get${r}Attributes`,attacher:bp},{name:r=>`has${r}Attribute`,attacher:wp},{name:r=>`set${r}Attribute`,attacher:_p},{name:r=>`update${r}Attribute`,attacher:Ep},{name:r=>`remove${r}Attribute`,attacher:xp},{name:r=>`replace${r}Attributes`,attacher:Ap},{name:r=>`merge${r}Attributes`,attacher:Sp},{name:r=>`update${r}Attributes`,attacher:Cp}];function Np(r){Tp.forEach(function({name:t,attacher:e}){e(r,t("Node"),vs),e(r,t("Source"),ms),e(r,t("Target"),mp),e(r,t("Opposite"),ys)})}function Lp(r,t,e){r.prototype[t]=function(n,i){let a;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new H(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new H(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+n,u=""+i;if(i=arguments[2],a=Oe(this,o,u,e),!a)throw new O(`Graph.${t}: could not find an edge for the given path ("${o}" - "${u}").`)}else{if(e!=="mixed")throw new H(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,a=this._edges.get(n),!a)throw new O(`Graph.${t}: could not find the "${n}" edge in the graph.`)}return a.attributes[i]}}function Rp(r,t,e){r.prototype[t]=function(n){let i;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new H(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new H(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+n,o=""+arguments[1];if(i=Oe(this,a,o,e),!i)throw new O(`Graph.${t}: could not find an edge for the given path ("${a}" - "${o}").`)}else{if(e!=="mixed")throw new H(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,i=this._edges.get(n),!i)throw new O(`Graph.${t}: could not find the "${n}" edge in the graph.`)}return i.attributes}}function Fp(r,t,e){r.prototype[t]=function(n,i){let a;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new H(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new H(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+n,u=""+i;if(i=arguments[2],a=Oe(this,o,u,e),!a)throw new O(`Graph.${t}: could not find an edge for the given path ("${o}" - "${u}").`)}else{if(e!=="mixed")throw new H(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,a=this._edges.get(n),!a)throw new O(`Graph.${t}: could not find the "${n}" edge in the graph.`)}return a.attributes.hasOwnProperty(i)}}function Dp(r,t,e){r.prototype[t]=function(n,i,a){let o;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new H(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new H(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const u=""+n,h=""+i;if(i=arguments[2],a=arguments[3],o=Oe(this,u,h,e),!o)throw new O(`Graph.${t}: could not find an edge for the given path ("${u}" - "${h}").`)}else{if(e!=="mixed")throw new H(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,o=this._edges.get(n),!o)throw new O(`Graph.${t}: could not find the "${n}" edge in the graph.`)}return o.attributes[i]=a,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:i}),this}}function kp(r,t,e){r.prototype[t]=function(n,i,a){let o;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new H(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new H(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const u=""+n,h=""+i;if(i=arguments[2],a=arguments[3],o=Oe(this,u,h,e),!o)throw new O(`Graph.${t}: could not find an edge for the given path ("${u}" - "${h}").`)}else{if(e!=="mixed")throw new H(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,o=this._edges.get(n),!o)throw new O(`Graph.${t}: could not find the "${n}" edge in the graph.`)}if(typeof a!="function")throw new G(`Graph.${t}: updater should be a function.`);return o.attributes[i]=a(o.attributes[i]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:i}),this}}function Op(r,t,e){r.prototype[t]=function(n,i){let a;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new H(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new H(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+n,u=""+i;if(i=arguments[2],a=Oe(this,o,u,e),!a)throw new O(`Graph.${t}: could not find an edge for the given path ("${o}" - "${u}").`)}else{if(e!=="mixed")throw new H(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,a=this._edges.get(n),!a)throw new O(`Graph.${t}: could not find the "${n}" edge in the graph.`)}return delete a.attributes[i],this.emit("edgeAttributesUpdated",{key:a.key,type:"remove",attributes:a.attributes,name:i}),this}}function $p(r,t,e){r.prototype[t]=function(n,i){let a;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new H(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new H(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+n,u=""+i;if(i=arguments[2],a=Oe(this,o,u,e),!a)throw new O(`Graph.${t}: could not find an edge for the given path ("${o}" - "${u}").`)}else{if(e!=="mixed")throw new H(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,a=this._edges.get(n),!a)throw new O(`Graph.${t}: could not find the "${n}" edge in the graph.`)}if(!_e(i))throw new G(`Graph.${t}: provided attributes are not a plain object.`);return a.attributes=i,this.emit("edgeAttributesUpdated",{key:a.key,type:"replace",attributes:a.attributes}),this}}function Pp(r,t,e){r.prototype[t]=function(n,i){let a;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new H(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new H(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+n,u=""+i;if(i=arguments[2],a=Oe(this,o,u,e),!a)throw new O(`Graph.${t}: could not find an edge for the given path ("${o}" - "${u}").`)}else{if(e!=="mixed")throw new H(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,a=this._edges.get(n),!a)throw new O(`Graph.${t}: could not find the "${n}" edge in the graph.`)}if(!_e(i))throw new G(`Graph.${t}: provided attributes are not a plain object.`);return pe(a.attributes,i),this.emit("edgeAttributesUpdated",{key:a.key,type:"merge",attributes:a.attributes,data:i}),this}}function Gp(r,t,e){r.prototype[t]=function(n,i){let a;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new H(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new H(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+n,u=""+i;if(i=arguments[2],a=Oe(this,o,u,e),!a)throw new O(`Graph.${t}: could not find an edge for the given path ("${o}" - "${u}").`)}else{if(e!=="mixed")throw new H(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,a=this._edges.get(n),!a)throw new O(`Graph.${t}: could not find the "${n}" edge in the graph.`)}if(typeof i!="function")throw new G(`Graph.${t}: provided updater is not a function.`);return a.attributes=i(a.attributes),this.emit("edgeAttributesUpdated",{key:a.key,type:"update",attributes:a.attributes}),this}}const Mp=[{name:r=>`get${r}Attribute`,attacher:Lp},{name:r=>`get${r}Attributes`,attacher:Rp},{name:r=>`has${r}Attribute`,attacher:Fp},{name:r=>`set${r}Attribute`,attacher:Dp},{name:r=>`update${r}Attribute`,attacher:kp},{name:r=>`remove${r}Attribute`,attacher:Op},{name:r=>`replace${r}Attributes`,attacher:$p},{name:r=>`merge${r}Attributes`,attacher:Pp},{name:r=>`update${r}Attributes`,attacher:Gp}];function Ip(r){Mp.forEach(function({name:t,attacher:e}){e(r,t("Edge"),"mixed"),e(r,t("DirectedEdge"),"directed"),e(r,t("UndirectedEdge"),"undirected")})}const Up=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function zp(r,t,e,n){let i=!1;for(const a in t){if(a===n)continue;const o=t[a];if(i=e(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),r&&i)return o.key}}function Bp(r,t,e,n){let i,a,o,u=!1;for(const h in t)if(h!==n){i=t[h];do{if(a=i.source,o=i.target,u=e(i.key,i.attributes,a.key,o.key,a.attributes,o.attributes,i.undirected),r&&u)return i.key;i=i.next}while(i!==void 0)}}function En(r,t){const e=Object.keys(r),n=e.length;let i,a=0;return new $e(function(){do if(i)i=i.next;else{if(a>=n)return{done:!0};const u=e[a++];if(u===t){i=void 0;continue}i=r[u]}while(!i);return{done:!1,value:{edge:i.key,attributes:i.attributes,source:i.source.key,target:i.target.key,sourceAttributes:i.source.attributes,targetAttributes:i.target.attributes,undirected:i.undirected}}})}function jp(r,t,e,n){const i=t[e];if(!i)return;const a=i.source,o=i.target;if(n(i.key,i.attributes,a.key,o.key,a.attributes,o.attributes,i.undirected)&&r)return i.key}function Hp(r,t,e,n){let i=t[e];if(!i)return;let a=!1;do{if(a=n(i.key,i.attributes,i.source.key,i.target.key,i.source.attributes,i.target.attributes,i.undirected),r&&a)return i.key;i=i.next}while(i!==void 0)}function xn(r,t){let e=r[t];return e.next!==void 0?new $e(function(){if(!e)return{done:!0};const n={edge:e.key,attributes:e.attributes,source:e.source.key,target:e.target.key,sourceAttributes:e.source.attributes,targetAttributes:e.target.attributes,undirected:e.undirected};return e=e.next,{done:!1,value:n}}):$e.of({edge:e.key,attributes:e.attributes,source:e.source.key,target:e.target.key,sourceAttributes:e.source.attributes,targetAttributes:e.target.attributes,undirected:e.undirected})}function Wp(r,t){if(r.size===0)return[];if(t==="mixed"||t===r.type)return typeof Array.from=="function"?Array.from(r._edges.keys()):ds(r._edges.keys(),r._edges.size);const e=t==="undirected"?r.undirectedSize:r.directedSize,n=new Array(e),i=t==="undirected",a=r._edges.values();let o=0,u,h;for(;u=a.next(),u.done!==!0;)h=u.value,h.undirected===i&&(n[o++]=h.key);return n}function bs(r,t,e,n){if(t.size===0)return;const i=e!=="mixed"&&e!==t.type,a=e==="undirected";let o,u,h=!1;const d=t._edges.values();for(;o=d.next(),o.done!==!0;){if(u=o.value,i&&u.undirected!==a)continue;const{key:p,attributes:f,source:w,target:A}=u;if(h=n(p,f,w.key,A.key,w.attributes,A.attributes,u.undirected),r&&h)return p}}function qp(r,t){if(r.size===0)return $e.empty();const e=t!=="mixed"&&t!==r.type,n=t==="undirected",i=r._edges.values();return new $e(function(){let o,u;for(;;){if(o=i.next(),o.done)return o;if(u=o.value,!(e&&u.undirected!==n))break}return{value:{edge:u.key,attributes:u.attributes,source:u.source.key,target:u.target.key,sourceAttributes:u.source.attributes,targetAttributes:u.target.attributes,undirected:u.undirected},done:!1}})}function Kn(r,t,e,n,i,a){const o=t?Bp:zp;let u;if(e!=="undirected"&&(n!=="out"&&(u=o(r,i.in,a),r&&u)||n!=="in"&&(u=o(r,i.out,a,n?void 0:i.key),r&&u))||e!=="directed"&&(u=o(r,i.undirected,a),r&&u))return u}function Vp(r,t,e,n){const i=[];return Kn(!1,r,t,e,n,function(a){i.push(a)}),i}function Yp(r,t,e){let n=$e.empty();return r!=="undirected"&&(t!=="out"&&typeof e.in<"u"&&(n=Ye(n,En(e.in))),t!=="in"&&typeof e.out<"u"&&(n=Ye(n,En(e.out,t?void 0:e.key)))),r!=="directed"&&typeof e.undirected<"u"&&(n=Ye(n,En(e.undirected))),n}function Xn(r,t,e,n,i,a,o){const u=e?Hp:jp;let h;if(t!=="undirected"&&(typeof i.in<"u"&&n!=="out"&&(h=u(r,i.in,a,o),r&&h)||typeof i.out<"u"&&n!=="in"&&(n||i.key!==a)&&(h=u(r,i.out,a,o),r&&h))||t!=="directed"&&typeof i.undirected<"u"&&(h=u(r,i.undirected,a,o),r&&h))return h}function Kp(r,t,e,n,i){const a=[];return Xn(!1,r,t,e,n,i,function(o){a.push(o)}),a}function Xp(r,t,e,n){let i=$e.empty();return r!=="undirected"&&(typeof e.in<"u"&&t!=="out"&&n in e.in&&(i=Ye(i,xn(e.in,n))),typeof e.out<"u"&&t!=="in"&&n in e.out&&(t||e.key!==n)&&(i=Ye(i,xn(e.out,n)))),r!=="directed"&&typeof e.undirected<"u"&&n in e.undirected&&(i=Ye(i,xn(e.undirected,n))),i}function Jp(r,t){const{name:e,type:n,direction:i}=t;r.prototype[e]=function(a,o){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return[];if(!arguments.length)return Wp(this,n);if(arguments.length===1){a=""+a;const u=this._nodes.get(a);if(typeof u>"u")throw new O(`Graph.${e}: could not find the "${a}" node in the graph.`);return Vp(this.multi,n==="mixed"?this.type:n,i,u)}if(arguments.length===2){a=""+a,o=""+o;const u=this._nodes.get(a);if(!u)throw new O(`Graph.${e}:  could not find the "${a}" source node in the graph.`);if(!this._nodes.has(o))throw new O(`Graph.${e}:  could not find the "${o}" target node in the graph.`);return Kp(n,this.multi,i,u,o)}throw new G(`Graph.${e}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Zp(r,t){const{name:e,type:n,direction:i}=t,a="forEach"+e[0].toUpperCase()+e.slice(1,-1);r.prototype[a]=function(d,p,f){if(!(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)){if(arguments.length===1)return f=d,bs(!1,this,n,f);if(arguments.length===2){d=""+d,f=p;const w=this._nodes.get(d);if(typeof w>"u")throw new O(`Graph.${a}: could not find the "${d}" node in the graph.`);return Kn(!1,this.multi,n==="mixed"?this.type:n,i,w,f)}if(arguments.length===3){d=""+d,p=""+p;const w=this._nodes.get(d);if(!w)throw new O(`Graph.${a}:  could not find the "${d}" source node in the graph.`);if(!this._nodes.has(p))throw new O(`Graph.${a}:  could not find the "${p}" target node in the graph.`);return Xn(!1,n,this.multi,i,w,p,f)}throw new G(`Graph.${a}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+e[0].toUpperCase()+e.slice(1);r.prototype[o]=function(){const d=Array.prototype.slice.call(arguments),p=d.pop();let f;if(d.length===0){let w=0;n!=="directed"&&(w+=this.undirectedSize),n!=="undirected"&&(w+=this.directedSize),f=new Array(w);let A=0;d.push((E,y,T,L,k,N,z)=>{f[A++]=p(E,y,T,L,k,N,z)})}else f=[],d.push((w,A,E,y,T,L,k)=>{f.push(p(w,A,E,y,T,L,k))});return this[a].apply(this,d),f};const u="filter"+e[0].toUpperCase()+e.slice(1);r.prototype[u]=function(){const d=Array.prototype.slice.call(arguments),p=d.pop(),f=[];return d.push((w,A,E,y,T,L,k)=>{p(w,A,E,y,T,L,k)&&f.push(w)}),this[a].apply(this,d),f};const h="reduce"+e[0].toUpperCase()+e.slice(1);r.prototype[h]=function(){let d=Array.prototype.slice.call(arguments);if(d.length<2||d.length>4)throw new G(`Graph.${h}: invalid number of arguments (expecting 2, 3 or 4 and got ${d.length}).`);if(typeof d[d.length-1]=="function"&&typeof d[d.length-2]!="function")throw new G(`Graph.${h}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let p,f;d.length===2?(p=d[0],f=d[1],d=[]):d.length===3?(p=d[1],f=d[2],d=[d[0]]):d.length===4&&(p=d[2],f=d[3],d=[d[0],d[1]]);let w=f;return d.push((A,E,y,T,L,k,N)=>{w=p(w,A,E,y,T,L,k,N)}),this[a].apply(this,d),w}}function Qp(r,t){const{name:e,type:n,direction:i}=t,a="find"+e[0].toUpperCase()+e.slice(1,-1);r.prototype[a]=function(h,d,p){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return!1;if(arguments.length===1)return p=h,bs(!0,this,n,p);if(arguments.length===2){h=""+h,p=d;const f=this._nodes.get(h);if(typeof f>"u")throw new O(`Graph.${a}: could not find the "${h}" node in the graph.`);return Kn(!0,this.multi,n==="mixed"?this.type:n,i,f,p)}if(arguments.length===3){h=""+h,d=""+d;const f=this._nodes.get(h);if(!f)throw new O(`Graph.${a}:  could not find the "${h}" source node in the graph.`);if(!this._nodes.has(d))throw new O(`Graph.${a}:  could not find the "${d}" target node in the graph.`);return Xn(!0,n,this.multi,i,f,d,p)}throw new G(`Graph.${a}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+e[0].toUpperCase()+e.slice(1,-1);r.prototype[o]=function(){const h=Array.prototype.slice.call(arguments),d=h.pop();return h.push((f,w,A,E,y,T,L)=>d(f,w,A,E,y,T,L)),!!this[a].apply(this,h)};const u="every"+e[0].toUpperCase()+e.slice(1,-1);r.prototype[u]=function(){const h=Array.prototype.slice.call(arguments),d=h.pop();return h.push((f,w,A,E,y,T,L)=>!d(f,w,A,E,y,T,L)),!this[a].apply(this,h)}}function eg(r,t){const{name:e,type:n,direction:i}=t,a=e.slice(0,-1)+"Entries";r.prototype[a]=function(o,u){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return $e.empty();if(!arguments.length)return qp(this,n);if(arguments.length===1){o=""+o;const h=this._nodes.get(o);if(!h)throw new O(`Graph.${a}: could not find the "${o}" node in the graph.`);return Yp(n,i,h)}if(arguments.length===2){o=""+o,u=""+u;const h=this._nodes.get(o);if(!h)throw new O(`Graph.${a}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(u))throw new O(`Graph.${a}:  could not find the "${u}" target node in the graph.`);return Xp(n,i,h,u)}throw new G(`Graph.${a}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function tg(r){Up.forEach(t=>{Jp(r,t),Zp(r,t),Qp(r,t),eg(r,t)})}const rg=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Rr(){this.A=null,this.B=null}Rr.prototype.wrap=function(r){this.A===null?this.A=r:this.B===null&&(this.B=r)};Rr.prototype.has=function(r){return this.A!==null&&r in this.A||this.B!==null&&r in this.B};function jt(r,t,e,n,i){for(const a in n){const o=n[a],u=o.source,h=o.target,d=u===e?h:u;if(t&&t.has(d.key))continue;const p=i(d.key,d.attributes);if(r&&p)return d.key}}function Jn(r,t,e,n,i){if(t!=="mixed"){if(t==="undirected")return jt(r,null,n,n.undirected,i);if(typeof e=="string")return jt(r,null,n,n[e],i)}const a=new Rr;let o;if(t!=="undirected"){if(e!=="out"){if(o=jt(r,null,n,n.in,i),r&&o)return o;a.wrap(n.in)}if(e!=="in"){if(o=jt(r,a,n,n.out,i),r&&o)return o;a.wrap(n.out)}}if(t!=="directed"&&(o=jt(r,a,n,n.undirected,i),r&&o))return o}function ng(r,t,e){if(r!=="mixed"){if(r==="undirected")return Object.keys(e.undirected);if(typeof t=="string")return Object.keys(e[t])}const n=[];return Jn(!1,r,t,e,function(i){n.push(i)}),n}function Ht(r,t,e){const n=Object.keys(e),i=n.length;let a=0;return new $e(function(){let u=null;do{if(a>=i)return r&&r.wrap(e),{done:!0};const h=e[n[a++]],d=h.source,p=h.target;if(u=d===t?p:d,r&&r.has(u.key)){u=null;continue}}while(u===null);return{done:!1,value:{neighbor:u.key,attributes:u.attributes}}})}function ig(r,t,e){if(r!=="mixed"){if(r==="undirected")return Ht(null,e,e.undirected);if(typeof t=="string")return Ht(null,e,e[t])}let n=$e.empty();const i=new Rr;return r!=="undirected"&&(t!=="out"&&(n=Ye(n,Ht(i,e,e.in))),t!=="in"&&(n=Ye(n,Ht(i,e,e.out)))),r!=="directed"&&(n=Ye(n,Ht(i,e,e.undirected))),n}function ag(r,t){const{name:e,type:n,direction:i}=t;r.prototype[e]=function(a){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return[];a=""+a;const o=this._nodes.get(a);if(typeof o>"u")throw new O(`Graph.${e}: could not find the "${a}" node in the graph.`);return ng(n==="mixed"?this.type:n,i,o)}}function og(r,t){const{name:e,type:n,direction:i}=t,a="forEach"+e[0].toUpperCase()+e.slice(1,-1);r.prototype[a]=function(d,p){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return;d=""+d;const f=this._nodes.get(d);if(typeof f>"u")throw new O(`Graph.${a}: could not find the "${d}" node in the graph.`);Jn(!1,n==="mixed"?this.type:n,i,f,p)};const o="map"+e[0].toUpperCase()+e.slice(1);r.prototype[o]=function(d,p){const f=[];return this[a](d,(w,A)=>{f.push(p(w,A))}),f};const u="filter"+e[0].toUpperCase()+e.slice(1);r.prototype[u]=function(d,p){const f=[];return this[a](d,(w,A)=>{p(w,A)&&f.push(w)}),f};const h="reduce"+e[0].toUpperCase()+e.slice(1);r.prototype[h]=function(d,p,f){if(arguments.length<3)throw new G(`Graph.${h}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let w=f;return this[a](d,(A,E)=>{w=p(w,A,E)}),w}}function sg(r,t){const{name:e,type:n,direction:i}=t,a=e[0].toUpperCase()+e.slice(1,-1),o="find"+a;r.prototype[o]=function(d,p){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return;d=""+d;const f=this._nodes.get(d);if(typeof f>"u")throw new O(`Graph.${o}: could not find the "${d}" node in the graph.`);return Jn(!0,n==="mixed"?this.type:n,i,f,p)};const u="some"+a;r.prototype[u]=function(d,p){return!!this[o](d,p)};const h="every"+a;r.prototype[h]=function(d,p){return!this[o](d,(w,A)=>!p(w,A))}}function ug(r,t){const{name:e,type:n,direction:i}=t,a=e.slice(0,-1)+"Entries";r.prototype[a]=function(o){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return $e.empty();o=""+o;const u=this._nodes.get(o);if(typeof u>"u")throw new O(`Graph.${a}: could not find the "${o}" node in the graph.`);return ig(n==="mixed"?this.type:n,i,u)}}function cg(r){rg.forEach(t=>{ag(r,t),og(r,t),sg(r,t),ug(r,t)})}function sr(r,t,e,n,i){const a=n._nodes.values(),o=n.type;let u,h,d,p,f,w,A;for(;u=a.next(),u.done!==!0;){let E=!1;if(h=u.value,o!=="undirected"){p=h.out;for(d in p){f=p[d];do{if(w=f.target,E=!0,A=i(h.key,w.key,h.attributes,w.attributes,f.key,f.attributes,f.undirected),r&&A)return f;f=f.next}while(f)}}if(o!=="directed"){p=h.undirected;for(d in p)if(!(t&&h.key>d)){f=p[d];do{if(w=f.target,w.key!==d&&(w=f.source),E=!0,A=i(h.key,w.key,h.attributes,w.attributes,f.key,f.attributes,f.undirected),r&&A)return f;f=f.next}while(f)}}if(e&&!E&&(A=i(h.key,null,h.attributes,null,null,null,null),r&&A))return null}}function lg(r,t){const e={key:r};return hs(t.attributes)||(e.attributes=pe({},t.attributes)),e}function dg(r,t,e){const n={key:t,source:e.source.key,target:e.target.key};return hs(e.attributes)||(n.attributes=pe({},e.attributes)),r==="mixed"&&e.undirected&&(n.undirected=!0),n}function hg(r){if(!_e(r))throw new G('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in r))throw new G("Graph.import: serialized node is missing its key.");if("attributes"in r&&(!_e(r.attributes)||r.attributes===null))throw new G("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function fg(r){if(!_e(r))throw new G('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in r))throw new G("Graph.import: serialized edge is missing its source.");if(!("target"in r))throw new G("Graph.import: serialized edge is missing its target.");if("attributes"in r&&(!_e(r.attributes)||r.attributes===null))throw new G("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in r&&typeof r.undirected!="boolean")throw new G("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const pg=vp(),gg=new Set(["directed","undirected","mixed"]),eo=new Set(["domain","_events","_eventsCount","_maxListeners"]),vg=[{name:r=>`${r}Edge`,generateKey:!0},{name:r=>`${r}DirectedEdge`,generateKey:!0,type:"directed"},{name:r=>`${r}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:r=>`${r}EdgeWithKey`},{name:r=>`${r}DirectedEdgeWithKey`,type:"directed"},{name:r=>`${r}UndirectedEdgeWithKey`,type:"undirected"}],mg={allowSelfLoops:!0,multi:!1,type:"mixed"};function yg(r,t,e){if(e&&!_e(e))throw new G(`Graph.addNode: invalid attributes. Expecting an object but got "${e}"`);if(t=""+t,e=e||{},r._nodes.has(t))throw new H(`Graph.addNode: the "${t}" node already exist in the graph.`);const n=new r.NodeDataClass(t,e);return r._nodes.set(t,n),r.emit("nodeAdded",{key:t,attributes:e}),n}function to(r,t,e){const n=new r.NodeDataClass(t,e);return r._nodes.set(t,n),r.emit("nodeAdded",{key:t,attributes:e}),n}function ws(r,t,e,n,i,a,o,u){if(!n&&r.type==="undirected")throw new H(`Graph.${t}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(n&&r.type==="directed")throw new H(`Graph.${t}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(u&&!_e(u))throw new G(`Graph.${t}: invalid attributes. Expecting an object but got "${u}"`);if(a=""+a,o=""+o,u=u||{},!r.allowSelfLoops&&a===o)throw new H(`Graph.${t}: source & target are the same ("${a}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const h=r._nodes.get(a),d=r._nodes.get(o);if(!h)throw new O(`Graph.${t}: source node "${a}" not found.`);if(!d)throw new O(`Graph.${t}: target node "${o}" not found.`);const p={key:null,undirected:n,source:a,target:o,attributes:u};if(e)i=r._edgeKeyGenerator();else if(i=""+i,r._edges.has(i))throw new H(`Graph.${t}: the "${i}" edge already exists in the graph.`);if(!r.multi&&(n?typeof h.undirected[o]<"u":typeof h.out[o]<"u"))throw new H(`Graph.${t}: an edge linking "${a}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const f=new kt(n,i,h,d,u);r._edges.set(i,f);const w=a===o;return n?(h.undirectedDegree++,d.undirectedDegree++,w&&(h.undirectedLoops++,r._undirectedSelfLoopCount++)):(h.outDegree++,d.inDegree++,w&&(h.directedLoops++,r._directedSelfLoopCount++)),r.multi?f.attachMulti():f.attach(),n?r._undirectedSize++:r._directedSize++,p.key=i,r.emit("edgeAdded",p),i}function bg(r,t,e,n,i,a,o,u,h){if(!n&&r.type==="undirected")throw new H(`Graph.${t}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(n&&r.type==="directed")throw new H(`Graph.${t}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(u){if(h){if(typeof u!="function")throw new G(`Graph.${t}: invalid updater function. Expecting a function but got "${u}"`)}else if(!_e(u))throw new G(`Graph.${t}: invalid attributes. Expecting an object but got "${u}"`)}a=""+a,o=""+o;let d;if(h&&(d=u,u=void 0),!r.allowSelfLoops&&a===o)throw new H(`Graph.${t}: source & target are the same ("${a}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let p=r._nodes.get(a),f=r._nodes.get(o),w,A;if(!e&&(w=r._edges.get(i),w)){if((w.source.key!==a||w.target.key!==o)&&(!n||w.source.key!==o||w.target.key!==a))throw new H(`Graph.${t}: inconsistency detected when attempting to merge the "${i}" edge with "${a}" source & "${o}" target vs. ("${w.source.key}", "${w.target.key}").`);A=w}if(!A&&!r.multi&&p&&(A=n?p.undirected[o]:p.out[o]),A){const k=[A.key,!1,!1,!1];if(h?!d:!u)return k;if(h){const N=A.attributes;A.attributes=d(N),r.emit("edgeAttributesUpdated",{type:"replace",key:A.key,attributes:A.attributes})}else pe(A.attributes,u),r.emit("edgeAttributesUpdated",{type:"merge",key:A.key,attributes:A.attributes,data:u});return k}u=u||{},h&&d&&(u=d(u));const E={key:null,undirected:n,source:a,target:o,attributes:u};if(e)i=r._edgeKeyGenerator();else if(i=""+i,r._edges.has(i))throw new H(`Graph.${t}: the "${i}" edge already exists in the graph.`);let y=!1,T=!1;p||(p=to(r,a,{}),y=!0,a===o&&(f=p,T=!0)),f||(f=to(r,o,{}),T=!0),w=new kt(n,i,p,f,u),r._edges.set(i,w);const L=a===o;return n?(p.undirectedDegree++,f.undirectedDegree++,L&&(p.undirectedLoops++,r._undirectedSelfLoopCount++)):(p.outDegree++,f.inDegree++,L&&(p.directedLoops++,r._directedSelfLoopCount++)),r.multi?w.attachMulti():w.attach(),n?r._undirectedSize++:r._directedSize++,E.key=i,r.emit("edgeAdded",E),[i,!0,y,T]}function At(r,t){r._edges.delete(t.key);const{source:e,target:n,attributes:i}=t,a=t.undirected,o=e===n;a?(e.undirectedDegree--,n.undirectedDegree--,o&&(e.undirectedLoops--,r._undirectedSelfLoopCount--)):(e.outDegree--,n.inDegree--,o&&(e.directedLoops--,r._directedSelfLoopCount--)),r.multi?t.detachMulti():t.detach(),a?r._undirectedSize--:r._directedSize--,r.emit("edgeDropped",{key:t.key,attributes:i,source:e.key,target:n.key,undirected:a})}class se extends us.EventEmitter{constructor(t){if(super(),t=pe({},mg,t),typeof t.multi!="boolean")throw new G(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${t.multi}".`);if(!gg.has(t.type))throw new G(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${t.type}".`);if(typeof t.allowSelfLoops!="boolean")throw new G(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${t.allowSelfLoops}".`);const e=t.type==="mixed"?fs:t.type==="directed"?ps:gs;Fe(this,"NodeDataClass",e);const n="geid_"+pg()+"_";let i=0;const a=()=>{let o;do o=n+i++;while(this._edges.has(o));return o};Fe(this,"_attributes",{}),Fe(this,"_nodes",new Map),Fe(this,"_edges",new Map),Fe(this,"_directedSize",0),Fe(this,"_undirectedSize",0),Fe(this,"_directedSelfLoopCount",0),Fe(this,"_undirectedSelfLoopCount",0),Fe(this,"_edgeKeyGenerator",a),Fe(this,"_options",t),eo.forEach(o=>Fe(this,o,this[o])),Ie(this,"order",()=>this._nodes.size),Ie(this,"size",()=>this._edges.size),Ie(this,"directedSize",()=>this._directedSize),Ie(this,"undirectedSize",()=>this._undirectedSize),Ie(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),Ie(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),Ie(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),Ie(this,"multi",this._options.multi),Ie(this,"type",this._options.type),Ie(this,"allowSelfLoops",this._options.allowSelfLoops),Ie(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(t){return this._nodes.has(""+t)}hasDirectedEdge(t,e){if(this.type==="undirected")return!1;if(arguments.length===1){const n=""+t,i=this._edges.get(n);return!!i&&!i.undirected}else if(arguments.length===2){t=""+t,e=""+e;const n=this._nodes.get(t);return n?n.out.hasOwnProperty(e):!1}throw new G(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(t,e){if(this.type==="directed")return!1;if(arguments.length===1){const n=""+t,i=this._edges.get(n);return!!i&&i.undirected}else if(arguments.length===2){t=""+t,e=""+e;const n=this._nodes.get(t);return n?n.undirected.hasOwnProperty(e):!1}throw new G(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(t,e){if(arguments.length===1){const n=""+t;return this._edges.has(n)}else if(arguments.length===2){t=""+t,e=""+e;const n=this._nodes.get(t);return n?typeof n.out<"u"&&n.out.hasOwnProperty(e)||typeof n.undirected<"u"&&n.undirected.hasOwnProperty(e):!1}throw new G(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(t,e){if(this.type==="undirected")return;if(t=""+t,e=""+e,this.multi)throw new H("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const n=this._nodes.get(t);if(!n)throw new O(`Graph.directedEdge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(e))throw new O(`Graph.directedEdge: could not find the "${e}" target node in the graph.`);const i=n.out&&n.out[e]||void 0;if(i)return i.key}undirectedEdge(t,e){if(this.type==="directed")return;if(t=""+t,e=""+e,this.multi)throw new H("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const n=this._nodes.get(t);if(!n)throw new O(`Graph.undirectedEdge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(e))throw new O(`Graph.undirectedEdge: could not find the "${e}" target node in the graph.`);const i=n.undirected&&n.undirected[e]||void 0;if(i)return i.key}edge(t,e){if(this.multi)throw new H("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");t=""+t,e=""+e;const n=this._nodes.get(t);if(!n)throw new O(`Graph.edge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(e))throw new O(`Graph.edge: could not find the "${e}" target node in the graph.`);const i=n.out&&n.out[e]||n.undirected&&n.undirected[e]||void 0;if(i)return i.key}areDirectedNeighbors(t,e){t=""+t,e=""+e;const n=this._nodes.get(t);if(!n)throw new O(`Graph.areDirectedNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:e in n.in||e in n.out}areOutNeighbors(t,e){t=""+t,e=""+e;const n=this._nodes.get(t);if(!n)throw new O(`Graph.areOutNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:e in n.out}areInNeighbors(t,e){t=""+t,e=""+e;const n=this._nodes.get(t);if(!n)throw new O(`Graph.areInNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:e in n.in}areUndirectedNeighbors(t,e){t=""+t,e=""+e;const n=this._nodes.get(t);if(!n)throw new O(`Graph.areUndirectedNeighbors: could not find the "${t}" node in the graph.`);return this.type==="directed"?!1:e in n.undirected}areNeighbors(t,e){t=""+t,e=""+e;const n=this._nodes.get(t);if(!n)throw new O(`Graph.areNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&(e in n.in||e in n.out)||this.type!=="directed"&&e in n.undirected}areInboundNeighbors(t,e){t=""+t,e=""+e;const n=this._nodes.get(t);if(!n)throw new O(`Graph.areInboundNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&e in n.in||this.type!=="directed"&&e in n.undirected}areOutboundNeighbors(t,e){t=""+t,e=""+e;const n=this._nodes.get(t);if(!n)throw new O(`Graph.areOutboundNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&e in n.out||this.type!=="directed"&&e in n.undirected}inDegree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new O(`Graph.inDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:e.inDegree}outDegree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new O(`Graph.outDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:e.outDegree}directedDegree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new O(`Graph.directedDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:e.inDegree+e.outDegree}undirectedDegree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new O(`Graph.undirectedDegree: could not find the "${t}" node in the graph.`);return this.type==="directed"?0:e.undirectedDegree}inboundDegree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new O(`Graph.inboundDegree: could not find the "${t}" node in the graph.`);let n=0;return this.type!=="directed"&&(n+=e.undirectedDegree),this.type!=="undirected"&&(n+=e.inDegree),n}outboundDegree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new O(`Graph.outboundDegree: could not find the "${t}" node in the graph.`);let n=0;return this.type!=="directed"&&(n+=e.undirectedDegree),this.type!=="undirected"&&(n+=e.outDegree),n}degree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new O(`Graph.degree: could not find the "${t}" node in the graph.`);let n=0;return this.type!=="directed"&&(n+=e.undirectedDegree),this.type!=="undirected"&&(n+=e.inDegree+e.outDegree),n}inDegreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new O(`Graph.inDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:e.inDegree-e.directedLoops}outDegreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new O(`Graph.outDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:e.outDegree-e.directedLoops}directedDegreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new O(`Graph.directedDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:e.inDegree+e.outDegree-e.directedLoops*2}undirectedDegreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new O(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="directed"?0:e.undirectedDegree-e.undirectedLoops*2}inboundDegreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new O(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let n=0,i=0;return this.type!=="directed"&&(n+=e.undirectedDegree,i+=e.undirectedLoops*2),this.type!=="undirected"&&(n+=e.inDegree,i+=e.directedLoops),n-i}outboundDegreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new O(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let n=0,i=0;return this.type!=="directed"&&(n+=e.undirectedDegree,i+=e.undirectedLoops*2),this.type!=="undirected"&&(n+=e.outDegree,i+=e.directedLoops),n-i}degreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new O(`Graph.degreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let n=0,i=0;return this.type!=="directed"&&(n+=e.undirectedDegree,i+=e.undirectedLoops*2),this.type!=="undirected"&&(n+=e.inDegree+e.outDegree,i+=e.directedLoops*2),n-i}source(t){t=""+t;const e=this._edges.get(t);if(!e)throw new O(`Graph.source: could not find the "${t}" edge in the graph.`);return e.source.key}target(t){t=""+t;const e=this._edges.get(t);if(!e)throw new O(`Graph.target: could not find the "${t}" edge in the graph.`);return e.target.key}extremities(t){t=""+t;const e=this._edges.get(t);if(!e)throw new O(`Graph.extremities: could not find the "${t}" edge in the graph.`);return[e.source.key,e.target.key]}opposite(t,e){t=""+t,e=""+e;const n=this._edges.get(e);if(!n)throw new O(`Graph.opposite: could not find the "${e}" edge in the graph.`);const i=n.source.key,a=n.target.key;if(t===i)return a;if(t===a)return i;throw new O(`Graph.opposite: the "${t}" node is not attached to the "${e}" edge (${i}, ${a}).`)}hasExtremity(t,e){t=""+t,e=""+e;const n=this._edges.get(t);if(!n)throw new O(`Graph.hasExtremity: could not find the "${t}" edge in the graph.`);return n.source.key===e||n.target.key===e}isUndirected(t){t=""+t;const e=this._edges.get(t);if(!e)throw new O(`Graph.isUndirected: could not find the "${t}" edge in the graph.`);return e.undirected}isDirected(t){t=""+t;const e=this._edges.get(t);if(!e)throw new O(`Graph.isDirected: could not find the "${t}" edge in the graph.`);return!e.undirected}isSelfLoop(t){t=""+t;const e=this._edges.get(t);if(!e)throw new O(`Graph.isSelfLoop: could not find the "${t}" edge in the graph.`);return e.source===e.target}addNode(t,e){return yg(this,t,e).key}mergeNode(t,e){if(e&&!_e(e))throw new G(`Graph.mergeNode: invalid attributes. Expecting an object but got "${e}"`);t=""+t,e=e||{};let n=this._nodes.get(t);return n?(e&&(pe(n.attributes,e),this.emit("nodeAttributesUpdated",{type:"merge",key:t,attributes:n.attributes,data:e})),[t,!1]):(n=new this.NodeDataClass(t,e),this._nodes.set(t,n),this.emit("nodeAdded",{key:t,attributes:e}),[t,!0])}updateNode(t,e){if(e&&typeof e!="function")throw new G(`Graph.updateNode: invalid updater function. Expecting a function but got "${e}"`);t=""+t;let n=this._nodes.get(t);if(n){if(e){const a=n.attributes;n.attributes=e(a),this.emit("nodeAttributesUpdated",{type:"replace",key:t,attributes:n.attributes})}return[t,!1]}const i=e?e({}):{};return n=new this.NodeDataClass(t,i),this._nodes.set(t,n),this.emit("nodeAdded",{key:t,attributes:i}),[t,!0]}dropNode(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new O(`Graph.dropNode: could not find the "${t}" node in the graph.`);let n;if(this.type!=="undirected"){for(const i in e.out){n=e.out[i];do At(this,n),n=n.next;while(n)}for(const i in e.in){n=e.in[i];do At(this,n),n=n.next;while(n)}}if(this.type!=="directed")for(const i in e.undirected){n=e.undirected[i];do At(this,n),n=n.next;while(n)}this._nodes.delete(t),this.emit("nodeDropped",{key:t,attributes:e.attributes})}dropEdge(t){let e;if(arguments.length>1){const n=""+arguments[0],i=""+arguments[1];if(e=Oe(this,n,i,this.type),!e)throw new O(`Graph.dropEdge: could not find the "${n}" -> "${i}" edge in the graph.`)}else if(t=""+t,e=this._edges.get(t),!e)throw new O(`Graph.dropEdge: could not find the "${t}" edge in the graph.`);return At(this,e),this}dropDirectedEdge(t,e){if(arguments.length<2)throw new H("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new H("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");t=""+t,e=""+e;const n=Oe(this,t,e,"directed");if(!n)throw new O(`Graph.dropDirectedEdge: could not find a "${t}" -> "${e}" edge in the graph.`);return At(this,n),this}dropUndirectedEdge(t,e){if(arguments.length<2)throw new H("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new H("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const n=Oe(this,t,e,"undirected");if(!n)throw new O(`Graph.dropUndirectedEdge: could not find a "${t}" -> "${e}" edge in the graph.`);return At(this,n),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const t=this._nodes.values();let e;for(;e=t.next(),e.done!==!0;)e.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(t){return this._attributes[t]}getAttributes(){return this._attributes}hasAttribute(t){return this._attributes.hasOwnProperty(t)}setAttribute(t,e){return this._attributes[t]=e,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:t}),this}updateAttribute(t,e){if(typeof e!="function")throw new G("Graph.updateAttribute: updater should be a function.");const n=this._attributes[t];return this._attributes[t]=e(n),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:t}),this}removeAttribute(t){return delete this._attributes[t],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:t}),this}replaceAttributes(t){if(!_e(t))throw new G("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=t,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(t){if(!_e(t))throw new G("Graph.mergeAttributes: provided attributes are not a plain object.");return pe(this._attributes,t),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:t}),this}updateAttributes(t){if(typeof t!="function")throw new G("Graph.updateAttributes: provided updater is not a function.");return this._attributes=t(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(t,e){if(typeof t!="function")throw new G("Graph.updateEachNodeAttributes: expecting an updater function.");if(e&&!Qa(e))throw new G("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const n=this._nodes.values();let i,a;for(;i=n.next(),i.done!==!0;)a=i.value,a.attributes=t(a.key,a.attributes);this.emit("eachNodeAttributesUpdated",{hints:e||null})}updateEachEdgeAttributes(t,e){if(typeof t!="function")throw new G("Graph.updateEachEdgeAttributes: expecting an updater function.");if(e&&!Qa(e))throw new G("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const n=this._edges.values();let i,a,o,u;for(;i=n.next(),i.done!==!0;)a=i.value,o=a.source,u=a.target,a.attributes=t(a.key,a.attributes,o.key,u.key,o.attributes,u.attributes,a.undirected);this.emit("eachEdgeAttributesUpdated",{hints:e||null})}forEachAdjacencyEntry(t){if(typeof t!="function")throw new G("Graph.forEachAdjacencyEntry: expecting a callback.");sr(!1,!1,!1,this,t)}forEachAdjacencyEntryWithOrphans(t){if(typeof t!="function")throw new G("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");sr(!1,!1,!0,this,t)}forEachAssymetricAdjacencyEntry(t){if(typeof t!="function")throw new G("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");sr(!1,!0,!1,this,t)}forEachAssymetricAdjacencyEntryWithOrphans(t){if(typeof t!="function")throw new G("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");sr(!1,!0,!0,this,t)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):ds(this._nodes.keys(),this._nodes.size)}forEachNode(t){if(typeof t!="function")throw new G("Graph.forEachNode: expecting a callback.");const e=this._nodes.values();let n,i;for(;n=e.next(),n.done!==!0;)i=n.value,t(i.key,i.attributes)}findNode(t){if(typeof t!="function")throw new G("Graph.findNode: expecting a callback.");const e=this._nodes.values();let n,i;for(;n=e.next(),n.done!==!0;)if(i=n.value,t(i.key,i.attributes))return i.key}mapNodes(t){if(typeof t!="function")throw new G("Graph.mapNode: expecting a callback.");const e=this._nodes.values();let n,i;const a=new Array(this.order);let o=0;for(;n=e.next(),n.done!==!0;)i=n.value,a[o++]=t(i.key,i.attributes);return a}someNode(t){if(typeof t!="function")throw new G("Graph.someNode: expecting a callback.");const e=this._nodes.values();let n,i;for(;n=e.next(),n.done!==!0;)if(i=n.value,t(i.key,i.attributes))return!0;return!1}everyNode(t){if(typeof t!="function")throw new G("Graph.everyNode: expecting a callback.");const e=this._nodes.values();let n,i;for(;n=e.next(),n.done!==!0;)if(i=n.value,!t(i.key,i.attributes))return!1;return!0}filterNodes(t){if(typeof t!="function")throw new G("Graph.filterNodes: expecting a callback.");const e=this._nodes.values();let n,i;const a=[];for(;n=e.next(),n.done!==!0;)i=n.value,t(i.key,i.attributes)&&a.push(i.key);return a}reduceNodes(t,e){if(typeof t!="function")throw new G("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new G("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let n=e;const i=this._nodes.values();let a,o;for(;a=i.next(),a.done!==!0;)o=a.value,n=t(n,o.key,o.attributes);return n}nodeEntries(){const t=this._nodes.values();return new $e(()=>{const e=t.next();if(e.done)return e;const n=e.value;return{value:{node:n.key,attributes:n.attributes},done:!1}})}export(){const t=new Array(this._nodes.size);let e=0;this._nodes.forEach((i,a)=>{t[e++]=lg(a,i)});const n=new Array(this._edges.size);return e=0,this._edges.forEach((i,a)=>{n[e++]=dg(this.type,a,i)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:t,edges:n}}import(t,e=!1){if(t instanceof se)return t.forEachNode((h,d)=>{e?this.mergeNode(h,d):this.addNode(h,d)}),t.forEachEdge((h,d,p,f,w,A,E)=>{e?E?this.mergeUndirectedEdgeWithKey(h,p,f,d):this.mergeDirectedEdgeWithKey(h,p,f,d):E?this.addUndirectedEdgeWithKey(h,p,f,d):this.addDirectedEdgeWithKey(h,p,f,d)}),this;if(!_e(t))throw new G("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(t.attributes){if(!_e(t.attributes))throw new G("Graph.import: invalid attributes. Expecting a plain object.");e?this.mergeAttributes(t.attributes):this.replaceAttributes(t.attributes)}let n,i,a,o,u;if(t.nodes){if(a=t.nodes,!Array.isArray(a))throw new G("Graph.import: invalid nodes. Expecting an array.");for(n=0,i=a.length;n<i;n++){o=a[n],hg(o);const{key:h,attributes:d}=o;e?this.mergeNode(h,d):this.addNode(h,d)}}if(t.edges){let h=!1;if(this.type==="undirected"&&(h=!0),a=t.edges,!Array.isArray(a))throw new G("Graph.import: invalid edges. Expecting an array.");for(n=0,i=a.length;n<i;n++){u=a[n],fg(u);const{source:d,target:p,attributes:f,undirected:w=h}=u;let A;"key"in u?(A=e?w?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:w?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,A.call(this,u.key,d,p,f)):(A=e?w?this.mergeUndirectedEdge:this.mergeDirectedEdge:w?this.addUndirectedEdge:this.addDirectedEdge,A.call(this,d,p,f))}}return this}nullCopy(t){const e=new se(pe({},this._options,t));return e.replaceAttributes(pe({},this.getAttributes())),e}emptyCopy(t){const e=this.nullCopy(t);return this._nodes.forEach((n,i)=>{const a=pe({},n.attributes);n=new e.NodeDataClass(i,a),e._nodes.set(i,n)}),e}copy(t){if(t=t||{},typeof t.type=="string"&&t.type!==this.type&&t.type!=="mixed")throw new H(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${t.type}" because this would mean losing information about the current graph.`);if(typeof t.multi=="boolean"&&t.multi!==this.multi&&t.multi!==!0)throw new H("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof t.allowSelfLoops=="boolean"&&t.allowSelfLoops!==this.allowSelfLoops&&t.allowSelfLoops!==!0)throw new H("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const e=this.emptyCopy(t),n=this._edges.values();let i,a;for(;i=n.next(),i.done!==!0;)a=i.value,ws(e,"copy",!1,a.undirected,a.key,a.source.key,a.target.key,pe({},a.attributes));return e}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const t={};this._nodes.forEach((a,o)=>{t[o]=a.attributes});const e={},n={};this._edges.forEach((a,o)=>{const u=a.undirected?"--":"->";let h="",d=a.source.key,p=a.target.key,f;a.undirected&&d>p&&(f=d,d=p,p=f);const w=`(${d})${u}(${p})`;o.startsWith("geid_")?this.multi&&(typeof n[w]>"u"?n[w]=0:n[w]++,h+=`${n[w]}. `):h+=`[${o}]: `,h+=w,e[h]=a.attributes});const i={};for(const a in this)this.hasOwnProperty(a)&&!eo.has(a)&&typeof this[a]!="function"&&typeof a!="symbol"&&(i[a]=this[a]);return i.attributes=this._attributes,i.nodes=t,i.edges=e,Fe(i,"constructor",this.constructor),i}}typeof Symbol<"u"&&(se.prototype[Symbol.for("nodejs.util.inspect.custom")]=se.prototype.inspect);vg.forEach(r=>{["add","merge","update"].forEach(t=>{const e=r.name(t),n=t==="add"?ws:bg;r.generateKey?se.prototype[e]=function(i,a,o){return n(this,e,!0,(r.type||this.type)==="undirected",null,i,a,o,t==="update")}:se.prototype[e]=function(i,a,o,u){return n(this,e,!1,(r.type||this.type)==="undirected",i,a,o,u,t==="update")}})});Np(se);Ip(se);tg(se);cg(se);class _s extends se{constructor(t){const e=pe({type:"directed"},t);if("multi"in e&&e.multi!==!1)throw new G("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(e.type!=="directed")throw new G('DirectedGraph.from: inconsistent "'+e.type+'" type in given options!');super(e)}}class Es extends se{constructor(t){const e=pe({type:"undirected"},t);if("multi"in e&&e.multi!==!1)throw new G("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(e.type!=="undirected")throw new G('UndirectedGraph.from: inconsistent "'+e.type+'" type in given options!');super(e)}}class xs extends se{constructor(t){const e=pe({multi:!0},t);if("multi"in e&&e.multi!==!0)throw new G("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(e)}}class As extends se{constructor(t){const e=pe({type:"directed",multi:!0},t);if("multi"in e&&e.multi!==!0)throw new G("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(e.type!=="directed")throw new G('MultiDirectedGraph.from: inconsistent "'+e.type+'" type in given options!');super(e)}}class Ss extends se{constructor(t){const e=pe({type:"undirected",multi:!0},t);if("multi"in e&&e.multi!==!0)throw new G("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(e.type!=="undirected")throw new G('MultiUndirectedGraph.from: inconsistent "'+e.type+'" type in given options!');super(e)}}function Ot(r){r.from=function(t,e){const n=pe({},t.options,e),i=new r(n);return i.import(t),i}}Ot(se);Ot(_s);Ot(Es);Ot(xs);Ot(As);Ot(Ss);se.Graph=se;se.DirectedGraph=_s;se.UndirectedGraph=Es;se.MultiGraph=xs;se.MultiDirectedGraph=As;se.MultiUndirectedGraph=Ss;se.InvalidArgumentsGraphError=G;se.NotFoundGraphError=O;se.UsageGraphError=H;var rt={},Zn={},Fr={},Cs={},j={},Ts=function(t){return t!==null&&typeof t=="object"&&typeof t.addUndirectedEdgeWithKey=="function"&&typeof t.dropNode=="function"&&typeof t.multi=="boolean"},xe={};Object.defineProperty(xe,"__esModule",{value:!0});xe.multiplyVec2=xe.multiply=xe.translate=xe.rotate=xe.scale=xe.identity=void 0;function wg(){return Float32Array.of(1,0,0,0,1,0,0,0,1)}xe.identity=wg;function _g(r,t,e){return r[0]=t,r[4]=typeof e=="number"?e:t,r}xe.scale=_g;function Eg(r,t){var e=Math.sin(t),n=Math.cos(t);return r[0]=n,r[1]=e,r[3]=-e,r[4]=n,r}xe.rotate=Eg;function xg(r,t,e){return r[6]=t,r[7]=e,r}xe.translate=xg;function Ag(r,t){var e=r[0],n=r[1],i=r[2],a=r[3],o=r[4],u=r[5],h=r[6],d=r[7],p=r[8],f=t[0],w=t[1],A=t[2],E=t[3],y=t[4],T=t[5],L=t[6],k=t[7],N=t[8];return r[0]=f*e+w*a+A*h,r[1]=f*n+w*o+A*d,r[2]=f*i+w*u+A*p,r[3]=E*e+y*a+T*h,r[4]=E*n+y*o+T*d,r[5]=E*i+y*u+T*p,r[6]=L*e+k*a+N*h,r[7]=L*n+k*o+N*d,r[8]=L*i+k*u+N*p,r}xe.multiply=Ag;function Sg(r,t,e){e===void 0&&(e=1);var n=r[0],i=r[1],a=r[3],o=r[4],u=r[6],h=r[7],d=t.x,p=t.y;return{x:d*n+p*a+u*e,y:d*i+p*o+h*e}}xe.multiplyVec2=Sg;var Dr={};Object.defineProperty(Dr,"__esModule",{value:!0});Dr.HTML_COLORS=void 0;Dr.HTML_COLORS={black:"#000000",silver:"#C0C0C0",gray:"#808080",grey:"#808080",white:"#FFFFFF",maroon:"#800000",red:"#FF0000",purple:"#800080",fuchsia:"#FF00FF",green:"#008000",lime:"#00FF00",olive:"#808000",yellow:"#FFFF00",navy:"#000080",blue:"#0000FF",teal:"#008080",aqua:"#00FFFF",darkblue:"#00008B",mediumblue:"#0000CD",darkgreen:"#006400",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",springgreen:"#00FF7F",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",rebeccapurple:"#663399",mediumaquamarine:"#66CDAA",dimgray:"#696969",dimgrey:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",slategrey:"#708090",lightslategray:"#778899",lightslategrey:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370DB",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",palevioletred:"#DB7093",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",lightyellow:"#FFFFE0",ivory:"#FFFFF0"};var ro=$&&$.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(u){o={error:u}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},Cg=$&&$.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(j,"__esModule",{value:!0});j.validateGraph=j.extractPixel=j.getMatrixImpact=j.matrixFromCamera=j.getCorrectionRatio=j.colorToIndex=j.indexToColor=j.floatColor=j.rgbaToFloat=j.parseColor=j.zIndexOrdering=j.createNormalizationFunction=j.graphExtent=j.getPixelRatio=j.createElement=j.cancelFrame=j.requestFrame=j.assignDeep=j.assign=j.isPlainObject=void 0;var Tg=Cg(Ts),ce=xe,An=Dr;function Ns(r){return typeof r=="object"&&r!==null&&r.constructor===Object}j.isPlainObject=Ns;function Ng(r){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];r=r||{};for(var n=0,i=t.length;n<i;n++){var a=t[n];a&&Object.assign(r,a)}return r}j.assign=Ng;function Ls(r){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];r=r||{};for(var n=0,i=t.length;n<i;n++){var a=t[n];if(a)for(var o in a)Ns(a[o])?r[o]=Ls(r[o],a[o]):r[o]=a[o]}return r}j.assignDeep=Ls;j.requestFrame=typeof requestAnimationFrame<"u"?function(r){return requestAnimationFrame(r)}:function(r){return setTimeout(r,0)};j.cancelFrame=typeof cancelAnimationFrame<"u"?function(r){return cancelAnimationFrame(r)}:function(r){return clearTimeout(r)};function Lg(r,t,e){var n=document.createElement(r);if(t)for(var i in t)n.style[i]=t[i];if(e)for(var i in e)n.setAttribute(i,e[i]);return n}j.createElement=Lg;function Rg(){return typeof window.devicePixelRatio<"u"?window.devicePixelRatio:1}j.getPixelRatio=Rg;function Fg(r){if(!r.order)return{x:[0,1],y:[0,1]};var t=1/0,e=-1/0,n=1/0,i=-1/0;return r.forEachNode(function(a,o){var u=o.x,h=o.y;u<t&&(t=u),u>e&&(e=u),h<n&&(n=h),h>i&&(i=h)}),{x:[t,e],y:[n,i]}}j.graphExtent=Fg;function Dg(r){var t=ro(r.x,2),e=t[0],n=t[1],i=ro(r.y,2),a=i[0],o=i[1],u=Math.max(n-e,o-a),h=(n+e)/2,d=(o+a)/2;(u===0||Math.abs(u)===1/0||isNaN(u))&&(u=1),isNaN(h)&&(h=0),isNaN(d)&&(d=0);var p=function(f){return{x:.5+(f.x-h)/u,y:.5+(f.y-d)/u}};return p.applyTo=function(f){f.x=.5+(f.x-h)/u,f.y=.5+(f.y-d)/u},p.inverse=function(f){return{x:h+u*(f.x-.5),y:d+u*(f.y-.5)}},p.ratio=u,p}j.createNormalizationFunction=Dg;function kg(r,t,e){return e.sort(function(n,i){var a=t(n)||0,o=t(i)||0;return a<o?-1:a>o?1:0})}j.zIndexOrdering=kg;var Rs=new Int8Array(4),Sn=new Int32Array(Rs.buffer,0,1),Og=new Float32Array(Rs.buffer,0,1),$g=/^\s*rgba?\s*\(/,Pg=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)(?:\s*,\s*(.*)?)?\)\s*$/;function Fs(r){var t=0,e=0,n=0,i=1;if(r[0]==="#")r.length===4?(t=parseInt(r.charAt(1)+r.charAt(1),16),e=parseInt(r.charAt(2)+r.charAt(2),16),n=parseInt(r.charAt(3)+r.charAt(3),16)):(t=parseInt(r.charAt(1)+r.charAt(2),16),e=parseInt(r.charAt(3)+r.charAt(4),16),n=parseInt(r.charAt(5)+r.charAt(6),16)),r.length===9&&(i=parseInt(r.charAt(7)+r.charAt(8),16)/255);else if($g.test(r)){var a=r.match(Pg);a&&(t=+a[1],e=+a[2],n=+a[3],a[4]&&(i=+a[4]))}return{r:t,g:e,b:n,a:i}}j.parseColor=Fs;var Ct={};for(var ur in An.HTML_COLORS)Ct[ur]=Ds(An.HTML_COLORS[ur]),Ct[An.HTML_COLORS[ur]]=Ct[ur];function Qn(r,t,e,n,i){return Sn[0]=n<<24|e<<16|t<<8|r,i&&(Sn[0]=Sn[0]&4278190079),Og[0]}j.rgbaToFloat=Qn;function Ds(r){if(typeof Ct[r]<"u")return Ct[r];var t=Fs(r),e=t.r,n=t.g,i=t.b,a=t.a;a=a*255|0;var o=Qn(e,n,i,a,!0);return Ct[r]=o,o}j.floatColor=Ds;var Cn={};function Gg(r){if(typeof Cn[r]<"u")return Cn[r];var t=(r&16711680)>>>16,e=(r&65280)>>>8,n=r&255,i=255,a=Qn(t,e,n,i,!0);return Cn[r]=a,a}j.indexToColor=Gg;function Mg(r,t,e,n){return e+(t<<8)+(r<<16)}j.colorToIndex=Mg;function ks(r,t){var e=r.height/r.width,n=t.height/t.width;return e<1&&n>1||e>1&&n<1?1:Math.min(Math.max(n,1/n),Math.max(1/e,e))}j.getCorrectionRatio=ks;function Ig(r,t,e,n,i){var a=r.angle,o=r.ratio,u=r.x,h=r.y,d=t.width,p=t.height,f=(0,ce.identity)(),w=Math.min(d,p)-2*n,A=ks(t,e);return i?((0,ce.multiply)(f,(0,ce.translate)((0,ce.identity)(),u,h)),(0,ce.multiply)(f,(0,ce.scale)((0,ce.identity)(),o)),(0,ce.multiply)(f,(0,ce.rotate)((0,ce.identity)(),a)),(0,ce.multiply)(f,(0,ce.scale)((0,ce.identity)(),d/w/2/A,p/w/2/A))):((0,ce.multiply)(f,(0,ce.scale)((0,ce.identity)(),2*(w/d)*A,2*(w/p)*A)),(0,ce.multiply)(f,(0,ce.rotate)((0,ce.identity)(),-a)),(0,ce.multiply)(f,(0,ce.scale)((0,ce.identity)(),1/o)),(0,ce.multiply)(f,(0,ce.translate)((0,ce.identity)(),-u,-h))),f}j.matrixFromCamera=Ig;function Ug(r,t,e){var n=(0,ce.multiplyVec2)(r,{x:Math.cos(t.angle),y:Math.sin(t.angle)},0),i=n.x,a=n.y;return 1/Math.sqrt(Math.pow(i,2)+Math.pow(a,2))/e.width}j.getMatrixImpact=Ug;function zg(r,t,e,n){var i=n||new Uint8Array(4);return r.readPixels(t,e,1,1,r.RGBA,r.UNSIGNED_BYTE,i),i}j.extractPixel=zg;function Bg(r){if(!(0,Tg.default)(r))throw new Error("Sigma: invalid graph instance.");r.forEachNode(function(t,e){if(!Number.isFinite(e.x)||!Number.isFinite(e.y))throw new Error("Sigma: Coordinates of node ".concat(t," are invalid. A node must have a numeric 'x' and 'y' attribute."))})}j.validateGraph=Bg;var ei={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.cubicInOut=r.cubicOut=r.cubicIn=r.quadraticInOut=r.quadraticOut=r.quadraticIn=r.linear=void 0;var t=function(d){return d};r.linear=t;var e=function(d){return d*d};r.quadraticIn=e;var n=function(d){return d*(2-d)};r.quadraticOut=n;var i=function(d){return(d*=2)<1?.5*d*d:-.5*(--d*(d-2)-1)};r.quadraticInOut=i;var a=function(d){return d*d*d};r.cubicIn=a;var o=function(d){return--d*d*d+1};r.cubicOut=o;var u=function(d){return(d*=2)<1?.5*d*d*d:.5*((d-=2)*d*d+2)};r.cubicInOut=u;var h={linear:r.linear,quadraticIn:r.quadraticIn,quadraticOut:r.quadraticOut,quadraticInOut:r.quadraticInOut,cubicIn:r.cubicIn,cubicOut:r.cubicOut,cubicInOut:r.cubicInOut};r.default=h})(ei);(function(r){var t=$&&$.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(r,"__esModule",{value:!0}),r.animateNodes=r.ANIMATE_DEFAULTS=void 0;var e=j,n=t(ei);r.ANIMATE_DEFAULTS={easing:"quadraticInOut",duration:150};function i(a,o,u,h){var d=Object.assign({},r.ANIMATE_DEFAULTS,u),p=typeof d.easing=="function"?d.easing:n.default[d.easing],f=Date.now(),w={};for(var A in o){var E=o[A];w[A]={};for(var y in E)w[A][y]=a.getNodeAttribute(A,y)}var T=null,L=function(){T=null;var k=(Date.now()-f)/d.duration;if(k>=1){for(var N in o){var z=o[N];for(var X in z)a.setNodeAttribute(N,X,z[X])}typeof h=="function"&&h();return}k=p(k);for(var N in o){var z=o[N],M=w[N];for(var X in z)a.setNodeAttribute(N,X,z[X]*k+M[X]*(1-k))}T=(0,e.requestFrame)(L)};return L(),function(){T&&(0,e.cancelFrame)(T)}}r.animateNodes=i})(Cs);var $t={},jg=$&&$.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty($t,"__esModule",{value:!0});$t.TypedEventEmitter=void 0;var Hg=us,Wg=function(r){jg(t,r);function t(){var e=r.call(this)||this;return e.rawEmitter=e,e}return t}(Hg.EventEmitter);$t.TypedEventEmitter=Wg;var qg=$&&$.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Vg=$&&$.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Fr,"__esModule",{value:!0});var Yg=Cs,Kg=Vg(ei),Tn=j,Xg=$t,cr=1.5,Jg=function(r){qg(t,r);function t(){var e=r.call(this)||this;return e.x=.5,e.y=.5,e.angle=0,e.ratio=1,e.minRatio=null,e.maxRatio=null,e.nextFrame=null,e.previousState=null,e.enabled=!0,e.previousState=e.getState(),e}return t.from=function(e){var n=new t;return n.setState(e)},t.prototype.enable=function(){return this.enabled=!0,this},t.prototype.disable=function(){return this.enabled=!1,this},t.prototype.getState=function(){return{x:this.x,y:this.y,angle:this.angle,ratio:this.ratio}},t.prototype.hasState=function(e){return this.x===e.x&&this.y===e.y&&this.ratio===e.ratio&&this.angle===e.angle},t.prototype.getPreviousState=function(){var e=this.previousState;return e?{x:e.x,y:e.y,angle:e.angle,ratio:e.ratio}:null},t.prototype.getBoundedRatio=function(e){var n=e;return typeof this.minRatio=="number"&&(n=Math.max(n,this.minRatio)),typeof this.maxRatio=="number"&&(n=Math.min(n,this.maxRatio)),n},t.prototype.validateState=function(e){var n={};return typeof e.x=="number"&&(n.x=e.x),typeof e.y=="number"&&(n.y=e.y),typeof e.angle=="number"&&(n.angle=e.angle),typeof e.ratio=="number"&&(n.ratio=this.getBoundedRatio(e.ratio)),n},t.prototype.isAnimated=function(){return!!this.nextFrame},t.prototype.setState=function(e){if(!this.enabled)return this;this.previousState=this.getState();var n=this.validateState(e);return typeof n.x=="number"&&(this.x=n.x),typeof n.y=="number"&&(this.y=n.y),typeof n.angle=="number"&&(this.angle=n.angle),typeof n.ratio=="number"&&(this.ratio=n.ratio),this.hasState(this.previousState)||this.emit("updated",this.getState()),this},t.prototype.updateState=function(e){return this.setState(e(this.getState())),this},t.prototype.animate=function(e,n,i){var a=this;if(this.enabled){var o=Object.assign({},Yg.ANIMATE_DEFAULTS,n),u=this.validateState(e),h=typeof o.easing=="function"?o.easing:Kg.default[o.easing],d=Date.now(),p=this.getState(),f=function(){var w=(Date.now()-d)/o.duration;if(w>=1){a.nextFrame=null,a.setState(u),a.animationCallback&&(a.animationCallback.call(null),a.animationCallback=void 0);return}var A=h(w),E={};typeof u.x=="number"&&(E.x=p.x+(u.x-p.x)*A),typeof u.y=="number"&&(E.y=p.y+(u.y-p.y)*A),typeof u.angle=="number"&&(E.angle=p.angle+(u.angle-p.angle)*A),typeof u.ratio=="number"&&(E.ratio=p.ratio+(u.ratio-p.ratio)*A),a.setState(E),a.nextFrame=(0,Tn.requestFrame)(f)};this.nextFrame?((0,Tn.cancelFrame)(this.nextFrame),this.animationCallback&&this.animationCallback.call(null),this.nextFrame=(0,Tn.requestFrame)(f)):f(),this.animationCallback=i}},t.prototype.animatedZoom=function(e){if(!e)this.animate({ratio:this.ratio/cr});else{if(typeof e=="number")return this.animate({ratio:this.ratio/e});this.animate({ratio:this.ratio/(e.factor||cr)},e)}},t.prototype.animatedUnzoom=function(e){if(!e)this.animate({ratio:this.ratio*cr});else{if(typeof e=="number")return this.animate({ratio:this.ratio*e});this.animate({ratio:this.ratio*(e.factor||cr)},e)}},t.prototype.animatedReset=function(e){this.animate({x:.5,y:.5,ratio:1,angle:0},e)},t.prototype.copy=function(){return t.from(this.getState())},t}(Xg.TypedEventEmitter);Fr.default=Jg;var kr={},Ee={},Zg=$&&$.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Lt=$&&$.__assign||function(){return Lt=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Lt.apply(this,arguments)};Object.defineProperty(Ee,"__esModule",{value:!0});Ee.getWheelDelta=Ee.getTouchCoords=Ee.getTouchesArray=Ee.getWheelCoords=Ee.getMouseCoords=Ee.getPosition=void 0;var Qg=$t;function ti(r,t){var e=t.getBoundingClientRect();return{x:r.clientX-e.left,y:r.clientY-e.top}}Ee.getPosition=ti;function Os(r,t){var e=Lt(Lt({},ti(r,t)),{sigmaDefaultPrevented:!1,preventSigmaDefault:function(){e.sigmaDefaultPrevented=!0},original:r});return e}Ee.getMouseCoords=Os;function ev(r,t){return Lt(Lt({},Os(r,t)),{delta:Ps(r)})}Ee.getWheelCoords=ev;var tv=2;function $s(r){for(var t=[],e=0,n=Math.min(r.length,tv);e<n;e++)t.push(r[e]);return t}Ee.getTouchesArray=$s;function rv(r,t){return{touches:$s(r.touches).map(function(e){return ti(e,t)}),original:r}}Ee.getTouchCoords=rv;function Ps(r){if(typeof r.deltaY<"u")return r.deltaY*-3/360;if(typeof r.detail<"u")return r.detail/-9;throw new Error("Captor: could not extract delta from event.")}Ee.getWheelDelta=Ps;var nv=function(r){Zg(t,r);function t(e,n){var i=r.call(this)||this;return i.container=e,i.renderer=n,i}return t}(Qg.TypedEventEmitter);Ee.default=nv;var iv=$&&$.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),av=$&&$.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e);var i=Object.getOwnPropertyDescriptor(t,e);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(r,n,i)}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),ov=$&&$.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),sv=$&&$.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&av(t,r,e);return ov(t,r),t};Object.defineProperty(kr,"__esModule",{value:!0});var Ne=sv(Ee),uv=100,cv=3,lv=200,no=3,io=250,ao=1.7,dv=300,hv=2.2,fv=200,pv=function(r){iv(t,r);function t(e,n){var i=r.call(this,e,n)||this;return i.enabled=!0,i.draggedEvents=0,i.downStartTime=null,i.lastMouseX=null,i.lastMouseY=null,i.isMouseDown=!1,i.isMoving=!1,i.movingTimeout=null,i.startCameraState=null,i.clicks=0,i.doubleClickTimeout=null,i.currentWheelDirection=0,i.handleClick=i.handleClick.bind(i),i.handleRightClick=i.handleRightClick.bind(i),i.handleDown=i.handleDown.bind(i),i.handleUp=i.handleUp.bind(i),i.handleMove=i.handleMove.bind(i),i.handleWheel=i.handleWheel.bind(i),i.handleOut=i.handleOut.bind(i),e.addEventListener("click",i.handleClick,!1),e.addEventListener("contextmenu",i.handleRightClick,!1),e.addEventListener("mousedown",i.handleDown,!1),e.addEventListener("wheel",i.handleWheel,!1),e.addEventListener("mouseout",i.handleOut,!1),document.addEventListener("mousemove",i.handleMove,!1),document.addEventListener("mouseup",i.handleUp,!1),i}return t.prototype.kill=function(){var e=this.container;e.removeEventListener("click",this.handleClick),e.removeEventListener("contextmenu",this.handleRightClick),e.removeEventListener("mousedown",this.handleDown),e.removeEventListener("wheel",this.handleWheel),e.removeEventListener("mouseout",this.handleOut),document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("mouseup",this.handleUp)},t.prototype.handleClick=function(e){var n=this;if(this.enabled){if(this.clicks++,this.clicks===2)return this.clicks=0,typeof this.doubleClickTimeout=="number"&&(clearTimeout(this.doubleClickTimeout),this.doubleClickTimeout=null),this.handleDoubleClick(e);setTimeout(function(){n.clicks=0,n.doubleClickTimeout=null},dv),this.draggedEvents<cv&&this.emit("click",(0,Ne.getMouseCoords)(e,this.container))}},t.prototype.handleRightClick=function(e){this.enabled&&this.emit("rightClick",(0,Ne.getMouseCoords)(e,this.container))},t.prototype.handleDoubleClick=function(e){if(this.enabled){e.preventDefault(),e.stopPropagation();var n=(0,Ne.getMouseCoords)(e,this.container);if(this.emit("doubleClick",n),!n.sigmaDefaultPrevented){var i=this.renderer.getCamera(),a=i.getBoundedRatio(i.getState().ratio/hv);i.animate(this.renderer.getViewportZoomedState((0,Ne.getPosition)(e,this.container),a),{easing:"quadraticInOut",duration:fv})}}},t.prototype.handleDown=function(e){if(this.enabled){if(e.button===0){this.startCameraState=this.renderer.getCamera().getState();var n=(0,Ne.getPosition)(e,this.container),i=n.x,a=n.y;this.lastMouseX=i,this.lastMouseY=a,this.draggedEvents=0,this.downStartTime=Date.now(),this.isMouseDown=!0}this.emit("mousedown",(0,Ne.getMouseCoords)(e,this.container))}},t.prototype.handleUp=function(e){var n=this;if(!(!this.enabled||!this.isMouseDown)){var i=this.renderer.getCamera();this.isMouseDown=!1,typeof this.movingTimeout=="number"&&(clearTimeout(this.movingTimeout),this.movingTimeout=null);var a=(0,Ne.getPosition)(e,this.container),o=a.x,u=a.y,h=i.getState(),d=i.getPreviousState()||{x:0,y:0};this.isMoving?i.animate({x:h.x+no*(h.x-d.x),y:h.y+no*(h.y-d.y)},{duration:lv,easing:"quadraticOut"}):(this.lastMouseX!==o||this.lastMouseY!==u)&&i.setState({x:h.x,y:h.y}),this.isMoving=!1,setTimeout(function(){var p=n.draggedEvents>0;n.draggedEvents=0,p&&n.renderer.refresh()},0),this.emit("mouseup",(0,Ne.getMouseCoords)(e,this.container))}},t.prototype.handleMove=function(e){var n=this;if(this.enabled){var i=(0,Ne.getMouseCoords)(e,this.container);if(this.emit("mousemovebody",i),e.target===this.container&&this.emit("mousemove",i),!i.sigmaDefaultPrevented&&this.isMouseDown){this.isMoving=!0,this.draggedEvents++,typeof this.movingTimeout=="number"&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){n.movingTimeout=null,n.isMoving=!1},uv);var a=this.renderer.getCamera(),o=(0,Ne.getPosition)(e,this.container),u=o.x,h=o.y,d=this.renderer.viewportToFramedGraph({x:this.lastMouseX,y:this.lastMouseY}),p=this.renderer.viewportToFramedGraph({x:u,y:h}),f=d.x-p.x,w=d.y-p.y,A=a.getState(),E=A.x+f,y=A.y+w;a.setState({x:E,y}),this.lastMouseX=u,this.lastMouseY=h,e.preventDefault(),e.stopPropagation()}}},t.prototype.handleWheel=function(e){var n=this;if(this.enabled){e.preventDefault(),e.stopPropagation();var i=(0,Ne.getWheelDelta)(e);if(i){var a=(0,Ne.getWheelCoords)(e,this.container);if(this.emit("wheel",a),!a.sigmaDefaultPrevented){var o=i>0?1/ao:ao,u=this.renderer.getCamera(),h=u.getBoundedRatio(u.getState().ratio*o),d=i>0?1:-1,p=Date.now();this.currentWheelDirection===d&&this.lastWheelTriggerTime&&p-this.lastWheelTriggerTime<io/5||(u.animate(this.renderer.getViewportZoomedState((0,Ne.getPosition)(e,this.container),h),{easing:"quadraticOut",duration:io},function(){n.currentWheelDirection=0}),this.currentWheelDirection=d,this.lastWheelTriggerTime=p)}}}},t.prototype.handleOut=function(){},t}(Ne.default);kr.default=pv;var Rt={};Object.defineProperty(Rt,"__esModule",{value:!0});Rt.edgeLabelsToDisplayFromNodes=Rt.LabelGrid=void 0;var oo=function(){function r(t,e){this.key=t,this.size=e}return r.compare=function(t,e){return t.size>e.size?-1:t.size<e.size||t.key>e.key?1:-1},r}(),gv=function(){function r(){this.width=0,this.height=0,this.cellSize=0,this.columns=0,this.rows=0,this.cells={}}return r.prototype.resizeAndClear=function(t,e){this.width=t.width,this.height=t.height,this.cellSize=e,this.columns=Math.ceil(t.width/e),this.rows=Math.ceil(t.height/e),this.cells={}},r.prototype.getIndex=function(t){var e=Math.floor(t.x/this.cellSize),n=Math.floor(t.y/this.cellSize);return n*this.columns+e},r.prototype.add=function(t,e,n){var i=new oo(t,e),a=this.getIndex(n),o=this.cells[a];o||(o=[],this.cells[a]=o),o.push(i)},r.prototype.organize=function(){for(var t in this.cells){var e=this.cells[t];e.sort(oo.compare)}},r.prototype.getLabelsToDisplay=function(t,e){var n=this.cellSize*this.cellSize,i=n/t/t,a=i*e/n,o=Math.ceil(a),u=[];for(var h in this.cells)for(var d=this.cells[h],p=0;p<Math.min(o,d.length);p++)u.push(d[p].key);return u},r}();Rt.LabelGrid=gv;function vv(r){var t=r.graph,e=r.hoveredNode,n=r.highlightedNodes,i=r.displayedNodeLabels,a=[];return t.forEachEdge(function(o,u,h,d){(h===e||d===e||n.has(h)||n.has(d)||i.has(h)&&i.has(d))&&a.push(o)}),a}Rt.edgeLabelsToDisplayFromNodes=vv;var Gs={},ri={},nt={},lt={},it={};Object.defineProperty(it,"__esModule",{value:!0});it.loadProgram=it.loadFragmentShader=it.loadVertexShader=void 0;function Ms(r,t,e){var n=r==="VERTEX"?t.VERTEX_SHADER:t.FRAGMENT_SHADER,i=t.createShader(n);if(i===null)throw new Error("loadShader: error while creating the shader");t.shaderSource(i,e),t.compileShader(i);var a=t.getShaderParameter(i,t.COMPILE_STATUS);if(!a){var o=t.getShaderInfoLog(i);throw t.deleteShader(i),new Error(`loadShader: error while compiling the shader:
`.concat(o,`
`).concat(e))}return i}function mv(r,t){return Ms("VERTEX",r,t)}it.loadVertexShader=mv;function yv(r,t){return Ms("FRAGMENT",r,t)}it.loadFragmentShader=yv;function bv(r,t){var e=r.createProgram();if(e===null)throw new Error("loadProgram: error while creating the program.");var n,i;for(n=0,i=t.length;n<i;n++)r.attachShader(e,t[n]);r.linkProgram(e);var a=r.getProgramParameter(e,r.LINK_STATUS);if(!a)throw r.deleteProgram(e),new Error("loadProgram: error while linking the program.");return e}it.loadProgram=bv;var _r=$&&$.__assign||function(){return _r=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},_r.apply(this,arguments)},Ue;Object.defineProperty(lt,"__esModule",{value:!0});lt.Program=lt.AbstractProgram=void 0;var Nn=it,so=`#define PICKING_MODE
`,wv=(Ue={},Ue[WebGL2RenderingContext.BOOL]=1,Ue[WebGL2RenderingContext.BYTE]=1,Ue[WebGL2RenderingContext.UNSIGNED_BYTE]=1,Ue[WebGL2RenderingContext.SHORT]=2,Ue[WebGL2RenderingContext.UNSIGNED_SHORT]=2,Ue[WebGL2RenderingContext.INT]=4,Ue[WebGL2RenderingContext.UNSIGNED_INT]=4,Ue[WebGL2RenderingContext.FLOAT]=4,Ue);function _v(r){return r.normalized?1:r.size}function Ln(r){var t=0;return r.forEach(function(e){return t+=_v(e)}),t}var Ev=function(){function r(t,e,n){}return r}();lt.AbstractProgram=Ev;var xv=function(){function r(t,e,n){this.array=new Float32Array,this.constantArray=new Float32Array,this.capacity=0,this.verticesCount=0;var i=this.getDefinition();if(this.VERTICES=i.VERTICES,this.VERTEX_SHADER_SOURCE=i.VERTEX_SHADER_SOURCE,this.FRAGMENT_SHADER_SOURCE=i.FRAGMENT_SHADER_SOURCE,this.UNIFORMS=i.UNIFORMS,this.ATTRIBUTES=i.ATTRIBUTES,this.METHOD=i.METHOD,this.CONSTANT_ATTRIBUTES="CONSTANT_ATTRIBUTES"in i?i.CONSTANT_ATTRIBUTES:[],this.CONSTANT_DATA="CONSTANT_DATA"in i?i.CONSTANT_DATA:[],this.isInstanced="CONSTANT_ATTRIBUTES"in i,this.ATTRIBUTES_ITEMS_COUNT=Ln(this.ATTRIBUTES),this.STRIDE=this.VERTICES*this.ATTRIBUTES_ITEMS_COUNT,this.renderer=n,this.normalProgram=this.getProgramInfo("normal",t,i.VERTEX_SHADER_SOURCE,i.FRAGMENT_SHADER_SOURCE,null),this.pickProgram=e?this.getProgramInfo("pick",t,so+i.VERTEX_SHADER_SOURCE,so+i.FRAGMENT_SHADER_SOURCE,e):null,this.isInstanced){var a=Ln(this.CONSTANT_ATTRIBUTES);if(this.CONSTANT_DATA.length!==this.VERTICES)throw new Error("Program: error while getting constant data (expected ".concat(this.VERTICES," items, received ").concat(this.CONSTANT_DATA.length," instead)"));this.constantArray=new Float32Array(this.CONSTANT_DATA.length*a);for(var o=0;o<this.CONSTANT_DATA.length;o++){var u=this.CONSTANT_DATA[o];if(u.length!==a)throw new Error("Program: error while getting constant data (one vector has ".concat(u.length," items instead of ").concat(a,")"));for(var h=0;h<u.length;h++)this.constantArray[o*a+h]=u[h]}this.STRIDE=this.ATTRIBUTES_ITEMS_COUNT}}return r.prototype.getProgramInfo=function(t,e,n,i,a){var o=this.getDefinition(),u=e.createBuffer();if(u===null)throw new Error("Program: error while creating the WebGL buffer.");var h=(0,Nn.loadVertexShader)(e,n),d=(0,Nn.loadFragmentShader)(e,i),p=(0,Nn.loadProgram)(e,[h,d]),f={};o.UNIFORMS.forEach(function(E){var y=e.getUniformLocation(p,E);y&&(f[E]=y)});var w={};o.ATTRIBUTES.forEach(function(E){w[E.name]=e.getAttribLocation(p,E.name)});var A;if("CONSTANT_ATTRIBUTES"in o&&(o.CONSTANT_ATTRIBUTES.forEach(function(E){w[E.name]=e.getAttribLocation(p,E.name)}),A=e.createBuffer(),A===null))throw new Error("Program: error while creating the WebGL constant buffer.");return{name:t,program:p,gl:e,frameBuffer:a,buffer:u,constantBuffer:A||{},uniformLocations:f,attributeLocations:w,isPicking:t==="pick"}},r.prototype.bindProgram=function(t){var e=this,n=0,i=t.gl,a=t.buffer;this.isInstanced?(i.bindBuffer(i.ARRAY_BUFFER,t.constantBuffer),n=0,this.CONSTANT_ATTRIBUTES.forEach(function(o){return n+=e.bindAttribute(o,t,n,!1)}),i.bufferData(i.ARRAY_BUFFER,this.constantArray,i.STATIC_DRAW),i.bindBuffer(i.ARRAY_BUFFER,t.buffer),n=0,this.ATTRIBUTES.forEach(function(o){return n+=e.bindAttribute(o,t,n,!0)}),i.bufferData(i.ARRAY_BUFFER,this.array,i.DYNAMIC_DRAW)):(i.bindBuffer(i.ARRAY_BUFFER,a),n=0,this.ATTRIBUTES.forEach(function(o){return n+=e.bindAttribute(o,t,n)}),i.bufferData(i.ARRAY_BUFFER,this.array,i.DYNAMIC_DRAW)),i.bindBuffer(i.ARRAY_BUFFER,null)},r.prototype.unbindProgram=function(t){var e=this;this.isInstanced?(this.CONSTANT_ATTRIBUTES.forEach(function(n){return e.unbindAttribute(n,t,!1)}),this.ATTRIBUTES.forEach(function(n){return e.unbindAttribute(n,t,!0)})):this.ATTRIBUTES.forEach(function(n){return e.unbindAttribute(n,t)})},r.prototype.bindAttribute=function(t,e,n,i){var a=wv[t.type];if(typeof a!="number")throw new Error('Program.bind: yet unsupported attribute type "'.concat(t.type,'"'));var o=e.attributeLocations[t.name],u=e.gl;if(o!==-1){u.enableVertexAttribArray(o);var h=this.isInstanced?(i?this.ATTRIBUTES_ITEMS_COUNT:Ln(this.CONSTANT_ATTRIBUTES))*Float32Array.BYTES_PER_ELEMENT:this.ATTRIBUTES_ITEMS_COUNT*Float32Array.BYTES_PER_ELEMENT;if(u.vertexAttribPointer(o,t.size,t.type,t.normalized||!1,h,n),this.isInstanced&&i)if(u instanceof WebGL2RenderingContext)u.vertexAttribDivisor(o,1);else{var d=u.getExtension("ANGLE_instanced_arrays");d&&d.vertexAttribDivisorANGLE(o,1)}}return t.size*a},r.prototype.unbindAttribute=function(t,e,n){var i=e.attributeLocations[t.name],a=e.gl;if(i!==-1&&(a.disableVertexAttribArray(i),this.isInstanced&&n))if(a instanceof WebGL2RenderingContext)a.vertexAttribDivisor(i,0);else{var o=a.getExtension("ANGLE_instanced_arrays");o&&o.vertexAttribDivisorANGLE(i,0)}},r.prototype.reallocate=function(t){t!==this.capacity&&(this.capacity=t,this.verticesCount=this.VERTICES*t,this.array=new Float32Array(this.isInstanced?this.capacity*this.ATTRIBUTES_ITEMS_COUNT:this.verticesCount*this.ATTRIBUTES_ITEMS_COUNT))},r.prototype.hasNothingToRender=function(){return this.verticesCount===0},r.prototype.renderProgram=function(t,e){var n=e.gl,i=e.program;n.enable(n.BLEND),n.useProgram(i),this.setUniforms(t,e),this.drawWebGL(this.METHOD,e)},r.prototype.render=function(t){this.hasNothingToRender()||(this.pickProgram&&(this.pickProgram.gl.viewport(0,0,t.width*t.pixelRatio/t.downSizingRatio,t.height*t.pixelRatio/t.downSizingRatio),this.bindProgram(this.pickProgram),this.renderProgram(_r(_r({},t),{pixelRatio:t.pixelRatio/t.downSizingRatio}),this.pickProgram),this.unbindProgram(this.pickProgram)),this.normalProgram.gl.viewport(0,0,t.width*t.pixelRatio,t.height*t.pixelRatio),this.bindProgram(this.normalProgram),this.renderProgram(t,this.normalProgram),this.unbindProgram(this.normalProgram))},r.prototype.drawWebGL=function(t,e){var n=e.gl,i=e.frameBuffer;if(n.bindFramebuffer(n.FRAMEBUFFER,i),!this.isInstanced)n.drawArrays(t,0,this.verticesCount);else if(n instanceof WebGL2RenderingContext)n.drawArraysInstanced(t,0,this.VERTICES,this.capacity);else{var a=n.getExtension("ANGLE_instanced_arrays");a&&a.drawArraysInstancedANGLE(t,0,this.VERTICES,this.capacity)}},r}();lt.Program=xv;var Is=$&&$.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(nt,"__esModule",{value:!0});nt.createNodeCompoundProgram=nt.NodeProgram=nt.AbstractNodeProgram=void 0;var Us=lt,Av=j,Sv=function(r){Is(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t}(Us.AbstractProgram);nt.AbstractNodeProgram=Sv;var Cv=function(r){Is(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.process=function(e,n,i){var a=n*this.STRIDE;if(i.hidden){for(var o=a+this.STRIDE;a<o;a++)this.array[a]=0;return}return this.processVisibleItem((0,Av.indexToColor)(e),a,i)},t.drawLabel=void 0,t.drawHover=void 0,t}(Us.Program);nt.NodeProgram=Cv;function Tv(r,t,e){var n;return n=function(){function i(a,o,u){this.programs=r.map(function(h){return new h(a,o,u)})}return i.prototype.reallocate=function(a){this.programs.forEach(function(o){return o.reallocate(a)})},i.prototype.process=function(a,o,u){this.programs.forEach(function(h){return h.process(a,o,u)})},i.prototype.render=function(a){this.programs.forEach(function(o){return o.render(a)})},i}(),n.drawLabel=t,n.drawHover=e,n}nt.createNodeCompoundProgram=Tv;var zs={exports:{}};(()=>{var r={d:(n,i)=>{for(var a in i)r.o(i,a)&&!r.o(n,a)&&Object.defineProperty(n,a,{enumerable:!0,get:i[a]})},o:(n,i)=>Object.prototype.hasOwnProperty.call(n,i),r:n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})}},t={};r.r(t),r.d(t,{default:()=>e});const e=`attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_position;
attribute float a_size;

uniform float u_sizeRatio;
uniform float u_pixelRatio;
uniform mat3 u_matrix;

varying vec4 v_color;
varying float v_border;

const float bias = 255.0 / 254.0;

void main() {
  gl_Position = vec4(
    (u_matrix * vec3(a_position, 1)).xy,
    0,
    1
  );

  // Multiply the point size twice:
  //  - x SCALING_RATIO to correct the canvas scaling
  //  - x 2 to correct the formulae
  gl_PointSize = a_size / u_sizeRatio * u_pixelRatio * 2.0;

  v_border = (0.5 / a_size) * u_sizeRatio;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`;zs.exports=t})();var Nv=zs.exports,Bs={exports:{}};(()=>{var r={d:(n,i)=>{for(var a in i)r.o(i,a)&&!r.o(n,a)&&Object.defineProperty(n,a,{enumerable:!0,get:i[a]})},o:(n,i)=>Object.prototype.hasOwnProperty.call(n,i),r:n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})}},t={};r.r(t),r.d(t,{default:()=>e});const e=`precision mediump float;

varying vec4 v_color;
varying float v_border;

const float radius = 0.5;
const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  vec2 m = gl_PointCoord - vec2(0.5, 0.5);
  float dist = radius - length(m);

  // No antialiasing for picking mode:
  #ifdef PICKING_MODE
  if (dist > v_border)
    gl_FragColor = v_color;
  else
    gl_FragColor = transparent;

  #else
  float t = 0.0;
  if (dist > v_border)
    t = 1.0;
  else if (dist > 0.0)
    t = dist / v_border;

  gl_FragColor = mix(transparent, v_color, t);
  #endif
}
`;Bs.exports=t})();var Lv=Bs.exports,Rv=$&&$.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),js=$&&$.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ri,"__esModule",{value:!0});var Fv=j,Dv=nt,kv=js(Nv),Ov=js(Lv),uo=WebGLRenderingContext.UNSIGNED_BYTE,co=WebGLRenderingContext.FLOAT,$v=["u_sizeRatio","u_pixelRatio","u_matrix"],Pv=function(r){Rv(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefinition=function(){return{VERTICES:1,VERTEX_SHADER_SOURCE:kv.default,FRAGMENT_SHADER_SOURCE:Ov.default,METHOD:WebGLRenderingContext.POINTS,UNIFORMS:$v,ATTRIBUTES:[{name:"a_position",size:2,type:co},{name:"a_size",size:1,type:co},{name:"a_color",size:4,type:uo,normalized:!0},{name:"a_id",size:4,type:uo,normalized:!0}]}},t.prototype.processVisibleItem=function(e,n,i){var a=this.array;a[n++]=i.x,a[n++]=i.y,a[n++]=i.size,a[n++]=(0,Fv.floatColor)(i.color),a[n++]=e},t.prototype.setUniforms=function(e,n){var i=e.sizeRatio,a=e.pixelRatio,o=e.matrix,u=n.gl,h=n.uniformLocations,d=h.u_sizeRatio,p=h.u_pixelRatio,f=h.u_matrix;u.uniform1f(p,a),u.uniform1f(d,i),u.uniformMatrix3fv(f,!1,o)},t}(Dv.NodeProgram);ri.default=Pv;var Or={},Be={},Hs=$&&$.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Be,"__esModule",{value:!0});Be.createEdgeCompoundProgram=Be.EdgeProgram=Be.AbstractEdgeProgram=void 0;var Ws=lt,Gv=j,Mv=function(r){Hs(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t}(Ws.AbstractProgram);Be.AbstractEdgeProgram=Mv;var Iv=function(r){Hs(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.process=function(e,n,i,a,o){var u=n*this.STRIDE;if(o.hidden||i.hidden||a.hidden){for(var h=u+this.STRIDE;u<h;u++)this.array[u]=0;return}return this.processVisibleItem((0,Gv.indexToColor)(e),u,i,a,o)},t.drawLabel=void 0,t}(Ws.Program);Be.EdgeProgram=Iv;function Uv(r,t){var e;return e=function(){function n(i,a,o){this.programs=r.map(function(u){return new u(i,a,o)})}return n.prototype.reallocate=function(i){this.programs.forEach(function(a){return a.reallocate(i)})},n.prototype.process=function(i,a,o,u,h){this.programs.forEach(function(d){return d.process(i,a,o,u,h)})},n.prototype.render=function(i){this.programs.forEach(function(a){return a.render(i)})},n}(),e.drawLabel=t,e}Be.createEdgeCompoundProgram=Uv;var qs={exports:{}};(()=>{var r={d:(n,i)=>{for(var a in i)r.o(i,a)&&!r.o(n,a)&&Object.defineProperty(n,a,{enumerable:!0,get:i[a]})},o:(n,i)=>Object.prototype.hasOwnProperty.call(n,i),r:n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})}},t={};r.r(t),r.d(t,{default:()=>e});const e=`attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_normal;
attribute float a_normalCoef;
attribute vec2 a_positionStart;
attribute vec2 a_positionEnd;
attribute float a_positionCoef;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_zoomRatio;
uniform float u_correctionRatio;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;

const float minThickness = 1.7;
const float bias = 255.0 / 254.0;

void main() {
  vec2 normal = a_normal * a_normalCoef;
  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;

  float normalLength = length(normal);
  vec2 unitNormal = normal / normalLength;

  // We require edges to be at least \`minThickness\` pixels thick *on screen*
  // (so we need to compensate the size ratio):
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);

  // Then, we need to retrieve the normalized thickness of the edge in the WebGL
  // referential (in a ([0, 1], [0, 1]) space), using our "magic" correction
  // ratio:
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;

  // Here is the proper position of the vertex
  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness, 1)).xy, 0, 1);

  // For the fragment shader though, we need a thickness that takes the "magic"
  // correction ratio into account (as in webGLThickness), but so that the
  // antialiasing effect does not depend on the zoom level. So here's yet
  // another thickness version:
  v_thickness = webGLThickness / u_zoomRatio;

  v_normal = unitNormal;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`;qs.exports=t})();var zv=qs.exports,Vs={exports:{}};(()=>{var r={d:(n,i)=>{for(var a in i)r.o(i,a)&&!r.o(n,a)&&Object.defineProperty(n,a,{enumerable:!0,get:i[a]})},o:(n,i)=>Object.prototype.hasOwnProperty.call(n,i),r:n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})}},t={};r.r(t),r.d(t,{default:()=>e});const e=`precision mediump float;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;

const float feather = 0.001;
const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  // We only handle antialiasing for normal mode:
  #ifdef PICKING_MODE
  gl_FragColor = v_color;
  #else
  float dist = length(v_normal) * v_thickness;

  float t = smoothstep(
    v_thickness - feather,
    v_thickness,
    dist
  );

  gl_FragColor = mix(v_color, transparent, t);
  #endif
}
`;Vs.exports=t})();var Bv=Vs.exports,jv=$&&$.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Ys=$&&$.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Or,"__esModule",{value:!0});var Hv=j,Wv=Be,qv=Ys(zv),Vv=Ys(Bv),lo=WebGLRenderingContext.UNSIGNED_BYTE,Wt=WebGLRenderingContext.FLOAT,Yv=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio"],Kv=function(r){jv(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefinition=function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:qv.default,FRAGMENT_SHADER_SOURCE:Vv.default,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:Yv,ATTRIBUTES:[{name:"a_positionStart",size:2,type:Wt},{name:"a_positionEnd",size:2,type:Wt},{name:"a_normal",size:2,type:Wt},{name:"a_color",size:4,type:lo,normalized:!0},{name:"a_id",size:4,type:lo,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:Wt},{name:"a_normalCoef",size:1,type:Wt}],CONSTANT_DATA:[[0,1],[0,-1],[1,1],[1,1],[0,-1],[1,-1]]}},t.prototype.processVisibleItem=function(e,n,i,a,o){var u=o.size||1,h=i.x,d=i.y,p=a.x,f=a.y,w=(0,Hv.floatColor)(o.color),A=p-h,E=f-d,y=A*A+E*E,T=0,L=0;y&&(y=1/Math.sqrt(y),T=-E*y*u,L=A*y*u);var k=this.array;k[n++]=h,k[n++]=d,k[n++]=p,k[n++]=f,k[n++]=T,k[n++]=L,k[n++]=w,k[n++]=e},t.prototype.setUniforms=function(e,n){var i=n.gl,a=n.uniformLocations,o=a.u_matrix,u=a.u_zoomRatio,h=a.u_correctionRatio,d=a.u_sizeRatio;i.uniformMatrix3fv(o,!1,e.matrix),i.uniform1f(u,e.zoomRatio),i.uniform1f(d,e.sizeRatio),i.uniform1f(h,e.correctionRatio)},t}(Wv.EdgeProgram);Or.default=Kv;var ni={},ii={},Ks={exports:{}};(()=>{var r={d:(n,i)=>{for(var a in i)r.o(i,a)&&!r.o(n,a)&&Object.defineProperty(n,a,{enumerable:!0,get:i[a]})},o:(n,i)=>Object.prototype.hasOwnProperty.call(n,i),r:n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})}},t={};r.r(t),r.d(t,{default:()=>e});const e=`attribute vec2 a_position;
attribute vec2 a_normal;
attribute float a_radius;
attribute vec3 a_barycentric;

#ifdef PICKING_MODE
attribute vec4 a_id;
#else
attribute vec4 a_color;
#endif

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_correctionRatio;

varying vec4 v_color;

const float minThickness = 1.7;
const float bias = 255.0 / 254.0;
const float arrowHeadWidthLengthRatio = 0.66;
const float arrowHeadLengthThicknessRatio = 2.5;

void main() {
  float normalLength = length(a_normal);
  vec2 unitNormal = a_normal / normalLength;

  // These first computations are taken from edge.vert.glsl and
  // edge.clamped.vert.glsl. Please read it to get better comments on what's
  // happening:
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;
  float webGLNodeRadius = a_radius * 2.0 * u_correctionRatio / u_sizeRatio;
  float webGLArrowHeadLength = webGLThickness * 2.0 * arrowHeadLengthThicknessRatio;
  float webGLArrowHeadHalfWidth = webGLArrowHeadLength * arrowHeadWidthLengthRatio / 2.0;

  float da = a_barycentric.x;
  float db = a_barycentric.y;
  float dc = a_barycentric.z;

  vec2 delta = vec2(
      da * (webGLNodeRadius * unitNormal.y)
    + db * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y + webGLArrowHeadHalfWidth * unitNormal.x)
    + dc * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y - webGLArrowHeadHalfWidth * unitNormal.x),

      da * (-webGLNodeRadius * unitNormal.x)
    + db * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x + webGLArrowHeadHalfWidth * unitNormal.y)
    + dc * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x - webGLArrowHeadHalfWidth * unitNormal.y)
  );

  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;

  gl_Position = vec4(position, 0, 1);

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`;Ks.exports=t})();var Xv=Ks.exports,Xs={exports:{}};(()=>{var r={d:(n,i)=>{for(var a in i)r.o(i,a)&&!r.o(n,a)&&Object.defineProperty(n,a,{enumerable:!0,get:i[a]})},o:(n,i)=>Object.prototype.hasOwnProperty.call(n,i),r:n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})}},t={};r.r(t),r.d(t,{default:()=>e});const e=`precision mediump float;

varying vec4 v_color;

void main(void) {
  gl_FragColor = v_color;
}
`;Xs.exports=t})();var Jv=Xs.exports,Zv=$&&$.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Js=$&&$.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ii,"__esModule",{value:!0});var Qv=j,em=Be,tm=Js(Xv),rm=Js(Jv),ho=WebGLRenderingContext.UNSIGNED_BYTE,lr=WebGLRenderingContext.FLOAT,nm=["u_matrix","u_sizeRatio","u_correctionRatio"],im=function(r){Zv(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefinition=function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:tm.default,FRAGMENT_SHADER_SOURCE:rm.default,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:nm,ATTRIBUTES:[{name:"a_position",size:2,type:lr},{name:"a_normal",size:2,type:lr},{name:"a_radius",size:1,type:lr},{name:"a_color",size:4,type:ho,normalized:!0},{name:"a_id",size:4,type:ho,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_barycentric",size:3,type:lr}],CONSTANT_DATA:[[1,0,0],[0,1,0],[0,0,1]]}},t.prototype.processVisibleItem=function(e,n,i,a,o){var u=o.size||1,h=a.size||1,d=i.x,p=i.y,f=a.x,w=a.y,A=(0,Qv.floatColor)(o.color),E=f-d,y=w-p,T=E*E+y*y,L=0,k=0;T&&(T=1/Math.sqrt(T),L=-y*T*u,k=E*T*u);var N=this.array;N[n++]=f,N[n++]=w,N[n++]=-L,N[n++]=-k,N[n++]=h,N[n++]=A,N[n++]=e},t.prototype.setUniforms=function(e,n){var i=n.gl,a=n.uniformLocations,o=a.u_matrix,u=a.u_sizeRatio,h=a.u_correctionRatio;i.uniformMatrix3fv(o,!1,e.matrix),i.uniform1f(u,e.sizeRatio),i.uniform1f(h,e.correctionRatio)},t}(em.EdgeProgram);ii.default=im;var ai={},Zs={exports:{}};(()=>{var r={d:(n,i)=>{for(var a in i)r.o(i,a)&&!r.o(n,a)&&Object.defineProperty(n,a,{enumerable:!0,get:i[a]})},o:(n,i)=>Object.prototype.hasOwnProperty.call(n,i),r:n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})}},t={};r.r(t),r.d(t,{default:()=>e});const e=`attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_normal;
attribute float a_normalCoef;
attribute vec2 a_positionStart;
attribute vec2 a_positionEnd;
attribute float a_positionCoef;
attribute float a_radius;
attribute float a_radiusCoef;

uniform mat3 u_matrix;
uniform float u_zoomRatio;
uniform float u_sizeRatio;
uniform float u_correctionRatio;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;

const float minThickness = 1.7;
const float bias = 255.0 / 254.0;
const float arrowHeadLengthThicknessRatio = 2.5;

void main() {
  float radius = a_radius * a_radiusCoef;
  vec2 normal = a_normal * a_normalCoef;
  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;

  float normalLength = length(normal);
  vec2 unitNormal = normal / normalLength;

  // These first computations are taken from edge.vert.glsl. Please read it to
  // get better comments on what's happening:
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;

  // Here, we move the point to leave space for the arrow head:
  float direction = sign(radius);
  float webGLNodeRadius = direction * radius * 2.0 * u_correctionRatio / u_sizeRatio;
  float webGLArrowHeadLength = webGLThickness * 2.0 * arrowHeadLengthThicknessRatio;

  vec2 compensationVector = vec2(-direction * unitNormal.y, direction * unitNormal.x) * (webGLNodeRadius + webGLArrowHeadLength);

  // Here is the proper position of the vertex
  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness + compensationVector, 1)).xy, 0, 1);

  v_thickness = webGLThickness / u_zoomRatio;

  v_normal = unitNormal;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`;Zs.exports=t})();var am=Zs.exports,om=$&&$.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Er=$&&$.__assign||function(){return Er=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Er.apply(this,arguments)},Qs=$&&$.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ai,"__esModule",{value:!0});var sm=Qs(Or),um=Qs(am),cm=j,fo=WebGLRenderingContext.UNSIGNED_BYTE,ct=WebGLRenderingContext.FLOAT,lm=function(r){om(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefinition=function(){return Er(Er({},r.prototype.getDefinition.call(this)),{VERTEX_SHADER_SOURCE:um.default,ATTRIBUTES:[{name:"a_positionStart",size:2,type:ct},{name:"a_positionEnd",size:2,type:ct},{name:"a_normal",size:2,type:ct},{name:"a_color",size:4,type:fo,normalized:!0},{name:"a_id",size:4,type:fo,normalized:!0},{name:"a_radius",size:1,type:ct}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:ct},{name:"a_normalCoef",size:1,type:ct},{name:"a_radiusCoef",size:1,type:ct}],CONSTANT_DATA:[[0,1,0],[0,-1,0],[1,1,1],[1,1,1],[0,-1,0],[1,-1,-1]]})},t.prototype.processVisibleItem=function(e,n,i,a,o){var u=o.size||1,h=i.x,d=i.y,p=a.x,f=a.y,w=(0,cm.floatColor)(o.color),A=p-h,E=f-d,y=a.size||1,T=A*A+E*E,L=0,k=0;T&&(T=1/Math.sqrt(T),L=-E*T*u,k=A*T*u);var N=this.array;N[n++]=h,N[n++]=d,N[n++]=p,N[n++]=f,N[n++]=L,N[n++]=k,N[n++]=w,N[n++]=e,N[n++]=y},t}(sm.default);ai.default=lm;var eu=$&&$.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ni,"__esModule",{value:!0});var dm=Be,hm=eu(ii),fm=eu(ai),pm=(0,dm.createEdgeCompoundProgram)([fm.default,hm.default]);ni.default=pm;var $r={};Object.defineProperty($r,"__esModule",{value:!0});$r.drawStraightEdgeLabel=void 0;function gm(r,t,e,n,i){var a=i.edgeLabelSize,o=i.edgeLabelFont,u=i.edgeLabelWeight,h=i.edgeLabelColor.attribute?t[i.edgeLabelColor.attribute]||i.edgeLabelColor.color||"#000":i.edgeLabelColor.color,d=t.label;if(d){r.fillStyle=h,r.font="".concat(u," ").concat(a,"px ").concat(o);var p=e.size,f=n.size,w=e.x,A=e.y,E=n.x,y=n.y,T=(w+E)/2,L=(A+y)/2,k=E-w,N=y-A,z=Math.sqrt(k*k+N*N);if(!(z<p+f)){w+=k*p/z,A+=N*p/z,E-=k*f/z,y-=N*f/z,T=(w+E)/2,L=(A+y)/2,k=E-w,N=y-A,z=Math.sqrt(k*k+N*N);var X=r.measureText(d).width;if(X>z){var M="…";for(d=d+M,X=r.measureText(d).width;X>z&&d.length>1;)d=d.slice(0,-2)+M,X=r.measureText(d).width;if(d.length<4)return}var de;k>0?N>0?de=Math.acos(k/z):de=Math.asin(N/z):N>0?de=Math.acos(k/z)+Math.PI:de=Math.asin(k/z)+Math.PI/2,r.save(),r.translate(T,L),r.rotate(de),r.fillText(d,-X/2,t.size/2+a),r.restore()}}}$r.drawStraightEdgeLabel=gm;var Jt={};Object.defineProperty(Jt,"__esModule",{value:!0});Jt.drawDiscNodeLabel=void 0;function vm(r,t,e){if(t.label){var n=e.labelSize,i=e.labelFont,a=e.labelWeight,o=e.labelColor.attribute?t[e.labelColor.attribute]||e.labelColor.color||"#000":e.labelColor.color;r.fillStyle=o,r.font="".concat(a," ").concat(n,"px ").concat(i),r.fillText(t.label,t.x+t.size+3,t.y+n/3)}}Jt.drawDiscNodeLabel=vm;var Pr={};Object.defineProperty(Pr,"__esModule",{value:!0});Pr.drawDiscNodeHover=void 0;var mm=Jt;function ym(r,t,e){var n=e.labelSize,i=e.labelFont,a=e.labelWeight;r.font="".concat(a," ").concat(n,"px ").concat(i),r.fillStyle="#FFF",r.shadowOffsetX=0,r.shadowOffsetY=0,r.shadowBlur=8,r.shadowColor="#000";var o=2;if(typeof t.label=="string"){var u=r.measureText(t.label).width,h=Math.round(u+5),d=Math.round(n+2*o),p=Math.max(t.size,n/2)+o,f=Math.asin(d/2/p),w=Math.sqrt(Math.abs(Math.pow(p,2)-Math.pow(d/2,2)));r.beginPath(),r.moveTo(t.x+w,t.y+d/2),r.lineTo(t.x+p+h,t.y+d/2),r.lineTo(t.x+p+h,t.y-d/2),r.lineTo(t.x+w,t.y-d/2),r.arc(t.x,t.y,p,f,-f),r.closePath(),r.fill()}else r.beginPath(),r.arc(t.x,t.y,t.size+o,0,Math.PI*2),r.closePath(),r.fill();r.shadowOffsetX=0,r.shadowOffsetY=0,r.shadowBlur=0,(0,mm.drawDiscNodeLabel)(r,t,e)}Pr.drawDiscNodeHover=ym;(function(r){var t=$&&$.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(r,"__esModule",{value:!0}),r.resolveSettings=r.validateSettings=r.DEFAULT_EDGE_PROGRAM_CLASSES=r.DEFAULT_NODE_PROGRAM_CLASSES=r.DEFAULT_SETTINGS=void 0;var e=j,n=t(ri),i=t(Or),a=t(ni),o=$r,u=Jt,h=Pr;r.DEFAULT_SETTINGS={hideEdgesOnMove:!1,hideLabelsOnMove:!1,renderLabels:!0,renderEdgeLabels:!1,enableEdgeEvents:!1,defaultNodeColor:"#999",defaultNodeType:"circle",defaultEdgeColor:"#ccc",defaultEdgeType:"line",labelFont:"Arial",labelSize:14,labelWeight:"normal",labelColor:{color:"#000"},edgeLabelFont:"Arial",edgeLabelSize:14,edgeLabelWeight:"normal",edgeLabelColor:{attribute:"color"},stagePadding:30,zoomToSizeRatioFunction:Math.sqrt,itemSizesReference:"screen",defaultDrawEdgeLabel:o.drawStraightEdgeLabel,defaultDrawNodeLabel:u.drawDiscNodeLabel,defaultDrawNodeHover:h.drawDiscNodeHover,labelDensity:1,labelGridCellSize:100,labelRenderedSizeThreshold:6,nodeReducer:null,edgeReducer:null,zIndex:!1,minCameraRatio:null,maxCameraRatio:null,allowInvalidContainer:!1,nodeProgramClasses:{},nodeHoverProgramClasses:{},edgeProgramClasses:{}},r.DEFAULT_NODE_PROGRAM_CLASSES={circle:n.default},r.DEFAULT_EDGE_PROGRAM_CLASSES={arrow:a.default,line:i.default};function d(f){if(typeof f.labelDensity!="number"||f.labelDensity<0)throw new Error("Settings: invalid `labelDensity`. Expecting a positive number.");var w=f.minCameraRatio,A=f.maxCameraRatio;if(typeof w=="number"&&typeof A=="number"&&A<w)throw new Error("Settings: invalid camera ratio boundaries. Expecting `maxCameraRatio` to be greater than `minCameraRatio`.")}r.validateSettings=d;function p(f){var w=(0,e.assign)({},r.DEFAULT_SETTINGS,f);return w.nodeProgramClasses=(0,e.assign)({},r.DEFAULT_NODE_PROGRAM_CLASSES,w.nodeProgramClasses),w.edgeProgramClasses=(0,e.assign)({},r.DEFAULT_EDGE_PROGRAM_CLASSES,w.edgeProgramClasses),w}r.resolveSettings=p})(Gs);var oi={},bm=$&&$.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),wm=$&&$.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e);var i=Object.getOwnPropertyDescriptor(t,e);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(r,n,i)}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),_m=$&&$.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),Em=$&&$.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&wm(t,r,e);return _m(t,r),t},po=$&&$.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(u){o={error:u}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a};Object.defineProperty(oi,"__esModule",{value:!0});var tt=Em(Ee),xm=200,go=3,Am=200,Sm=function(r){bm(t,r);function t(e,n){var i=r.call(this,e,n)||this;return i.enabled=!0,i.isMoving=!1,i.hasMoved=!1,i.touchMode=0,i.startTouchesPositions=[],i.handleStart=i.handleStart.bind(i),i.handleLeave=i.handleLeave.bind(i),i.handleMove=i.handleMove.bind(i),e.addEventListener("touchstart",i.handleStart,!1),e.addEventListener("touchend",i.handleLeave,!1),e.addEventListener("touchcancel",i.handleLeave,!1),e.addEventListener("touchmove",i.handleMove,!1),i}return t.prototype.kill=function(){var e=this.container;e.removeEventListener("touchstart",this.handleStart),e.removeEventListener("touchend",this.handleLeave),e.removeEventListener("touchcancel",this.handleLeave),e.removeEventListener("touchmove",this.handleMove)},t.prototype.getDimensions=function(){return{width:this.container.offsetWidth,height:this.container.offsetHeight}},t.prototype.dispatchRelatedMouseEvent=function(e,n,i,a){var o=i||n.touches[0],u=new MouseEvent(e,{clientX:o.clientX,clientY:o.clientY,altKey:n.altKey,ctrlKey:n.ctrlKey});u.isFakeSigmaMouseEvent=!0,(a||this.container).dispatchEvent(u)},t.prototype.handleStart=function(e){var n=this;if(this.enabled){e.preventDefault(),e.touches.length===1&&this.dispatchRelatedMouseEvent("mousedown",e);var i=(0,tt.getTouchesArray)(e.touches);if(this.touchMode=i.length,this.startCameraState=this.renderer.getCamera().getState(),this.startTouchesPositions=i.map(function(w){return(0,tt.getPosition)(w,n.container)}),this.lastTouches=i,this.lastTouchesPositions=this.startTouchesPositions,this.touchMode===2){var a=po(this.startTouchesPositions,2),o=a[0],u=o.x,h=o.y,d=a[1],p=d.x,f=d.y;this.startTouchesAngle=Math.atan2(f-h,p-u),this.startTouchesDistance=Math.sqrt(Math.pow(p-u,2)+Math.pow(f-h,2))}this.emit("touchdown",(0,tt.getTouchCoords)(e,this.container))}},t.prototype.handleLeave=function(e){if(this.enabled){switch(e.preventDefault(),e.touches.length===0&&this.lastTouches&&this.lastTouches.length&&(this.dispatchRelatedMouseEvent("mouseup",e,this.lastTouches[0],document),this.hasMoved||this.dispatchRelatedMouseEvent("click",e,this.lastTouches[0])),this.movingTimeout&&(this.isMoving=!1,clearTimeout(this.movingTimeout)),this.touchMode){case 2:if(e.touches.length===1){this.handleStart(e),e.preventDefault();break}case 1:if(this.isMoving){var n=this.renderer.getCamera(),i=n.getState(),a=n.getPreviousState()||{x:0,y:0};n.animate({x:i.x+go*(i.x-a.x),y:i.y+go*(i.y-a.y)},{duration:Am,easing:"quadraticOut"})}this.hasMoved=!1,this.isMoving=!1,this.touchMode=0;break}this.emit("touchup",(0,tt.getTouchCoords)(e,this.container))}},t.prototype.handleMove=function(e){var n,i=this;if(this.enabled){e.preventDefault(),e.touches.length===1&&this.dispatchRelatedMouseEvent("mousemove",e);var a=(0,tt.getTouchesArray)(e.touches),o=a.map(function(ft){return(0,tt.getPosition)(ft,i.container)});if(this.lastTouches=a,this.lastTouchesPositions=o,this.hasMoved||(this.hasMoved=o.some(function(ft,Ur){var Mt=i.startTouchesPositions[Ur];return ft.x!==Mt.x||ft.y!==Mt.y})),!!this.hasMoved){this.isMoving=!0,this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){i.isMoving=!1},xm);var u=this.renderer.getCamera(),h=this.startCameraState;switch(this.touchMode){case 1:{var d=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0]),p=d.x,f=d.y,w=this.renderer.viewportToFramedGraph(o[0]),A=w.x,E=w.y;u.setState({x:h.x+p-A,y:h.y+f-E});break}case 2:{var y={},T=o[0],L=T.x,k=T.y,N=o[1],z=N.x,X=N.y,M=Math.atan2(X-k,z-L)-this.startTouchesAngle,de=Math.hypot(X-k,z-L)/this.startTouchesDistance,te=u.getBoundedRatio(h.ratio/de);y.ratio=te,y.angle=h.angle+M;var Se=this.getDimensions(),Re=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0],{cameraState:h}),Ce=Math.min(Se.width,Se.height),dt=Ce/Se.width,ht=Ce/Se.height,at=te/Ce,A=L-Ce/2/dt,E=k-Ce/2/ht;n=po([A*Math.cos(-y.angle)-E*Math.sin(-y.angle),E*Math.cos(-y.angle)+A*Math.sin(-y.angle)],2),A=n[0],E=n[1],y.x=Re.x-A*at,y.y=Re.y+E*at,u.setState(y);break}}this.emit("touchmove",(0,tt.getTouchCoords)(e,this.container))}}},t}(tt.default);oi.default=Sm;var Gr={};Object.defineProperty(Gr,"__esModule",{value:!0});Gr.extend=void 0;function Cm(r,t){var e=t.size;if(e!==0){var n=r.length;r.length+=e;var i=0;t.forEach(function(a){r[n+i]=a,i++})}}Gr.extend=Cm;var Mr={},Tm=$&&$.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(u){o={error:u}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a};Object.defineProperty(Mr,"__esModule",{value:!0});Mr.getPixelColor=void 0;function Nm(r,t,e,n,i){i===void 0&&(i=1);var a=new Uint8Array(4);r.bindFramebuffer(r.FRAMEBUFFER,t),r.readPixels(e/i,r.drawingBufferHeight/i-n/i,1,1,r.RGBA,r.UNSIGNED_BYTE,a);var o=Tm(a,4),u=o[0],h=o[1],d=o[2],p=o[3];return[u,h,d,p]}Mr.getPixelColor=Nm;var Lm=$&&$.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),ee=$&&$.__assign||function(){return ee=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},ee.apply(this,arguments)},vo=$&&$.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(u){o={error:u}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},mo=$&&$.__spreadArray||function(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return r.concat(a||Array.prototype.slice.call(t))},si=$&&$.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Zn,"__esModule",{value:!0});var yo=si(Fr),Rm=si(kr),Fm=$t,le=j,Rn=Rt,dr=Gs,Dm=si(oi),hr=xe,bo=Gr,wo=Mr,_o=150,Eo=50;function km(r,t,e){if(!e.hasOwnProperty("x")||!e.hasOwnProperty("y"))throw new Error('Sigma: could not find a valid position (x, y) for node "'.concat(t,'". All your nodes must have a number "x" and "y". Maybe your forgot to apply a layout or your "nodeReducer" is not returning the correct data?'));return e.color||(e.color=r.defaultNodeColor),!e.label&&e.label!==""&&(e.label=null),e.label!==void 0&&e.label!==null?e.label=""+e.label:e.label=null,e.size||(e.size=2),e.hasOwnProperty("hidden")||(e.hidden=!1),e.hasOwnProperty("highlighted")||(e.highlighted=!1),e.hasOwnProperty("forceLabel")||(e.forceLabel=!1),(!e.type||e.type==="")&&(e.type=r.defaultNodeType),e.zIndex||(e.zIndex=0),e}function Om(r,t,e){return e.color||(e.color=r.defaultEdgeColor),e.label||(e.label=""),e.size||(e.size=.5),e.hasOwnProperty("hidden")||(e.hidden=!1),e.hasOwnProperty("forceLabel")||(e.forceLabel=!1),(!e.type||e.type==="")&&(e.type=r.defaultEdgeType),e.zIndex||(e.zIndex=0),e}var $m=function(r){Lm(t,r);function t(e,n,i){i===void 0&&(i={});var a=r.call(this)||this;if(a.elements={},a.canvasContexts={},a.webGLContexts={},a.pickingLayers=new Set,a.textures={},a.frameBuffers={},a.activeListeners={},a.labelGrid=new Rn.LabelGrid,a.nodeDataCache={},a.edgeDataCache={},a.nodeProgramIndex={},a.edgeProgramIndex={},a.nodesWithForcedLabels=new Set,a.edgesWithForcedLabels=new Set,a.nodeExtent={x:[0,1],y:[0,1]},a.nodeZExtent=[1/0,-1/0],a.edgeZExtent=[1/0,-1/0],a.matrix=(0,hr.identity)(),a.invMatrix=(0,hr.identity)(),a.correctionRatio=1,a.customBBox=null,a.normalizationFunction=(0,le.createNormalizationFunction)({x:[0,1],y:[0,1]}),a.graphToViewportRatio=1,a.itemIDsIndex={},a.nodeIndices={},a.edgeIndices={},a.width=0,a.height=0,a.pixelRatio=(0,le.getPixelRatio)(),a.pickingDownSizingRatio=2*a.pixelRatio,a.displayedNodeLabels=new Set,a.displayedEdgeLabels=new Set,a.highlightedNodes=new Set,a.hoveredNode=null,a.hoveredEdge=null,a.renderFrame=null,a.renderHighlightedNodesFrame=null,a.needToProcess=!1,a.checkEdgesEventsFrame=null,a.nodePrograms={},a.nodeHoverPrograms={},a.edgePrograms={},a.settings=(0,dr.resolveSettings)(i),(0,dr.validateSettings)(a.settings),(0,le.validateGraph)(e),!(n instanceof HTMLElement))throw new Error("Sigma: container should be an html element.");a.graph=e,a.container=n,a.createWebGLContext("edges",{picking:i.enableEdgeEvents}),a.createCanvasContext("edgeLabels"),a.createWebGLContext("nodes",{picking:!0}),a.createCanvasContext("labels"),a.createCanvasContext("hovers"),a.createWebGLContext("hoverNodes"),a.createCanvasContext("mouse"),a.resize();for(var o in a.settings.nodeProgramClasses){var u=a.settings.nodeProgramClasses[o];a.nodePrograms[o]=new u(a.webGLContexts.nodes,a.frameBuffers.nodes,a);var h=u;o in a.settings.nodeHoverProgramClasses&&(h=a.settings.nodeHoverProgramClasses[o]),a.nodeHoverPrograms[o]=new h(a.webGLContexts.hoverNodes,null,a)}for(var o in a.settings.edgeProgramClasses){var d=a.settings.edgeProgramClasses[o];a.edgePrograms[o]=new d(a.webGLContexts.edges,a.frameBuffers.edges,a)}return a.camera=new yo.default,a.bindCameraHandlers(),a.mouseCaptor=new Rm.default(a.elements.mouse,a),a.touchCaptor=new Dm.default(a.elements.mouse,a),a.bindEventHandlers(),a.bindGraphHandlers(),a.handleSettingsUpdate(),a.refresh(),a}return t.prototype.createCanvas=function(e){var n=(0,le.createElement)("canvas",{position:"absolute"},{class:"sigma-".concat(e)});return this.elements[e]=n,this.container.appendChild(n),n},t.prototype.createCanvasContext=function(e){var n=this.createCanvas(e),i={preserveDrawingBuffer:!1,antialias:!1};return this.canvasContexts[e]=n.getContext("2d",i),this},t.prototype.createWebGLContext=function(e,n){var i=this.createCanvas(e);n!=null&&n.hidden&&i.remove();var a=ee({preserveDrawingBuffer:!1,antialias:!1},n||{}),o;o=i.getContext("webgl2",a),o||(o=i.getContext("webgl",a)),o||(o=i.getContext("experimental-webgl",a));var u=o;if(this.webGLContexts[e]=u,u.blendFunc(u.ONE,u.ONE_MINUS_SRC_ALPHA),n!=null&&n.picking){this.pickingLayers.add(e);var h=u.createFramebuffer();if(!h)throw new Error("Sigma: cannot create a new frame buffer for layer ".concat(e));this.frameBuffers[e]=h}return this},t.prototype.resetWebGLTexture=function(e){var n=this.webGLContexts[e],i=this.frameBuffers[e],a=this.textures[e];a&&n.deleteTexture(a);var o=n.createTexture();return n.bindFramebuffer(n.FRAMEBUFFER,i),n.bindTexture(n.TEXTURE_2D,o),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,this.width/this.pickingDownSizingRatio,this.height/this.pickingDownSizingRatio,0,n.RGBA,n.UNSIGNED_BYTE,null),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,o,0),this.textures[e]=o,this},t.prototype.bindCameraHandlers=function(){var e=this;return this.activeListeners.camera=function(){e.scheduleRender()},this.camera.on("updated",this.activeListeners.camera),this},t.prototype.unbindCameraHandlers=function(){return this.camera.removeListener("updated",this.activeListeners.camera),this},t.prototype.getNodeAtPosition=function(e){var n=e.x,i=e.y,a=(0,wo.getPixelColor)(this.webGLContexts.nodes,this.frameBuffers.nodes,n,i,this.pickingDownSizingRatio),o=le.colorToIndex.apply(void 0,mo([],vo(a),!1)),u=this.itemIDsIndex[o];return u&&u.type==="node"?u.id:null},t.prototype.bindEventHandlers=function(){var e=this;this.activeListeners.handleResize=function(){e.scheduleRefresh()},window.addEventListener("resize",this.activeListeners.handleResize),this.activeListeners.handleMove=function(i){var a={event:i,preventSigmaDefault:function(){i.preventSigmaDefault()}},o=e.getNodeAtPosition(i);if(o&&e.hoveredNode!==o&&!e.nodeDataCache[o].hidden){e.hoveredNode&&e.emit("leaveNode",ee(ee({},a),{node:e.hoveredNode})),e.hoveredNode=o,e.emit("enterNode",ee(ee({},a),{node:o})),e.scheduleHighlightedNodesRender();return}if(e.hoveredNode&&e.getNodeAtPosition(i)!==e.hoveredNode){var u=e.hoveredNode;e.hoveredNode=null,e.emit("leaveNode",ee(ee({},a),{node:u})),e.scheduleHighlightedNodesRender();return}e.settings.enableEdgeEvents&&e.checkEdgeHoverEvents(a)};var n=function(i){return function(a){var o={event:a,preventSigmaDefault:function(){a.preventSigmaDefault()}},u=a.original.isFakeSigmaMouseEvent,h=u?e.getNodeAtPosition(a):e.hoveredNode;if(h)return e.emit("".concat(i,"Node"),ee(ee({},o),{node:h}));if(e.settings.enableEdgeEvents){var d=e.getEdgeAtPoint(a.x,a.y);if(d)return e.emit("".concat(i,"Edge"),ee(ee({},o),{edge:d}))}return e.emit("".concat(i,"Stage"),o)}};return this.activeListeners.handleClick=n("click"),this.activeListeners.handleRightClick=n("rightClick"),this.activeListeners.handleDoubleClick=n("doubleClick"),this.activeListeners.handleWheel=n("wheel"),this.activeListeners.handleDown=n("down"),this.mouseCaptor.on("mousemove",this.activeListeners.handleMove),this.mouseCaptor.on("click",this.activeListeners.handleClick),this.mouseCaptor.on("rightClick",this.activeListeners.handleRightClick),this.mouseCaptor.on("doubleClick",this.activeListeners.handleDoubleClick),this.mouseCaptor.on("wheel",this.activeListeners.handleWheel),this.mouseCaptor.on("mousedown",this.activeListeners.handleDown),this},t.prototype.bindGraphHandlers=function(){var e=this,n=this.graph,i=new Set(["x","y","zIndex","type"]);return this.activeListeners.eachNodeAttributesUpdatedGraphUpdate=function(a){var o,u=(o=a.hints)===null||o===void 0?void 0:o.attributes;e.graph.forEachNode(function(d){return e.updateNode(d)});var h=!u||u.some(function(d){return i.has(d)});e.refresh({partialGraph:{nodes:n.nodes()},skipIndexation:!h,schedule:!0})},this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate=function(a){var o,u=(o=a.hints)===null||o===void 0?void 0:o.attributes;e.graph.forEachEdge(function(d){return e.updateEdge(d)});var h=u&&["zIndex","type"].some(function(d){return u==null?void 0:u.includes(d)});e.refresh({partialGraph:{edges:n.edges()},skipIndexation:!h,schedule:!0})},this.activeListeners.addNodeGraphUpdate=function(a){var o=a.key;e.addNode(o),e.refresh({partialGraph:{nodes:[o]},skipIndexation:!1,schedule:!0})},this.activeListeners.updateNodeGraphUpdate=function(a){var o=a.key;e.refresh({partialGraph:{nodes:[o]},skipIndexation:!1,schedule:!0})},this.activeListeners.dropNodeGraphUpdate=function(a){var o=a.key;e.removeNode(o),e.refresh({schedule:!0})},this.activeListeners.addEdgeGraphUpdate=function(a){var o=a.key;e.addEdge(o),e.refresh({partialGraph:{edges:[o]},schedule:!0})},this.activeListeners.updateEdgeGraphUpdate=function(a){var o=a.key;e.refresh({partialGraph:{edges:[o]},skipIndexation:!1,schedule:!0})},this.activeListeners.dropEdgeGraphUpdate=function(a){var o=a.key;e.removeEdge(o),e.refresh({schedule:!0})},this.activeListeners.clearEdgesGraphUpdate=function(){e.clearEdgeState(),e.clearEdgeIndices(),e.refresh({schedule:!0})},this.activeListeners.clearGraphUpdate=function(){e.clearEdgeState(),e.clearNodeState(),e.clearEdgeIndices(),e.clearNodeIndices(),e.refresh({schedule:!0})},n.on("nodeAdded",this.activeListeners.addNodeGraphUpdate),n.on("nodeDropped",this.activeListeners.dropNodeGraphUpdate),n.on("nodeAttributesUpdated",this.activeListeners.updateNodeGraphUpdate),n.on("eachNodeAttributesUpdated",this.activeListeners.eachNodeAttributesUpdatedGraphUpdate),n.on("edgeAdded",this.activeListeners.addEdgeGraphUpdate),n.on("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),n.on("edgeAttributesUpdated",this.activeListeners.updateEdgeGraphUpdate),n.on("eachEdgeAttributesUpdated",this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate),n.on("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),n.on("cleared",this.activeListeners.clearGraphUpdate),this},t.prototype.unbindGraphHandlers=function(){var e=this.graph;e.removeListener("nodeAdded",this.activeListeners.addNodeGraphUpdate),e.removeListener("nodeDropped",this.activeListeners.dropNodeGraphUpdate),e.removeListener("nodeAttributesUpdated",this.activeListeners.updateNodeGraphUpdate),e.removeListener("eachNodeAttributesUpdated",this.activeListeners.eachNodeAttributesUpdatedGraphUpdate),e.removeListener("edgeAdded",this.activeListeners.addEdgeGraphUpdate),e.removeListener("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),e.removeListener("edgeAttributesUpdated",this.activeListeners.updateEdgeGraphUpdate),e.removeListener("eachEdgeAttributesUpdated",this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate),e.removeListener("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),e.removeListener("cleared",this.activeListeners.clearGraphUpdate)},t.prototype.checkEdgeHoverEvents=function(e){var n=this.hoveredNode?null:this.getEdgeAtPoint(e.event.x,e.event.y);return n!==this.hoveredEdge&&(this.hoveredEdge&&this.emit("leaveEdge",ee(ee({},e),{edge:this.hoveredEdge})),n&&this.emit("enterEdge",ee(ee({},e),{edge:n})),this.hoveredEdge=n),this},t.prototype.getEdgeAtPoint=function(e,n){var i=(0,wo.getPixelColor)(this.webGLContexts.edges,this.frameBuffers.edges,e,n,this.pickingDownSizingRatio),a=le.colorToIndex.apply(void 0,mo([],vo(i),!1)),o=this.itemIDsIndex[a];return o&&o.type==="edge"?o.id:null},t.prototype.process=function(){var e=this,n=this.graph,i=this.settings,a=this.getDimensions();this.nodeExtent=(0,le.graphExtent)(this.graph),this.normalizationFunction=(0,le.createNormalizationFunction)(this.customBBox||this.nodeExtent);var o=new yo.default,u=(0,le.matrixFromCamera)(o.getState(),a,this.getGraphDimensions(),this.getSetting("stagePadding")||0);this.labelGrid.resizeAndClear(a,i.labelGridCellSize);for(var h={},d={},p={},f={},w=1,A=n.nodes(),E=0,y=A.length;E<y;E++){var T=A[E],L=this.nodeDataCache[T],k=n.getNodeAttributes(T);L.x=k.x,L.y=k.y,this.normalizationFunction.applyTo(L),typeof L.label=="string"&&!L.hidden&&this.labelGrid.add(T,L.size,this.framedGraphToViewport(L,{matrix:u})),h[L.type]=(h[L.type]||0)+1}this.labelGrid.organize();for(var N in this.nodePrograms){if(!this.nodePrograms.hasOwnProperty(N))throw new Error('Sigma: could not find a suitable program for node type "'.concat(N,'"!'));this.nodePrograms[N].reallocate(h[N]||0),h[N]=0}this.settings.zIndex&&this.nodeZExtent[0]!==this.nodeZExtent[1]&&(A=(0,le.zIndexOrdering)(this.nodeZExtent,function(de){return e.nodeDataCache[de].zIndex},A));for(var E=0,y=A.length;E<y;E++){var T=A[E];d[T]=w,f[d[T]]={type:"node",id:T},w++;var L=this.nodeDataCache[T];this.addNodeToProgram(T,d[T],h[L.type]++)}for(var z={},X=n.edges(),E=0,y=X.length;E<y;E++){var M=X[E],L=this.edgeDataCache[M];z[L.type]=(z[L.type]||0)+1}this.settings.zIndex&&this.edgeZExtent[0]!==this.edgeZExtent[1]&&(X=(0,le.zIndexOrdering)(this.edgeZExtent,function(de){return e.edgeDataCache[de].zIndex},X));for(var N in this.edgePrograms){if(!this.edgePrograms.hasOwnProperty(N))throw new Error('Sigma: could not find a suitable program for edge type "'.concat(N,'"!'));this.edgePrograms[N].reallocate(z[N]||0),z[N]=0}for(var E=0,y=X.length;E<y;E++){var M=X[E];p[M]=w,f[p[M]]={type:"edge",id:M},w++;var L=this.edgeDataCache[M];this.addEdgeToProgram(M,p[M],z[L.type]++)}return this.itemIDsIndex=f,this.nodeIndices=d,this.edgeIndices=p,this},t.prototype.handleSettingsUpdate=function(){return this.camera.minRatio=this.settings.minCameraRatio,this.camera.maxRatio=this.settings.maxCameraRatio,this.camera.setState(this.camera.validateState(this.camera.getState())),this},t.prototype.renderLabels=function(){if(!this.settings.renderLabels)return this;var e=this.camera.getState(),n=this.labelGrid.getLabelsToDisplay(e.ratio,this.settings.labelDensity);(0,bo.extend)(n,this.nodesWithForcedLabels),this.displayedNodeLabels=new Set;for(var i=this.canvasContexts.labels,a=0,o=n.length;a<o;a++){var u=n[a],h=this.nodeDataCache[u];if(!this.displayedNodeLabels.has(u)&&!h.hidden){var d=this.framedGraphToViewport(h),p=d.x,f=d.y,w=this.scaleSize(h.size);if(!(!h.forceLabel&&w<this.settings.labelRenderedSizeThreshold)&&!(p<-_o||p>this.width+_o||f<-Eo||f>this.height+Eo)){this.displayedNodeLabels.add(u);var A=this.settings,E=A.nodeProgramClasses,y=A.defaultDrawNodeLabel,T=E[h.type].drawLabel||y;T(i,ee(ee({key:u},h),{size:w,x:p,y:f}),this.settings)}}}return this},t.prototype.renderEdgeLabels=function(){if(!this.settings.renderEdgeLabels)return this;var e=this.canvasContexts.edgeLabels;e.clearRect(0,0,this.width,this.height);var n=(0,Rn.edgeLabelsToDisplayFromNodes)({graph:this.graph,hoveredNode:this.hoveredNode,displayedNodeLabels:this.displayedNodeLabels,highlightedNodes:this.highlightedNodes});(0,bo.extend)(n,this.edgesWithForcedLabels);for(var i=new Set,a=0,o=n.length;a<o;a++){var u=n[a],h=this.graph.extremities(u),d=this.nodeDataCache[h[0]],p=this.nodeDataCache[h[1]],f=this.edgeDataCache[u];if(!i.has(u)&&!(f.hidden||d.hidden||p.hidden)){var w=this.settings,A=w.edgeProgramClasses,E=w.defaultDrawEdgeLabel,y=A[f.type].drawLabel||E;y(e,ee(ee({key:u},f),{size:this.scaleSize(f.size)}),ee(ee(ee({key:h[0]},d),this.framedGraphToViewport(d)),{size:this.scaleSize(d.size)}),ee(ee(ee({key:h[1]},p),this.framedGraphToViewport(p)),{size:this.scaleSize(p.size)}),this.settings),i.add(u)}}return this.displayedEdgeLabels=i,this},t.prototype.renderHighlightedNodes=function(){var e=this,n=this.canvasContexts.hovers;n.clearRect(0,0,this.width,this.height);var i=function(d){var p=e.nodeDataCache[d],f=e.framedGraphToViewport(p),w=f.x,A=f.y,E=e.scaleSize(p.size),y=e.settings,T=y.nodeProgramClasses,L=y.defaultDrawNodeHover,k=T[p.type].drawHover||L;k(n,ee(ee({key:d},p),{size:E,x:w,y:A}),e.settings)},a=[];this.hoveredNode&&!this.nodeDataCache[this.hoveredNode].hidden&&a.push(this.hoveredNode),this.highlightedNodes.forEach(function(d){d!==e.hoveredNode&&a.push(d)}),a.forEach(function(d){return i(d)});var o={};a.forEach(function(d){var p=e.nodeDataCache[d].type;o[p]=(o[p]||0)+1});for(var u in this.nodeHoverPrograms)this.nodeHoverPrograms[u].reallocate(o[u]||0),o[u]=0;a.forEach(function(d){var p=e.nodeDataCache[d];e.nodeHoverPrograms[p.type].process(0,o[p.type]++,p)}),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT);for(var u in this.nodeHoverPrograms){var h=this.nodeHoverPrograms[u];h.render({matrix:this.matrix,width:this.width,height:this.height,pixelRatio:this.pixelRatio,zoomRatio:this.camera.ratio,sizeRatio:1/this.scaleSize(),correctionRatio:this.correctionRatio,downSizingRatio:this.pickingDownSizingRatio})}},t.prototype.scheduleHighlightedNodesRender=function(){var e=this;this.renderHighlightedNodesFrame||this.renderFrame||(this.renderHighlightedNodesFrame=(0,le.requestFrame)(function(){e.renderHighlightedNodesFrame=null,e.renderHighlightedNodes(),e.renderEdgeLabels()}))},t.prototype.render=function(){var e=this;this.emit("beforeRender");var n=function(){return e.emit("afterRender"),e};if(this.renderFrame&&((0,le.cancelFrame)(this.renderFrame),this.renderFrame=null),this.resize(),this.needToProcess&&this.process(),this.needToProcess=!1,this.clear(),this.pickingLayers.forEach(function(A){return e.resetWebGLTexture(A)}),!this.graph.order)return n();var i=this.mouseCaptor,a=this.camera.isAnimated()||i.isMoving||i.draggedEvents||i.currentWheelDirection,o=this.camera.getState(),u=this.getDimensions(),h=this.getGraphDimensions(),d=this.getSetting("stagePadding")||0;this.matrix=(0,le.matrixFromCamera)(o,u,h,d),this.invMatrix=(0,le.matrixFromCamera)(o,u,h,d,!0),this.correctionRatio=(0,le.getMatrixImpact)(this.matrix,o,u),this.graphToViewportRatio=this.getGraphToViewportRatio();var p={matrix:this.matrix,width:this.width,height:this.height,pixelRatio:this.pixelRatio,zoomRatio:this.camera.ratio,sizeRatio:1/this.scaleSize(),correctionRatio:this.correctionRatio,downSizingRatio:this.pickingDownSizingRatio};for(var f in this.nodePrograms){var w=this.nodePrograms[f];w.render(p)}if(!this.settings.hideEdgesOnMove||!a)for(var f in this.edgePrograms){var w=this.edgePrograms[f];w.render(p)}return this.settings.hideLabelsOnMove&&a||(this.renderLabels(),this.renderEdgeLabels(),this.renderHighlightedNodes()),n()},t.prototype.addNode=function(e){var n=Object.assign({},this.graph.getNodeAttributes(e));this.settings.nodeReducer&&(n=this.settings.nodeReducer(e,n));var i=km(this.settings,e,n);this.nodeDataCache[e]=i,this.nodesWithForcedLabels.delete(e),i.forceLabel&&!i.hidden&&this.nodesWithForcedLabels.add(e),this.highlightedNodes.delete(e),i.highlighted&&!i.hidden&&this.highlightedNodes.add(e),this.settings.zIndex&&(i.zIndex<this.nodeZExtent[0]&&(this.nodeZExtent[0]=i.zIndex),i.zIndex>this.nodeZExtent[1]&&(this.nodeZExtent[1]=i.zIndex))},t.prototype.updateNode=function(e){this.addNode(e);var n=this.nodeDataCache[e];this.normalizationFunction.applyTo(n)},t.prototype.removeNode=function(e){delete this.nodeDataCache[e],delete this.nodeProgramIndex[e],this.highlightedNodes.delete(e),this.hoveredNode===e&&(this.hoveredNode=null),this.nodesWithForcedLabels.delete(e)},t.prototype.addEdge=function(e){var n=Object.assign({},this.graph.getEdgeAttributes(e));this.settings.edgeReducer&&(n=this.settings.edgeReducer(e,n));var i=Om(this.settings,e,n);this.edgeDataCache[e]=i,this.edgesWithForcedLabels.delete(e),i.forceLabel&&!i.hidden&&this.edgesWithForcedLabels.add(e),this.settings.zIndex&&(i.zIndex<this.edgeZExtent[0]&&(this.edgeZExtent[0]=i.zIndex),i.zIndex>this.edgeZExtent[1]&&(this.edgeZExtent[1]=i.zIndex))},t.prototype.updateEdge=function(e){this.addEdge(e)},t.prototype.removeEdge=function(e){delete this.edgeDataCache[e],delete this.edgeProgramIndex[e],this.hoveredEdge===e&&(this.hoveredEdge=null),this.edgesWithForcedLabels.delete(e)},t.prototype.clearNodeIndices=function(){this.labelGrid=new Rn.LabelGrid,this.nodeExtent={x:[0,1],y:[0,1]},this.nodeDataCache={},this.edgeProgramIndex={},this.nodesWithForcedLabels=new Set,this.nodeZExtent=[1/0,-1/0]},t.prototype.clearEdgeIndices=function(){this.edgeDataCache={},this.edgeProgramIndex={},this.edgesWithForcedLabels=new Set,this.edgeZExtent=[1/0,-1/0]},t.prototype.clearIndices=function(){this.clearEdgeIndices(),this.clearNodeIndices()},t.prototype.clearNodeState=function(){this.displayedNodeLabels=new Set,this.highlightedNodes=new Set,this.hoveredNode=null},t.prototype.clearEdgeState=function(){this.displayedEdgeLabels=new Set,this.highlightedNodes=new Set,this.hoveredEdge=null},t.prototype.clearState=function(){this.clearEdgeState(),this.clearNodeState()},t.prototype.addNodeToProgram=function(e,n,i){var a=this.nodeDataCache[e],o=this.nodePrograms[a.type];if(!o)throw new Error('Sigma: could not find a suitable program for node type "'.concat(a.type,'"!'));o.process(n,i,a),this.nodeProgramIndex[e]=i},t.prototype.addEdgeToProgram=function(e,n,i){var a=this.edgeDataCache[e],o=this.edgePrograms[a.type];if(!o)throw new Error('Sigma: could not find a suitable program for edge type "'.concat(a.type,'"!'));var u=this.graph.extremities(e),h=this.nodeDataCache[u[0]],d=this.nodeDataCache[u[1]];o.process(n,i,h,d,a),this.edgeProgramIndex[e]=i},t.prototype.getCamera=function(){return this.camera},t.prototype.setCamera=function(e){this.unbindCameraHandlers(),this.camera=e,this.bindCameraHandlers()},t.prototype.getContainer=function(){return this.container},t.prototype.getGraph=function(){return this.graph},t.prototype.setGraph=function(e){e!==this.graph&&(this.unbindGraphHandlers(),this.checkEdgesEventsFrame!==null&&((0,le.cancelFrame)(this.checkEdgesEventsFrame),this.checkEdgesEventsFrame=null),this.graph=e,this.bindGraphHandlers(),this.refresh())},t.prototype.getMouseCaptor=function(){return this.mouseCaptor},t.prototype.getTouchCaptor=function(){return this.touchCaptor},t.prototype.getDimensions=function(){return{width:this.width,height:this.height}},t.prototype.getGraphDimensions=function(){var e=this.customBBox||this.nodeExtent;return{width:e.x[1]-e.x[0]||1,height:e.y[1]-e.y[0]||1}},t.prototype.getNodeDisplayData=function(e){var n=this.nodeDataCache[e];return n?Object.assign({},n):void 0},t.prototype.getEdgeDisplayData=function(e){var n=this.edgeDataCache[e];return n?Object.assign({},n):void 0},t.prototype.getNodeDisplayedLabels=function(){return new Set(this.displayedNodeLabels)},t.prototype.getEdgeDisplayedLabels=function(){return new Set(this.displayedEdgeLabels)},t.prototype.getSettings=function(){return ee({},this.settings)},t.prototype.getSetting=function(e){return this.settings[e]},t.prototype.setSetting=function(e,n){return this.settings[e]=n,(0,dr.validateSettings)(this.settings),this.handleSettingsUpdate(),this.refresh(),this},t.prototype.updateSetting=function(e,n){return this.settings[e]=n(this.settings[e]),(0,dr.validateSettings)(this.settings),this.handleSettingsUpdate(),this.scheduleRefresh(),this},t.prototype.resize=function(){var e=this.width,n=this.height;if(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.pixelRatio=(0,le.getPixelRatio)(),this.width===0)if(this.settings.allowInvalidContainer)this.width=1;else throw new Error("Sigma: Container has no width. You can set the allowInvalidContainer setting to true to stop seeing this error.");if(this.height===0)if(this.settings.allowInvalidContainer)this.height=1;else throw new Error("Sigma: Container has no height. You can set the allowInvalidContainer setting to true to stop seeing this error.");if(e===this.width&&n===this.height)return this;this.emit("resize");for(var i in this.elements){var a=this.elements[i];a.style.width=this.width+"px",a.style.height=this.height+"px"}for(var i in this.canvasContexts)this.elements[i].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[i].setAttribute("height",this.height*this.pixelRatio+"px"),this.pixelRatio!==1&&this.canvasContexts[i].scale(this.pixelRatio,this.pixelRatio);for(var i in this.webGLContexts){this.elements[i].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[i].setAttribute("height",this.height*this.pixelRatio+"px");var o=this.webGLContexts[i];if(o.viewport(0,0,this.width*this.pixelRatio,this.height*this.pixelRatio),this.pickingLayers.has(i)){var u=this.textures[i];u&&o.deleteTexture(u)}}return this},t.prototype.clear=function(){return this.webGLContexts.nodes.clear(this.webGLContexts.nodes.COLOR_BUFFER_BIT),this.webGLContexts.edges.clear(this.webGLContexts.edges.COLOR_BUFFER_BIT),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT),this.canvasContexts.labels.clearRect(0,0,this.width,this.height),this.canvasContexts.hovers.clearRect(0,0,this.width,this.height),this.canvasContexts.edgeLabels.clearRect(0,0,this.width,this.height),this},t.prototype.refresh=function(e){var n=this,i,a,o=(e==null?void 0:e.skipIndexation)!==void 0?e==null?void 0:e.skipIndexation:!1,u=(e==null?void 0:e.schedule)!==void 0?e.schedule:!1,h=!e||!e.partialGraph;if(h)this.clearEdgeIndices(),this.clearNodeIndices(),this.graph.forEachNode(function(T){return n.addNode(T)}),this.graph.forEachEdge(function(T){return n.addEdge(T)});else{for(var d=((i=e.partialGraph)===null||i===void 0?void 0:i.nodes)||[],p=0,f=(d==null?void 0:d.length)||0;p<f;p++){var w=d[p];if(this.updateNode(w),o){var A=this.nodeProgramIndex[w];if(A===void 0)throw new Error('Sigma: node "'.concat(w,`" can't be repaint`));this.addNodeToProgram(w,this.nodeIndices[w],A)}}for(var E=((a=e==null?void 0:e.partialGraph)===null||a===void 0?void 0:a.edges)||[],p=0,f=E.length;p<f;p++){var y=E[p];if(this.updateEdge(y),o){var A=this.edgeProgramIndex[y];if(A===void 0)throw new Error('Sigma: edge "'.concat(y,`" can't be repaint`));this.addEdgeToProgram(y,this.edgeIndices[y],A)}}}return(h||!o)&&(this.needToProcess=!0),u?this.scheduleRender():this.render(),this},t.prototype.scheduleRender=function(){var e=this;return this.renderFrame||(this.renderFrame=(0,le.requestFrame)(function(){e.render()})),this},t.prototype.scheduleRefresh=function(e){return this.refresh(ee(ee({},e),{schedule:!0}))},t.prototype.getViewportZoomedState=function(e,n){var i=this.camera.getState(),a=i.ratio,o=i.angle,u=i.x,h=i.y,d=n/a,p={x:this.width/2,y:this.height/2},f=this.viewportToFramedGraph(e),w=this.viewportToFramedGraph(p);return{angle:o,x:(f.x-w.x)*(1-d)+u,y:(f.y-w.y)*(1-d)+h,ratio:n}},t.prototype.viewRectangle=function(){var e=0*this.width/8,n=0*this.height/8,i=this.viewportToFramedGraph({x:0-e,y:0-n}),a=this.viewportToFramedGraph({x:this.width+e,y:0-n}),o=this.viewportToFramedGraph({x:0,y:this.height+n});return{x1:i.x,y1:i.y,x2:a.x,y2:a.y,height:a.y-o.y}},t.prototype.framedGraphToViewport=function(e,n){n===void 0&&(n={});var i=!!n.cameraState||!!n.viewportDimensions||!!n.graphDimensions,a=n.matrix?n.matrix:i?(0,le.matrixFromCamera)(n.cameraState||this.camera.getState(),n.viewportDimensions||this.getDimensions(),n.graphDimensions||this.getGraphDimensions(),n.padding||this.getSetting("stagePadding")||0):this.matrix,o=(0,hr.multiplyVec2)(a,e);return{x:(1+o.x)*this.width/2,y:(1-o.y)*this.height/2}},t.prototype.viewportToFramedGraph=function(e,n){n===void 0&&(n={});var i=!!n.cameraState||!!n.viewportDimensions||!n.graphDimensions,a=n.matrix?n.matrix:i?(0,le.matrixFromCamera)(n.cameraState||this.camera.getState(),n.viewportDimensions||this.getDimensions(),n.graphDimensions||this.getGraphDimensions(),n.padding||this.getSetting("stagePadding")||0,!0):this.invMatrix,o=(0,hr.multiplyVec2)(a,{x:e.x/this.width*2-1,y:1-e.y/this.height*2});return isNaN(o.x)&&(o.x=0),isNaN(o.y)&&(o.y=0),o},t.prototype.viewportToGraph=function(e,n){return n===void 0&&(n={}),this.normalizationFunction.inverse(this.viewportToFramedGraph(e,n))},t.prototype.graphToViewport=function(e,n){return n===void 0&&(n={}),this.framedGraphToViewport(this.normalizationFunction(e),n)},t.prototype.getGraphToViewportRatio=function(){var e={x:0,y:0},n={x:1,y:1},i=Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2)),a=this.graphToViewport(e),o=this.graphToViewport(n),u=Math.sqrt(Math.pow(a.x-o.x,2)+Math.pow(a.y-o.y,2));return u/i},t.prototype.getBBox=function(){return this.nodeExtent},t.prototype.getCustomBBox=function(){return this.customBBox},t.prototype.setCustomBBox=function(e){return this.customBBox=e,this.scheduleRender(),this},t.prototype.kill=function(){var e;this.emit("kill"),this.removeAllListeners(),this.unbindCameraHandlers(),window.removeEventListener("resize",this.activeListeners.handleResize),this.mouseCaptor.kill(),this.touchCaptor.kill(),this.unbindGraphHandlers(),this.clearIndices(),this.clearState(),this.nodeDataCache={},this.edgeDataCache={},this.highlightedNodes.clear(),this.renderFrame&&((0,le.cancelFrame)(this.renderFrame),this.renderFrame=null),this.renderHighlightedNodesFrame&&((0,le.cancelFrame)(this.renderHighlightedNodesFrame),this.renderHighlightedNodesFrame=null);for(var n in this.webGLContexts){var i=this.webGLContexts[n];(e=i.getExtension("WEBGL_lose_context"))===null||e===void 0||e.loseContext()}for(var a=this.container;a.firstChild;)a.removeChild(a.firstChild);this.canvasContexts={},this.webGLContexts={},this.elements={},this.nodePrograms={},this.nodeHoverPrograms={},this.edgePrograms={}},t.prototype.scaleSize=function(e,n){return e===void 0&&(e=1),n===void 0&&(n=this.camera.ratio),e/this.settings.zoomToSizeRatioFunction(n)*(this.getSetting("itemSizesReference")==="positions"?n*this.graphToViewportRatio:1)},t.prototype.getCanvases=function(){return ee({},this.elements)},t}(Fm.TypedEventEmitter);Zn.default=$m;var ui=$&&$.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(rt,"__esModule",{value:!0});rt.Sigma=rt.MouseCaptor=rt.Camera=void 0;var tu=ui(Zn);rt.Sigma=tu.default;var Pm=ui(Fr);rt.Camera=Pm.default;var Gm=ui(kr);rt.MouseCaptor=Gm.default;var Mm=rt.default=tu.default,ru={exports:{}};/**
 * chroma.js - JavaScript library for color conversions
 *
 * Copyright (c) 2011-2019, Gregor Aisch
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 * list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 * derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * -------------------------------------------------------
 *
 * chroma.js includes colors from colorbrewer2.org, which are released under
 * the following license:
 *
 * Copyright (c) 2002 Cynthia Brewer, Mark Harrower,
 * and The Pennsylvania State University.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific
 * language governing permissions and limitations under the License.
 *
 * ------------------------------------------------------
 *
 * Named colors are taken from X11 Color Names.
 * http://www.w3.org/TR/css3-color/#svg-color
 *
 * @preserve
 */(function(r,t){(function(e,n){r.exports=n()})($,function(){for(var e=function(s,c,l){return c===void 0&&(c=0),l===void 0&&(l=1),s<c?c:s>l?l:s},n=e,i=function(s){s._clipped=!1,s._unclipped=s.slice(0);for(var c=0;c<=3;c++)c<3?((s[c]<0||s[c]>255)&&(s._clipped=!0),s[c]=n(s[c],0,255)):c===3&&(s[c]=n(s[c],0,1));return s},a={},o=0,u=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];o<u.length;o+=1){var h=u[o];a["[object "+h+"]"]=h.toLowerCase()}var d=function(s){return a[Object.prototype.toString.call(s)]||"object"},p=d,f=function(s,c){return c===void 0&&(c=null),s.length>=3?Array.prototype.slice.call(s):p(s[0])=="object"&&c?c.split("").filter(function(l){return s[0][l]!==void 0}).map(function(l){return s[0][l]}):s[0]},w=d,A=function(s){if(s.length<2)return null;var c=s.length-1;return w(s[c])=="string"?s[c].toLowerCase():null},E=Math.PI,y={clip_rgb:i,limit:e,type:d,unpack:f,last:A,PI:E,TWOPI:E*2,PITHIRD:E/3,DEG2RAD:E/180,RAD2DEG:180/E},T={format:{},autodetect:[]},L=y.last,k=y.clip_rgb,N=y.type,z=T,X=function(){for(var c=[],l=arguments.length;l--;)c[l]=arguments[l];var g=this;if(N(c[0])==="object"&&c[0].constructor&&c[0].constructor===this.constructor)return c[0];var m=L(c),b=!1;if(!m){b=!0,z.sorted||(z.autodetect=z.autodetect.sort(function(R,P){return P.p-R.p}),z.sorted=!0);for(var v=0,_=z.autodetect;v<_.length;v+=1){var x=_[v];if(m=x.test.apply(x,c),m)break}}if(z.format[m]){var S=z.format[m].apply(null,b?c:c.slice(0,-1));g._rgb=k(S)}else throw new Error("unknown format: "+c);g._rgb.length===3&&g._rgb.push(1)};X.prototype.toString=function(){return N(this.hex)=="function"?this.hex():"["+this._rgb.join(",")+"]"};var M=X,de=function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];return new(Function.prototype.bind.apply(de.Color,[null].concat(s)))};de.Color=M,de.version="2.4.2";var te=de,Se=y.unpack,Re=Math.max,Ce=function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];var l=Se(s,"rgb"),g=l[0],m=l[1],b=l[2];g=g/255,m=m/255,b=b/255;var v=1-Re(g,Re(m,b)),_=v<1?1/(1-v):0,x=(1-g-v)*_,S=(1-m-v)*_,R=(1-b-v)*_;return[x,S,R,v]},dt=Ce,ht=y.unpack,at=function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];s=ht(s,"cmyk");var l=s[0],g=s[1],m=s[2],b=s[3],v=s.length>4?s[4]:1;return b===1?[0,0,0,v]:[l>=1?0:255*(1-l)*(1-b),g>=1?0:255*(1-g)*(1-b),m>=1?0:255*(1-m)*(1-b),v]},ft=at,Ur=te,Mt=M,di=T,lu=y.unpack,du=y.type,hu=dt;Mt.prototype.cmyk=function(){return hu(this._rgb)},Ur.cmyk=function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];return new(Function.prototype.bind.apply(Mt,[null].concat(s,["cmyk"])))},di.format.cmyk=ft,di.autodetect.push({p:2,test:function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];if(s=lu(s,"cmyk"),du(s)==="array"&&s.length===4)return"cmyk"}});var fu=y.unpack,pu=y.last,zr=function(s){return Math.round(s*100)/100},gu=function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];var l=fu(s,"hsla"),g=pu(s)||"lsa";return l[0]=zr(l[0]||0),l[1]=zr(l[1]*100)+"%",l[2]=zr(l[2]*100)+"%",g==="hsla"||l.length>3&&l[3]<1?(l[3]=l.length>3?l[3]:1,g="hsla"):l.length=3,g+"("+l.join(",")+")"},vu=gu,mu=y.unpack,yu=function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];s=mu(s,"rgba");var l=s[0],g=s[1],m=s[2];l/=255,g/=255,m/=255;var b=Math.min(l,g,m),v=Math.max(l,g,m),_=(v+b)/2,x,S;return v===b?(x=0,S=Number.NaN):x=_<.5?(v-b)/(v+b):(v-b)/(2-v-b),l==v?S=(g-m)/(v-b):g==v?S=2+(m-l)/(v-b):m==v&&(S=4+(l-g)/(v-b)),S*=60,S<0&&(S+=360),s.length>3&&s[3]!==void 0?[S,x,_,s[3]]:[S,x,_]},hi=yu,bu=y.unpack,wu=y.last,_u=vu,Eu=hi,Br=Math.round,xu=function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];var l=bu(s,"rgba"),g=wu(s)||"rgb";return g.substr(0,3)=="hsl"?_u(Eu(l),g):(l[0]=Br(l[0]),l[1]=Br(l[1]),l[2]=Br(l[2]),(g==="rgba"||l.length>3&&l[3]<1)&&(l[3]=l.length>3?l[3]:1,g="rgba"),g+"("+l.slice(0,g==="rgb"?3:4).join(",")+")")},Au=xu,Su=y.unpack,jr=Math.round,Cu=function(){for(var s,c=[],l=arguments.length;l--;)c[l]=arguments[l];c=Su(c,"hsl");var g=c[0],m=c[1],b=c[2],v,_,x;if(m===0)v=_=x=b*255;else{var S=[0,0,0],R=[0,0,0],P=b<.5?b*(1+m):b+m-b*m,F=2*b-P,U=g/360;S[0]=U+1/3,S[1]=U,S[2]=U-1/3;for(var I=0;I<3;I++)S[I]<0&&(S[I]+=1),S[I]>1&&(S[I]-=1),6*S[I]<1?R[I]=F+(P-F)*6*S[I]:2*S[I]<1?R[I]=P:3*S[I]<2?R[I]=F+(P-F)*(2/3-S[I])*6:R[I]=F;s=[jr(R[0]*255),jr(R[1]*255),jr(R[2]*255)],v=s[0],_=s[1],x=s[2]}return c.length>3?[v,_,x,c[3]]:[v,_,x,1]},fi=Cu,pi=fi,gi=T,vi=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,mi=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,yi=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,bi=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,wi=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,_i=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,Ei=Math.round,xi=function(s){s=s.toLowerCase().trim();var c;if(gi.format.named)try{return gi.format.named(s)}catch{}if(c=s.match(vi)){for(var l=c.slice(1,4),g=0;g<3;g++)l[g]=+l[g];return l[3]=1,l}if(c=s.match(mi)){for(var m=c.slice(1,5),b=0;b<4;b++)m[b]=+m[b];return m}if(c=s.match(yi)){for(var v=c.slice(1,4),_=0;_<3;_++)v[_]=Ei(v[_]*2.55);return v[3]=1,v}if(c=s.match(bi)){for(var x=c.slice(1,5),S=0;S<3;S++)x[S]=Ei(x[S]*2.55);return x[3]=+x[3],x}if(c=s.match(wi)){var R=c.slice(1,4);R[1]*=.01,R[2]*=.01;var P=pi(R);return P[3]=1,P}if(c=s.match(_i)){var F=c.slice(1,4);F[1]*=.01,F[2]*=.01;var U=pi(F);return U[3]=+c[4],U}};xi.test=function(s){return vi.test(s)||mi.test(s)||yi.test(s)||bi.test(s)||wi.test(s)||_i.test(s)};var Tu=xi,Nu=te,Ai=M,Si=T,Lu=y.type,Ru=Au,Ci=Tu;Ai.prototype.css=function(s){return Ru(this._rgb,s)},Nu.css=function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];return new(Function.prototype.bind.apply(Ai,[null].concat(s,["css"])))},Si.format.css=Ci,Si.autodetect.push({p:5,test:function(s){for(var c=[],l=arguments.length-1;l-- >0;)c[l]=arguments[l+1];if(!c.length&&Lu(s)==="string"&&Ci.test(s))return"css"}});var Ti=M,Fu=te,Du=T,ku=y.unpack;Du.format.gl=function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];var l=ku(s,"rgba");return l[0]*=255,l[1]*=255,l[2]*=255,l},Fu.gl=function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];return new(Function.prototype.bind.apply(Ti,[null].concat(s,["gl"])))},Ti.prototype.gl=function(){var s=this._rgb;return[s[0]/255,s[1]/255,s[2]/255,s[3]]};var Ou=y.unpack,$u=function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];var l=Ou(s,"rgb"),g=l[0],m=l[1],b=l[2],v=Math.min(g,m,b),_=Math.max(g,m,b),x=_-v,S=x*100/255,R=v/(255-x)*100,P;return x===0?P=Number.NaN:(g===_&&(P=(m-b)/x),m===_&&(P=2+(b-g)/x),b===_&&(P=4+(g-m)/x),P*=60,P<0&&(P+=360)),[P,S,R]},Pu=$u,Gu=y.unpack,Mu=Math.floor,Iu=function(){for(var s,c,l,g,m,b,v=[],_=arguments.length;_--;)v[_]=arguments[_];v=Gu(v,"hcg");var x=v[0],S=v[1],R=v[2],P,F,U;R=R*255;var I=S*255;if(S===0)P=F=U=R;else{x===360&&(x=0),x>360&&(x-=360),x<0&&(x+=360),x/=60;var W=Mu(x),Y=x-W,J=R*(1-S),re=J+I*(1-Y),ye=J+I*Y,me=J+I;switch(W){case 0:s=[me,ye,J],P=s[0],F=s[1],U=s[2];break;case 1:c=[re,me,J],P=c[0],F=c[1],U=c[2];break;case 2:l=[J,me,ye],P=l[0],F=l[1],U=l[2];break;case 3:g=[J,re,me],P=g[0],F=g[1],U=g[2];break;case 4:m=[ye,J,me],P=m[0],F=m[1],U=m[2];break;case 5:b=[me,J,re],P=b[0],F=b[1],U=b[2];break}}return[P,F,U,v.length>3?v[3]:1]},Uu=Iu,zu=y.unpack,Bu=y.type,ju=te,Ni=M,Li=T,Hu=Pu;Ni.prototype.hcg=function(){return Hu(this._rgb)},ju.hcg=function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];return new(Function.prototype.bind.apply(Ni,[null].concat(s,["hcg"])))},Li.format.hcg=Uu,Li.autodetect.push({p:1,test:function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];if(s=zu(s,"hcg"),Bu(s)==="array"&&s.length===3)return"hcg"}});var Wu=y.unpack,qu=y.last,Zt=Math.round,Vu=function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];var l=Wu(s,"rgba"),g=l[0],m=l[1],b=l[2],v=l[3],_=qu(s)||"auto";v===void 0&&(v=1),_==="auto"&&(_=v<1?"rgba":"rgb"),g=Zt(g),m=Zt(m),b=Zt(b);var x=g<<16|m<<8|b,S="000000"+x.toString(16);S=S.substr(S.length-6);var R="0"+Zt(v*255).toString(16);switch(R=R.substr(R.length-2),_.toLowerCase()){case"rgba":return"#"+S+R;case"argb":return"#"+R+S;default:return"#"+S}},Ri=Vu,Yu=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,Ku=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,Xu=function(s){if(s.match(Yu)){(s.length===4||s.length===7)&&(s=s.substr(1)),s.length===3&&(s=s.split(""),s=s[0]+s[0]+s[1]+s[1]+s[2]+s[2]);var c=parseInt(s,16),l=c>>16,g=c>>8&255,m=c&255;return[l,g,m,1]}if(s.match(Ku)){(s.length===5||s.length===9)&&(s=s.substr(1)),s.length===4&&(s=s.split(""),s=s[0]+s[0]+s[1]+s[1]+s[2]+s[2]+s[3]+s[3]);var b=parseInt(s,16),v=b>>24&255,_=b>>16&255,x=b>>8&255,S=Math.round((b&255)/255*100)/100;return[v,_,x,S]}throw new Error("unknown hex color: "+s)},Fi=Xu,Ju=te,Di=M,Zu=y.type,ki=T,Qu=Ri;Di.prototype.hex=function(s){return Qu(this._rgb,s)},Ju.hex=function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];return new(Function.prototype.bind.apply(Di,[null].concat(s,["hex"])))},ki.format.hex=Fi,ki.autodetect.push({p:4,test:function(s){for(var c=[],l=arguments.length-1;l-- >0;)c[l]=arguments[l+1];if(!c.length&&Zu(s)==="string"&&[3,4,5,6,7,8,9].indexOf(s.length)>=0)return"hex"}});var ec=y.unpack,Oi=y.TWOPI,tc=Math.min,rc=Math.sqrt,nc=Math.acos,ic=function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];var l=ec(s,"rgb"),g=l[0],m=l[1],b=l[2];g/=255,m/=255,b/=255;var v,_=tc(g,m,b),x=(g+m+b)/3,S=x>0?1-_/x:0;return S===0?v=NaN:(v=(g-m+(g-b))/2,v/=rc((g-m)*(g-m)+(g-b)*(m-b)),v=nc(v),b>m&&(v=Oi-v),v/=Oi),[v*360,S,x]},ac=ic,oc=y.unpack,Hr=y.limit,pt=y.TWOPI,Wr=y.PITHIRD,gt=Math.cos,sc=function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];s=oc(s,"hsi");var l=s[0],g=s[1],m=s[2],b,v,_;return isNaN(l)&&(l=0),isNaN(g)&&(g=0),l>360&&(l-=360),l<0&&(l+=360),l/=360,l<1/3?(_=(1-g)/3,b=(1+g*gt(pt*l)/gt(Wr-pt*l))/3,v=1-(_+b)):l<2/3?(l-=1/3,b=(1-g)/3,v=(1+g*gt(pt*l)/gt(Wr-pt*l))/3,_=1-(b+v)):(l-=2/3,v=(1-g)/3,_=(1+g*gt(pt*l)/gt(Wr-pt*l))/3,b=1-(v+_)),b=Hr(m*b*3),v=Hr(m*v*3),_=Hr(m*_*3),[b*255,v*255,_*255,s.length>3?s[3]:1]},uc=sc,cc=y.unpack,lc=y.type,dc=te,$i=M,Pi=T,hc=ac;$i.prototype.hsi=function(){return hc(this._rgb)},dc.hsi=function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];return new(Function.prototype.bind.apply($i,[null].concat(s,["hsi"])))},Pi.format.hsi=uc,Pi.autodetect.push({p:2,test:function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];if(s=cc(s,"hsi"),lc(s)==="array"&&s.length===3)return"hsi"}});var fc=y.unpack,pc=y.type,gc=te,Gi=M,Mi=T,vc=hi;Gi.prototype.hsl=function(){return vc(this._rgb)},gc.hsl=function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];return new(Function.prototype.bind.apply(Gi,[null].concat(s,["hsl"])))},Mi.format.hsl=fi,Mi.autodetect.push({p:2,test:function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];if(s=fc(s,"hsl"),pc(s)==="array"&&s.length===3)return"hsl"}});var mc=y.unpack,yc=Math.min,bc=Math.max,wc=function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];s=mc(s,"rgb");var l=s[0],g=s[1],m=s[2],b=yc(l,g,m),v=bc(l,g,m),_=v-b,x,S,R;return R=v/255,v===0?(x=Number.NaN,S=0):(S=_/v,l===v&&(x=(g-m)/_),g===v&&(x=2+(m-l)/_),m===v&&(x=4+(l-g)/_),x*=60,x<0&&(x+=360)),[x,S,R]},_c=wc,Ec=y.unpack,xc=Math.floor,Ac=function(){for(var s,c,l,g,m,b,v=[],_=arguments.length;_--;)v[_]=arguments[_];v=Ec(v,"hsv");var x=v[0],S=v[1],R=v[2],P,F,U;if(R*=255,S===0)P=F=U=R;else{x===360&&(x=0),x>360&&(x-=360),x<0&&(x+=360),x/=60;var I=xc(x),W=x-I,Y=R*(1-S),J=R*(1-S*W),re=R*(1-S*(1-W));switch(I){case 0:s=[R,re,Y],P=s[0],F=s[1],U=s[2];break;case 1:c=[J,R,Y],P=c[0],F=c[1],U=c[2];break;case 2:l=[Y,R,re],P=l[0],F=l[1],U=l[2];break;case 3:g=[Y,J,R],P=g[0],F=g[1],U=g[2];break;case 4:m=[re,Y,R],P=m[0],F=m[1],U=m[2];break;case 5:b=[R,Y,J],P=b[0],F=b[1],U=b[2];break}}return[P,F,U,v.length>3?v[3]:1]},Sc=Ac,Cc=y.unpack,Tc=y.type,Nc=te,Ii=M,Ui=T,Lc=_c;Ii.prototype.hsv=function(){return Lc(this._rgb)},Nc.hsv=function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];return new(Function.prototype.bind.apply(Ii,[null].concat(s,["hsv"])))},Ui.format.hsv=Sc,Ui.autodetect.push({p:2,test:function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];if(s=Cc(s,"hsv"),Tc(s)==="array"&&s.length===3)return"hsv"}});var Qt={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},vt=Qt,Rc=y.unpack,zi=Math.pow,Fc=function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];var l=Rc(s,"rgb"),g=l[0],m=l[1],b=l[2],v=Dc(g,m,b),_=v[0],x=v[1],S=v[2],R=116*x-16;return[R<0?0:R,500*(_-x),200*(x-S)]},qr=function(s){return(s/=255)<=.04045?s/12.92:zi((s+.055)/1.055,2.4)},Vr=function(s){return s>vt.t3?zi(s,1/3):s/vt.t2+vt.t0},Dc=function(s,c,l){s=qr(s),c=qr(c),l=qr(l);var g=Vr((.4124564*s+.3575761*c+.1804375*l)/vt.Xn),m=Vr((.2126729*s+.7151522*c+.072175*l)/vt.Yn),b=Vr((.0193339*s+.119192*c+.9503041*l)/vt.Zn);return[g,m,b]},Bi=Fc,mt=Qt,kc=y.unpack,Oc=Math.pow,$c=function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];s=kc(s,"lab");var l=s[0],g=s[1],m=s[2],b,v,_,x,S,R;return v=(l+16)/116,b=isNaN(g)?v:v+g/500,_=isNaN(m)?v:v-m/200,v=mt.Yn*Kr(v),b=mt.Xn*Kr(b),_=mt.Zn*Kr(_),x=Yr(3.2404542*b-1.5371385*v-.4985314*_),S=Yr(-.969266*b+1.8760108*v+.041556*_),R=Yr(.0556434*b-.2040259*v+1.0572252*_),[x,S,R,s.length>3?s[3]:1]},Yr=function(s){return 255*(s<=.00304?12.92*s:1.055*Oc(s,1/2.4)-.055)},Kr=function(s){return s>mt.t1?s*s*s:mt.t2*(s-mt.t0)},ji=$c,Pc=y.unpack,Gc=y.type,Mc=te,Hi=M,Wi=T,Ic=Bi;Hi.prototype.lab=function(){return Ic(this._rgb)},Mc.lab=function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];return new(Function.prototype.bind.apply(Hi,[null].concat(s,["lab"])))},Wi.format.lab=ji,Wi.autodetect.push({p:2,test:function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];if(s=Pc(s,"lab"),Gc(s)==="array"&&s.length===3)return"lab"}});var Uc=y.unpack,zc=y.RAD2DEG,Bc=Math.sqrt,jc=Math.atan2,Hc=Math.round,Wc=function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];var l=Uc(s,"lab"),g=l[0],m=l[1],b=l[2],v=Bc(m*m+b*b),_=(jc(b,m)*zc+360)%360;return Hc(v*1e4)===0&&(_=Number.NaN),[g,v,_]},qi=Wc,qc=y.unpack,Vc=Bi,Yc=qi,Kc=function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];var l=qc(s,"rgb"),g=l[0],m=l[1],b=l[2],v=Vc(g,m,b),_=v[0],x=v[1],S=v[2];return Yc(_,x,S)},Xc=Kc,Jc=y.unpack,Zc=y.DEG2RAD,Qc=Math.sin,el=Math.cos,tl=function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];var l=Jc(s,"lch"),g=l[0],m=l[1],b=l[2];return isNaN(b)&&(b=0),b=b*Zc,[g,el(b)*m,Qc(b)*m]},Vi=tl,rl=y.unpack,nl=Vi,il=ji,al=function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];s=rl(s,"lch");var l=s[0],g=s[1],m=s[2],b=nl(l,g,m),v=b[0],_=b[1],x=b[2],S=il(v,_,x),R=S[0],P=S[1],F=S[2];return[R,P,F,s.length>3?s[3]:1]},Yi=al,ol=y.unpack,sl=Yi,ul=function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];var l=ol(s,"hcl").reverse();return sl.apply(void 0,l)},cl=ul,ll=y.unpack,dl=y.type,Ki=te,er=M,Xr=T,Xi=Xc;er.prototype.lch=function(){return Xi(this._rgb)},er.prototype.hcl=function(){return Xi(this._rgb).reverse()},Ki.lch=function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];return new(Function.prototype.bind.apply(er,[null].concat(s,["lch"])))},Ki.hcl=function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];return new(Function.prototype.bind.apply(er,[null].concat(s,["hcl"])))},Xr.format.lch=Yi,Xr.format.hcl=cl,["lch","hcl"].forEach(function(s){return Xr.autodetect.push({p:2,test:function(){for(var c=[],l=arguments.length;l--;)c[l]=arguments[l];if(c=ll(c,s),dl(c)==="array"&&c.length===3)return s}})});var hl={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},Ji=hl,fl=M,Zi=T,pl=y.type,It=Ji,gl=Fi,vl=Ri;fl.prototype.name=function(){for(var s=vl(this._rgb,"rgb"),c=0,l=Object.keys(It);c<l.length;c+=1){var g=l[c];if(It[g]===s)return g.toLowerCase()}return s},Zi.format.named=function(s){if(s=s.toLowerCase(),It[s])return gl(It[s]);throw new Error("unknown color name: "+s)},Zi.autodetect.push({p:5,test:function(s){for(var c=[],l=arguments.length-1;l-- >0;)c[l]=arguments[l+1];if(!c.length&&pl(s)==="string"&&It[s.toLowerCase()])return"named"}});var ml=y.unpack,yl=function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];var l=ml(s,"rgb"),g=l[0],m=l[1],b=l[2];return(g<<16)+(m<<8)+b},bl=yl,wl=y.type,_l=function(s){if(wl(s)=="number"&&s>=0&&s<=16777215){var c=s>>16,l=s>>8&255,g=s&255;return[c,l,g,1]}throw new Error("unknown num color: "+s)},El=_l,xl=te,Qi=M,ea=T,Al=y.type,Sl=bl;Qi.prototype.num=function(){return Sl(this._rgb)},xl.num=function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];return new(Function.prototype.bind.apply(Qi,[null].concat(s,["num"])))},ea.format.num=El,ea.autodetect.push({p:5,test:function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];if(s.length===1&&Al(s[0])==="number"&&s[0]>=0&&s[0]<=16777215)return"num"}});var Cl=te,Jr=M,ta=T,ra=y.unpack,na=y.type,ia=Math.round;Jr.prototype.rgb=function(s){return s===void 0&&(s=!0),s===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(ia)},Jr.prototype.rgba=function(s){return s===void 0&&(s=!0),this._rgb.slice(0,4).map(function(c,l){return l<3?s===!1?c:ia(c):c})},Cl.rgb=function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];return new(Function.prototype.bind.apply(Jr,[null].concat(s,["rgb"])))},ta.format.rgb=function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];var l=ra(s,"rgba");return l[3]===void 0&&(l[3]=1),l},ta.autodetect.push({p:3,test:function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];if(s=ra(s,"rgba"),na(s)==="array"&&(s.length===3||s.length===4&&na(s[3])=="number"&&s[3]>=0&&s[3]<=1))return"rgb"}});var tr=Math.log,Tl=function(s){var c=s/100,l,g,m;return c<66?(l=255,g=c<6?0:-155.25485562709179-.44596950469579133*(g=c-2)+104.49216199393888*tr(g),m=c<20?0:-254.76935184120902+.8274096064007395*(m=c-10)+115.67994401066147*tr(m)):(l=351.97690566805693+.114206453784165*(l=c-55)-40.25366309332127*tr(l),g=325.4494125711974+.07943456536662342*(g=c-50)-28.0852963507957*tr(g),m=255),[l,g,m,1]},aa=Tl,Nl=aa,Ll=y.unpack,Rl=Math.round,Fl=function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];for(var l=Ll(s,"rgb"),g=l[0],m=l[2],b=1e3,v=4e4,_=.4,x;v-b>_;){x=(v+b)*.5;var S=Nl(x);S[2]/S[0]>=m/g?v=x:b=x}return Rl(x)},Dl=Fl,Zr=te,rr=M,Qr=T,kl=Dl;rr.prototype.temp=rr.prototype.kelvin=rr.prototype.temperature=function(){return kl(this._rgb)},Zr.temp=Zr.kelvin=Zr.temperature=function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];return new(Function.prototype.bind.apply(rr,[null].concat(s,["temp"])))},Qr.format.temp=Qr.format.kelvin=Qr.format.temperature=aa;var Ol=y.unpack,en=Math.cbrt,$l=Math.pow,Pl=Math.sign,Gl=function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];var l=Ol(s,"rgb"),g=l[0],m=l[1],b=l[2],v=[tn(g/255),tn(m/255),tn(b/255)],_=v[0],x=v[1],S=v[2],R=en(.4122214708*_+.5363325363*x+.0514459929*S),P=en(.2119034982*_+.6806995451*x+.1073969566*S),F=en(.0883024619*_+.2817188376*x+.6299787005*S);return[.2104542553*R+.793617785*P-.0040720468*F,1.9779984951*R-2.428592205*P+.4505937099*F,.0259040371*R+.7827717662*P-.808675766*F]},oa=Gl;function tn(s){var c=Math.abs(s);return c<.04045?s/12.92:(Pl(s)||1)*$l((c+.055)/1.055,2.4)}var Ml=y.unpack,nr=Math.pow,Il=Math.sign,Ul=function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];s=Ml(s,"lab");var l=s[0],g=s[1],m=s[2],b=nr(l+.3963377774*g+.2158037573*m,3),v=nr(l-.1055613458*g-.0638541728*m,3),_=nr(l-.0894841775*g-1.291485548*m,3);return[255*rn(4.0767416621*b-3.3077115913*v+.2309699292*_),255*rn(-1.2684380046*b+2.6097574011*v-.3413193965*_),255*rn(-.0041960863*b-.7034186147*v+1.707614701*_),s.length>3?s[3]:1]},sa=Ul;function rn(s){var c=Math.abs(s);return c>.0031308?(Il(s)||1)*(1.055*nr(c,1/2.4)-.055):s*12.92}var zl=y.unpack,Bl=y.type,jl=te,ua=M,ca=T,Hl=oa;ua.prototype.oklab=function(){return Hl(this._rgb)},jl.oklab=function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];return new(Function.prototype.bind.apply(ua,[null].concat(s,["oklab"])))},ca.format.oklab=sa,ca.autodetect.push({p:3,test:function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];if(s=zl(s,"oklab"),Bl(s)==="array"&&s.length===3)return"oklab"}});var Wl=y.unpack,ql=oa,Vl=qi,Yl=function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];var l=Wl(s,"rgb"),g=l[0],m=l[1],b=l[2],v=ql(g,m,b),_=v[0],x=v[1],S=v[2];return Vl(_,x,S)},Kl=Yl,Xl=y.unpack,Jl=Vi,Zl=sa,Ql=function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];s=Xl(s,"lch");var l=s[0],g=s[1],m=s[2],b=Jl(l,g,m),v=b[0],_=b[1],x=b[2],S=Zl(v,_,x),R=S[0],P=S[1],F=S[2];return[R,P,F,s.length>3?s[3]:1]},ed=Ql,td=y.unpack,rd=y.type,nd=te,la=M,da=T,id=Kl;la.prototype.oklch=function(){return id(this._rgb)},nd.oklch=function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];return new(Function.prototype.bind.apply(la,[null].concat(s,["oklch"])))},da.format.oklch=ed,da.autodetect.push({p:3,test:function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];if(s=td(s,"oklch"),rd(s)==="array"&&s.length===3)return"oklch"}});var ha=M,ad=y.type;ha.prototype.alpha=function(s,c){return c===void 0&&(c=!1),s!==void 0&&ad(s)==="number"?c?(this._rgb[3]=s,this):new ha([this._rgb[0],this._rgb[1],this._rgb[2],s],"rgb"):this._rgb[3]};var od=M;od.prototype.clipped=function(){return this._rgb._clipped||!1};var ot=M,sd=Qt;ot.prototype.darken=function(s){s===void 0&&(s=1);var c=this,l=c.lab();return l[0]-=sd.Kn*s,new ot(l,"lab").alpha(c.alpha(),!0)},ot.prototype.brighten=function(s){return s===void 0&&(s=1),this.darken(-s)},ot.prototype.darker=ot.prototype.darken,ot.prototype.brighter=ot.prototype.brighten;var ud=M;ud.prototype.get=function(s){var c=s.split("."),l=c[0],g=c[1],m=this[l]();if(g){var b=l.indexOf(g)-(l.substr(0,2)==="ok"?2:0);if(b>-1)return m[b];throw new Error("unknown channel "+g+" in mode "+l)}else return m};var yt=M,cd=y.type,ld=Math.pow,dd=1e-7,hd=20;yt.prototype.luminance=function(s){if(s!==void 0&&cd(s)==="number"){if(s===0)return new yt([0,0,0,this._rgb[3]],"rgb");if(s===1)return new yt([255,255,255,this._rgb[3]],"rgb");var c=this.luminance(),l="rgb",g=hd,m=function(v,_){var x=v.interpolate(_,.5,l),S=x.luminance();return Math.abs(s-S)<dd||!g--?x:S>s?m(v,x):m(x,_)},b=(c>s?m(new yt([0,0,0]),this):m(this,new yt([255,255,255]))).rgb();return new yt(b.concat([this._rgb[3]]))}return fd.apply(void 0,this._rgb.slice(0,3))};var fd=function(s,c,l){return s=nn(s),c=nn(c),l=nn(l),.2126*s+.7152*c+.0722*l},nn=function(s){return s/=255,s<=.03928?s/12.92:ld((s+.055)/1.055,2.4)},Le={},fa=M,pa=y.type,ir=Le,ga=function(s,c,l){l===void 0&&(l=.5);for(var g=[],m=arguments.length-3;m-- >0;)g[m]=arguments[m+3];var b=g[0]||"lrgb";if(!ir[b]&&!g.length&&(b=Object.keys(ir)[0]),!ir[b])throw new Error("interpolation mode "+b+" is not defined");return pa(s)!=="object"&&(s=new fa(s)),pa(c)!=="object"&&(c=new fa(c)),ir[b](s,c,l).alpha(s.alpha()+l*(c.alpha()-s.alpha()))},va=M,pd=ga;va.prototype.mix=va.prototype.interpolate=function(s,c){c===void 0&&(c=.5);for(var l=[],g=arguments.length-2;g-- >0;)l[g]=arguments[g+2];return pd.apply(void 0,[this,s,c].concat(l))};var ma=M;ma.prototype.premultiply=function(s){s===void 0&&(s=!1);var c=this._rgb,l=c[3];return s?(this._rgb=[c[0]*l,c[1]*l,c[2]*l,l],this):new ma([c[0]*l,c[1]*l,c[2]*l,l],"rgb")};var an=M,gd=Qt;an.prototype.saturate=function(s){s===void 0&&(s=1);var c=this,l=c.lch();return l[1]+=gd.Kn*s,l[1]<0&&(l[1]=0),new an(l,"lch").alpha(c.alpha(),!0)},an.prototype.desaturate=function(s){return s===void 0&&(s=1),this.saturate(-s)};var ya=M,ba=y.type;ya.prototype.set=function(s,c,l){l===void 0&&(l=!1);var g=s.split("."),m=g[0],b=g[1],v=this[m]();if(b){var _=m.indexOf(b)-(m.substr(0,2)==="ok"?2:0);if(_>-1){if(ba(c)=="string")switch(c.charAt(0)){case"+":v[_]+=+c;break;case"-":v[_]+=+c;break;case"*":v[_]*=+c.substr(1);break;case"/":v[_]/=+c.substr(1);break;default:v[_]=+c}else if(ba(c)==="number")v[_]=c;else throw new Error("unsupported value for Color.set");var x=new ya(v,m);return l?(this._rgb=x._rgb,this):x}throw new Error("unknown channel "+b+" in mode "+m)}else return v};var vd=M,md=function(s,c,l){var g=s._rgb,m=c._rgb;return new vd(g[0]+l*(m[0]-g[0]),g[1]+l*(m[1]-g[1]),g[2]+l*(m[2]-g[2]),"rgb")};Le.rgb=md;var yd=M,on=Math.sqrt,bt=Math.pow,bd=function(s,c,l){var g=s._rgb,m=g[0],b=g[1],v=g[2],_=c._rgb,x=_[0],S=_[1],R=_[2];return new yd(on(bt(m,2)*(1-l)+bt(x,2)*l),on(bt(b,2)*(1-l)+bt(S,2)*l),on(bt(v,2)*(1-l)+bt(R,2)*l),"rgb")};Le.lrgb=bd;var wd=M,_d=function(s,c,l){var g=s.lab(),m=c.lab();return new wd(g[0]+l*(m[0]-g[0]),g[1]+l*(m[1]-g[1]),g[2]+l*(m[2]-g[2]),"lab")};Le.lab=_d;var wa=M,wt=function(s,c,l,g){var m,b,v,_;g==="hsl"?(v=s.hsl(),_=c.hsl()):g==="hsv"?(v=s.hsv(),_=c.hsv()):g==="hcg"?(v=s.hcg(),_=c.hcg()):g==="hsi"?(v=s.hsi(),_=c.hsi()):g==="lch"||g==="hcl"?(g="hcl",v=s.hcl(),_=c.hcl()):g==="oklch"&&(v=s.oklch().reverse(),_=c.oklch().reverse());var x,S,R,P,F,U;(g.substr(0,1)==="h"||g==="oklch")&&(m=v,x=m[0],R=m[1],F=m[2],b=_,S=b[0],P=b[1],U=b[2]);var I,W,Y,J;return!isNaN(x)&&!isNaN(S)?(S>x&&S-x>180?J=S-(x+360):S<x&&x-S>180?J=S+360-x:J=S-x,W=x+l*J):isNaN(x)?isNaN(S)?W=Number.NaN:(W=S,(F==1||F==0)&&g!="hsv"&&(I=P)):(W=x,(U==1||U==0)&&g!="hsv"&&(I=R)),I===void 0&&(I=R+l*(P-R)),Y=F+l*(U-F),g==="oklch"?new wa([Y,I,W],g):new wa([W,I,Y],g)},Ed=wt,_a=function(s,c,l){return Ed(s,c,l,"lch")};Le.lch=_a,Le.hcl=_a;var xd=M,Ad=function(s,c,l){var g=s.num(),m=c.num();return new xd(g+l*(m-g),"num")};Le.num=Ad;var Sd=wt,Cd=function(s,c,l){return Sd(s,c,l,"hcg")};Le.hcg=Cd;var Td=wt,Nd=function(s,c,l){return Td(s,c,l,"hsi")};Le.hsi=Nd;var Ld=wt,Rd=function(s,c,l){return Ld(s,c,l,"hsl")};Le.hsl=Rd;var Fd=wt,Dd=function(s,c,l){return Fd(s,c,l,"hsv")};Le.hsv=Dd;var kd=M,Od=function(s,c,l){var g=s.oklab(),m=c.oklab();return new kd(g[0]+l*(m[0]-g[0]),g[1]+l*(m[1]-g[1]),g[2]+l*(m[2]-g[2]),"oklab")};Le.oklab=Od;var $d=wt,Pd=function(s,c,l){return $d(s,c,l,"oklch")};Le.oklch=Pd;var sn=M,Gd=y.clip_rgb,un=Math.pow,cn=Math.sqrt,ln=Math.PI,Ea=Math.cos,xa=Math.sin,Md=Math.atan2,Id=function(s,c,l){c===void 0&&(c="lrgb"),l===void 0&&(l=null);var g=s.length;l||(l=Array.from(new Array(g)).map(function(){return 1}));var m=g/l.reduce(function(W,Y){return W+Y});if(l.forEach(function(W,Y){l[Y]*=m}),s=s.map(function(W){return new sn(W)}),c==="lrgb")return Ud(s,l);for(var b=s.shift(),v=b.get(c),_=[],x=0,S=0,R=0;R<v.length;R++)if(v[R]=(v[R]||0)*l[0],_.push(isNaN(v[R])?0:l[0]),c.charAt(R)==="h"&&!isNaN(v[R])){var P=v[R]/180*ln;x+=Ea(P)*l[0],S+=xa(P)*l[0]}var F=b.alpha()*l[0];s.forEach(function(W,Y){var J=W.get(c);F+=W.alpha()*l[Y+1];for(var re=0;re<v.length;re++)if(!isNaN(J[re]))if(_[re]+=l[Y+1],c.charAt(re)==="h"){var ye=J[re]/180*ln;x+=Ea(ye)*l[Y+1],S+=xa(ye)*l[Y+1]}else v[re]+=J[re]*l[Y+1]});for(var U=0;U<v.length;U++)if(c.charAt(U)==="h"){for(var I=Md(S/_[U],x/_[U])/ln*180;I<0;)I+=360;for(;I>=360;)I-=360;v[U]=I}else v[U]=v[U]/_[U];return F/=g,new sn(v,c).alpha(F>.99999?1:F,!0)},Ud=function(s,c){for(var l=s.length,g=[0,0,0,0],m=0;m<s.length;m++){var b=s[m],v=c[m]/l,_=b._rgb;g[0]+=un(_[0],2)*v,g[1]+=un(_[1],2)*v,g[2]+=un(_[2],2)*v,g[3]+=_[3]*v}return g[0]=cn(g[0]),g[1]=cn(g[1]),g[2]=cn(g[2]),g[3]>.9999999&&(g[3]=1),new sn(Gd(g))},Pe=te,_t=y.type,zd=Math.pow,dn=function(s){var c="rgb",l=Pe("#ccc"),g=0,m=[0,1],b=[],v=[0,0],_=!1,x=[],S=!1,R=0,P=1,F=!1,U={},I=!0,W=1,Y=function(D){if(D=D||["#fff","#000"],D&&_t(D)==="string"&&Pe.brewer&&Pe.brewer[D.toLowerCase()]&&(D=Pe.brewer[D.toLowerCase()]),_t(D)==="array"){D.length===1&&(D=[D[0],D[0]]),D=D.slice(0);for(var B=0;B<D.length;B++)D[B]=Pe(D[B]);b.length=0;for(var V=0;V<D.length;V++)b.push(V/(D.length-1))}return Te(),x=D},J=function(D){if(_!=null){for(var B=_.length-1,V=0;V<B&&D>=_[V];)V++;return V-1}return 0},re=function(D){return D},ye=function(D){return D},me=function(D,B){var V,q;if(B==null&&(B=!1),isNaN(D)||D===null)return l;if(B)q=D;else if(_&&_.length>2){var be=J(D);q=be/(_.length-2)}else P!==R?q=(D-R)/(P-R):q=1;q=ye(q),B||(q=re(q)),W!==1&&(q=zd(q,W)),q=v[0]+q*(1-v[0]-v[1]),q=Math.min(1,Math.max(0,q));var ue=Math.floor(q*1e4);if(I&&U[ue])V=U[ue];else{if(_t(x)==="array")for(var Z=0;Z<b.length;Z++){var ne=b[Z];if(q<=ne){V=x[Z];break}if(q>=ne&&Z===b.length-1){V=x[Z];break}if(q>ne&&q<b[Z+1]){q=(q-ne)/(b[Z+1]-ne),V=Pe.interpolate(x[Z],x[Z+1],q,c);break}}else _t(x)==="function"&&(V=x(q));I&&(U[ue]=V)}return V},Te=function(){return U={}};Y(s);var K=function(D){var B=Pe(me(D));return S&&B[S]?B[S]():B};return K.classes=function(D){if(D!=null){if(_t(D)==="array")_=D,m=[D[0],D[D.length-1]];else{var B=Pe.analyze(m);D===0?_=[B.min,B.max]:_=Pe.limits(B,"e",D)}return K}return _},K.domain=function(D){if(!arguments.length)return m;R=D[0],P=D[D.length-1],b=[];var B=x.length;if(D.length===B&&R!==P)for(var V=0,q=Array.from(D);V<q.length;V+=1){var be=q[V];b.push((be-R)/(P-R))}else{for(var ue=0;ue<B;ue++)b.push(ue/(B-1));if(D.length>2){var Z=D.map(function(ie,ae){return ae/(D.length-1)}),ne=D.map(function(ie){return(ie-R)/(P-R)});ne.every(function(ie,ae){return Z[ae]===ie})||(ye=function(ie){if(ie<=0||ie>=1)return ie;for(var ae=0;ie>=ne[ae+1];)ae++;var Me=(ie-ne[ae])/(ne[ae+1]-ne[ae]),Ze=Z[ae]+Me*(Z[ae+1]-Z[ae]);return Ze})}}return m=[R,P],K},K.mode=function(D){return arguments.length?(c=D,Te(),K):c},K.range=function(D,B){return Y(D),K},K.out=function(D){return S=D,K},K.spread=function(D){return arguments.length?(g=D,K):g},K.correctLightness=function(D){return D==null&&(D=!0),F=D,Te(),F?re=function(B){for(var V=me(0,!0).lab()[0],q=me(1,!0).lab()[0],be=V>q,ue=me(B,!0).lab()[0],Z=V+(q-V)*B,ne=ue-Z,ie=0,ae=1,Me=20;Math.abs(ne)>.01&&Me-- >0;)(function(){return be&&(ne*=-1),ne<0?(ie=B,B+=(ae-B)*.5):(ae=B,B+=(ie-B)*.5),ue=me(B,!0).lab()[0],ne=ue-Z})();return B}:re=function(B){return B},K},K.padding=function(D){return D!=null?(_t(D)==="number"&&(D=[D,D]),v=D,K):v},K.colors=function(D,B){arguments.length<2&&(B="hex");var V=[];if(arguments.length===0)V=x.slice(0);else if(D===1)V=[K(.5)];else if(D>1){var q=m[0],be=m[1]-q;V=Bd(0,D,!1).map(function(ae){return K(q+ae/(D-1)*be)})}else{s=[];var ue=[];if(_&&_.length>2)for(var Z=1,ne=_.length,ie=1<=ne;ie?Z<ne:Z>ne;ie?Z++:Z--)ue.push((_[Z-1]+_[Z])*.5);else ue=m;V=ue.map(function(ae){return K(ae)})}return Pe[B]&&(V=V.map(function(ae){return ae[B]()})),V},K.cache=function(D){return D!=null?(I=D,K):I},K.gamma=function(D){return D!=null?(W=D,K):W},K.nodata=function(D){return D!=null?(l=Pe(D),K):l},K};function Bd(s,c,l){for(var g=[],m=s<c,b=l?m?c+1:c-1:c,v=s;m?v<b:v>b;m?v++:v--)g.push(v);return g}var Ut=M,jd=dn,Hd=function(s){for(var c=[1,1],l=1;l<s;l++){for(var g=[1],m=1;m<=c.length;m++)g[m]=(c[m]||0)+c[m-1];c=g}return c},Wd=function(s){var c,l,g,m,b,v,_;if(s=s.map(function(F){return new Ut(F)}),s.length===2)c=s.map(function(F){return F.lab()}),b=c[0],v=c[1],m=function(F){var U=[0,1,2].map(function(I){return b[I]+F*(v[I]-b[I])});return new Ut(U,"lab")};else if(s.length===3)l=s.map(function(F){return F.lab()}),b=l[0],v=l[1],_=l[2],m=function(F){var U=[0,1,2].map(function(I){return(1-F)*(1-F)*b[I]+2*(1-F)*F*v[I]+F*F*_[I]});return new Ut(U,"lab")};else if(s.length===4){var x;g=s.map(function(F){return F.lab()}),b=g[0],v=g[1],_=g[2],x=g[3],m=function(F){var U=[0,1,2].map(function(I){return(1-F)*(1-F)*(1-F)*b[I]+3*(1-F)*(1-F)*F*v[I]+3*(1-F)*F*F*_[I]+F*F*F*x[I]});return new Ut(U,"lab")}}else if(s.length>=5){var S,R,P;S=s.map(function(F){return F.lab()}),P=s.length-1,R=Hd(P),m=function(F){var U=1-F,I=[0,1,2].map(function(W){return S.reduce(function(Y,J,re){return Y+R[re]*Math.pow(U,P-re)*Math.pow(F,re)*J[W]},0)});return new Ut(I,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return m},qd=function(s){var c=Wd(s);return c.scale=function(){return jd(c)},c},hn=te,Ge=function(s,c,l){if(!Ge[l])throw new Error("unknown blend mode "+l);return Ge[l](s,c)},Xe=function(s){return function(c,l){var g=hn(l).rgb(),m=hn(c).rgb();return hn.rgb(s(g,m))}},Je=function(s){return function(c,l){var g=[];return g[0]=s(c[0],l[0]),g[1]=s(c[1],l[1]),g[2]=s(c[2],l[2]),g}},Vd=function(s){return s},Yd=function(s,c){return s*c/255},Kd=function(s,c){return s>c?c:s},Xd=function(s,c){return s>c?s:c},Jd=function(s,c){return 255*(1-(1-s/255)*(1-c/255))},Zd=function(s,c){return c<128?2*s*c/255:255*(1-2*(1-s/255)*(1-c/255))},Qd=function(s,c){return 255*(1-(1-c/255)/(s/255))},eh=function(s,c){return s===255?255:(s=255*(c/255)/(1-s/255),s>255?255:s)};Ge.normal=Xe(Je(Vd)),Ge.multiply=Xe(Je(Yd)),Ge.screen=Xe(Je(Jd)),Ge.overlay=Xe(Je(Zd)),Ge.darken=Xe(Je(Kd)),Ge.lighten=Xe(Je(Xd)),Ge.dodge=Xe(Je(eh)),Ge.burn=Xe(Je(Qd));for(var th=Ge,fn=y.type,rh=y.clip_rgb,nh=y.TWOPI,ih=Math.pow,ah=Math.sin,oh=Math.cos,Aa=te,sh=function(s,c,l,g,m){s===void 0&&(s=300),c===void 0&&(c=-1.5),l===void 0&&(l=1),g===void 0&&(g=1),m===void 0&&(m=[0,1]);var b=0,v;fn(m)==="array"?v=m[1]-m[0]:(v=0,m=[m,m]);var _=function(x){var S=nh*((s+120)/360+c*x),R=ih(m[0]+v*x,g),P=b!==0?l[0]+x*b:l,F=P*R*(1-R)/2,U=oh(S),I=ah(S),W=R+F*(-.14861*U+1.78277*I),Y=R+F*(-.29227*U-.90649*I),J=R+F*(1.97294*U);return Aa(rh([W*255,Y*255,J*255,1]))};return _.start=function(x){return x==null?s:(s=x,_)},_.rotations=function(x){return x==null?c:(c=x,_)},_.gamma=function(x){return x==null?g:(g=x,_)},_.hue=function(x){return x==null?l:(l=x,fn(l)==="array"?(b=l[1]-l[0],b===0&&(l=l[1])):b=0,_)},_.lightness=function(x){return x==null?m:(fn(x)==="array"?(m=x,v=x[1]-x[0]):(m=[x,x],v=0),_)},_.scale=function(){return Aa.scale(_)},_.hue(l),_},uh=M,ch="0123456789abcdef",lh=Math.floor,dh=Math.random,hh=function(){for(var s="#",c=0;c<6;c++)s+=ch.charAt(lh(dh()*16));return new uh(s,"hex")},pn=d,Sa=Math.log,fh=Math.pow,ph=Math.floor,gh=Math.abs,Ca=function(s,c){c===void 0&&(c=null);var l={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return pn(s)==="object"&&(s=Object.values(s)),s.forEach(function(g){c&&pn(g)==="object"&&(g=g[c]),g!=null&&!isNaN(g)&&(l.values.push(g),l.sum+=g,g<l.min&&(l.min=g),g>l.max&&(l.max=g),l.count+=1)}),l.domain=[l.min,l.max],l.limits=function(g,m){return Ta(l,g,m)},l},Ta=function(s,c,l){c===void 0&&(c="equal"),l===void 0&&(l=7),pn(s)=="array"&&(s=Ca(s));var g=s.min,m=s.max,b=s.values.sort(function(vn,mn){return vn-mn});if(l===1)return[g,m];var v=[];if(c.substr(0,1)==="c"&&(v.push(g),v.push(m)),c.substr(0,1)==="e"){v.push(g);for(var _=1;_<l;_++)v.push(g+_/l*(m-g));v.push(m)}else if(c.substr(0,1)==="l"){if(g<=0)throw new Error("Logarithmic scales are only possible for values > 0");var x=Math.LOG10E*Sa(g),S=Math.LOG10E*Sa(m);v.push(g);for(var R=1;R<l;R++)v.push(fh(10,x+R/l*(S-x)));v.push(m)}else if(c.substr(0,1)==="q"){v.push(g);for(var P=1;P<l;P++){var F=(b.length-1)*P/l,U=ph(F);if(U===F)v.push(b[U]);else{var I=F-U;v.push(b[U]*(1-I)+b[U+1]*I)}}v.push(m)}else if(c.substr(0,1)==="k"){var W,Y=b.length,J=new Array(Y),re=new Array(l),ye=!0,me=0,Te=null;Te=[],Te.push(g);for(var K=1;K<l;K++)Te.push(g+K/l*(m-g));for(Te.push(m);ye;){for(var D=0;D<l;D++)re[D]=0;for(var B=0;B<Y;B++)for(var V=b[B],q=Number.MAX_VALUE,be=void 0,ue=0;ue<l;ue++){var Z=gh(Te[ue]-V);Z<q&&(q=Z,be=ue),re[be]++,J[B]=be}for(var ne=new Array(l),ie=0;ie<l;ie++)ne[ie]=null;for(var ae=0;ae<Y;ae++)W=J[ae],ne[W]===null?ne[W]=b[ae]:ne[W]+=b[ae];for(var Me=0;Me<l;Me++)ne[Me]*=1/re[Me];ye=!1;for(var Ze=0;Ze<l;Ze++)if(ne[Ze]!==Te[Ze]){ye=!0;break}Te=ne,me++,me>200&&(ye=!1)}for(var Qe={},Et=0;Et<l;Et++)Qe[Et]=[];for(var xt=0;xt<Y;xt++)W=J[xt],Qe[W].push(b[xt]);for(var qe=[],st=0;st<l;st++)qe.push(Qe[st][0]),qe.push(Qe[st][Qe[st].length-1]);qe=qe.sort(function(vn,mn){return vn-mn}),v.push(qe[0]);for(var zt=1;zt<qe.length;zt+=2){var ut=qe[zt];!isNaN(ut)&&v.indexOf(ut)===-1&&v.push(ut)}}return v},Na={analyze:Ca,limits:Ta},La=M,vh=function(s,c){s=new La(s),c=new La(c);var l=s.luminance(),g=c.luminance();return l>g?(l+.05)/(g+.05):(g+.05)/(l+.05)},Ra=M,We=Math.sqrt,he=Math.pow,mh=Math.min,yh=Math.max,Fa=Math.atan2,Da=Math.abs,ar=Math.cos,ka=Math.sin,bh=Math.exp,Oa=Math.PI,wh=function(s,c,l,g,m){l===void 0&&(l=1),g===void 0&&(g=1),m===void 0&&(m=1);var b=function(ut){return 360*ut/(2*Oa)},v=function(ut){return 2*Oa*ut/360};s=new Ra(s),c=new Ra(c);var _=Array.from(s.lab()),x=_[0],S=_[1],R=_[2],P=Array.from(c.lab()),F=P[0],U=P[1],I=P[2],W=(x+F)/2,Y=We(he(S,2)+he(R,2)),J=We(he(U,2)+he(I,2)),re=(Y+J)/2,ye=.5*(1-We(he(re,7)/(he(re,7)+he(25,7)))),me=S*(1+ye),Te=U*(1+ye),K=We(he(me,2)+he(R,2)),D=We(he(Te,2)+he(I,2)),B=(K+D)/2,V=b(Fa(R,me)),q=b(Fa(I,Te)),be=V>=0?V:V+360,ue=q>=0?q:q+360,Z=Da(be-ue)>180?(be+ue+360)/2:(be+ue)/2,ne=1-.17*ar(v(Z-30))+.24*ar(v(2*Z))+.32*ar(v(3*Z+6))-.2*ar(v(4*Z-63)),ie=ue-be;ie=Da(ie)<=180?ie:ue<=be?ie+360:ie-360,ie=2*We(K*D)*ka(v(ie)/2);var ae=F-x,Me=D-K,Ze=1+.015*he(W-50,2)/We(20+he(W-50,2)),Qe=1+.045*B,Et=1+.015*B*ne,xt=30*bh(-he((Z-275)/25,2)),qe=2*We(he(B,7)/(he(B,7)+he(25,7))),st=-qe*ka(2*v(xt)),zt=We(he(ae/(l*Ze),2)+he(Me/(g*Qe),2)+he(ie/(m*Et),2)+st*(Me/(g*Qe))*(ie/(m*Et)));return yh(0,mh(100,zt))},$a=M,_h=function(s,c,l){l===void 0&&(l="lab"),s=new $a(s),c=new $a(c);var g=s.get(l),m=c.get(l),b=0;for(var v in g){var _=(g[v]||0)-(m[v]||0);b+=_*_}return Math.sqrt(b)},Eh=M,xh=function(){for(var s=[],c=arguments.length;c--;)s[c]=arguments[c];try{return new(Function.prototype.bind.apply(Eh,[null].concat(s))),!0}catch{return!1}},Pa=te,Ga=dn,Ah={cool:function(){return Ga([Pa.hsl(180,1,.9),Pa.hsl(250,.7,.4)])},hot:function(){return Ga(["#000","#f00","#ff0","#fff"]).mode("rgb")}},or={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},gn=0,Ma=Object.keys(or);gn<Ma.length;gn+=1){var Ia=Ma[gn];or[Ia.toLowerCase()]=or[Ia]}var Sh=or,ve=te;ve.average=Id,ve.bezier=qd,ve.blend=th,ve.cubehelix=sh,ve.mix=ve.interpolate=ga,ve.random=hh,ve.scale=dn,ve.analyze=Na.analyze,ve.contrast=vh,ve.deltaE=wh,ve.distance=_h,ve.limits=Na.limits,ve.valid=xh,ve.scales=Ah,ve.colors=Ji,ve.brewer=Sh;var Ch=ve;return Ch})})(ru);var Im=ru.exports;const Fn=Xt(Im);let fr;const Um=new Uint8Array(16);function zm(){if(!fr&&(fr=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!fr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return fr(Um)}const we=[];for(let r=0;r<256;++r)we.push((r+256).toString(16).slice(1));function Bm(r,t=0){return we[r[t+0]]+we[r[t+1]]+we[r[t+2]]+we[r[t+3]]+"-"+we[r[t+4]]+we[r[t+5]]+"-"+we[r[t+6]]+we[r[t+7]]+"-"+we[r[t+8]]+we[r[t+9]]+"-"+we[r[t+10]]+we[r[t+11]]+we[r[t+12]]+we[r[t+13]]+we[r[t+14]]+we[r[t+15]]}const jm=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),xo={randomUUID:jm};function Hm(r,t,e){if(xo.randomUUID&&!t&&!r)return xo.randomUUID();r=r||{};const n=r.random||(r.rng||zm)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){e=e||0;for(let i=0;i<16;++i)t[e+i]=n[i];return t}return Bm(n)}function Wm(r){return!r||typeof r!="object"||typeof r=="function"||Array.isArray(r)||r instanceof Set||r instanceof Map||r instanceof RegExp||r instanceof Date}function nu(r,t){r=r||{};var e={};for(var n in t){var i=r[n],a=t[n];if(!Wm(a)){e[n]=nu(i,a);continue}i===void 0?e[n]=a:e[n]=i}return e}var qm=nu,Ir={};function Vm(r){return typeof r!="number"||isNaN(r)?1:r}function Ym(r,t){var e={},n=function(o){return typeof o>"u"?t:o};typeof t=="function"&&(n=t);var i=function(o){return n(o[r])},a=function(){return n(void 0)};return typeof r=="string"?(e.fromAttributes=i,e.fromGraph=function(o,u){return i(o.getNodeAttributes(u))},e.fromEntry=function(o,u){return i(u)}):typeof r=="function"?(e.fromAttributes=function(){throw new Error("graphology-utils/getters/createNodeValueGetter: irrelevant usage.")},e.fromGraph=function(o,u){return n(r(u,o.getNodeAttributes(u)))},e.fromEntry=function(o,u){return n(r(o,u))}):(e.fromAttributes=a,e.fromGraph=a,e.fromEntry=a),e}function iu(r,t){var e={},n=function(o){return typeof o>"u"?t:o};typeof t=="function"&&(n=t);var i=function(o){return n(o[r])},a=function(){return n(void 0)};return typeof r=="string"?(e.fromAttributes=i,e.fromGraph=function(o,u){return i(o.getEdgeAttributes(u))},e.fromEntry=function(o,u){return i(u)},e.fromPartialEntry=e.fromEntry,e.fromMinimalEntry=e.fromEntry):typeof r=="function"?(e.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},e.fromGraph=function(o,u){var h=o.extremities(u);return n(r(u,o.getEdgeAttributes(u),h[0],h[1],o.getNodeAttributes(h[0]),o.getNodeAttributes(h[1]),o.isUndirected(u)))},e.fromEntry=function(o,u,h,d,p,f,w){return n(r(o,u,h,d,p,f,w))},e.fromPartialEntry=function(o,u,h,d){return n(r(o,u,h,d))},e.fromMinimalEntry=function(o,u){return n(r(o,u))}):(e.fromAttributes=a,e.fromGraph=a,e.fromEntry=a,e.fromMinimalEntry=a),e}Ir.createNodeValueGetter=Ym;Ir.createEdgeValueGetter=iu;Ir.createEdgeWeightGetter=function(r){return iu(r,Vm)};const{createNodeValueGetter:Ao,createEdgeValueGetter:Km}=Ir;var Xm=function(t,e,n){const{nodeXAttribute:i,nodeYAttribute:a}=n,{attraction:o,repulsion:u,gravity:h,inertia:d,maxMove:p}=n.settings;let{shouldSkipNode:f,shouldSkipEdge:w,isNodeFixed:A}=n;A=Ao(A),f=Ao(f,!1),w=Km(w,!1);const E=t.filterNodes((L,k)=>!f.fromEntry(L,k)),y=E.length;for(let L=0;L<y;L++){const k=E[L],N=t.getNodeAttributes(k),z=e[k];z?e[k]={dx:z.dx*d,dy:z.dy*d,x:N[i]||0,y:N[a]||0}:e[k]={dx:0,dy:0,x:N[i]||0,y:N[a]||0}}if(u)for(let L=0;L<y;L++){const k=E[L],N=e[k];for(let z=L+1;z<y;z++){const X=E[z],M=e[X],de=M.x-N.x,te=M.y-N.y,Se=Math.sqrt(de*de+te*te)||1,Re=u/Se*de,Ce=u/Se*te;N.dx-=Re,N.dy-=Ce,M.dx+=Re,M.dy+=Ce}}if(o&&t.forEachEdge((L,k,N,z,X,M,de)=>{if(N===z||f.fromEntry(N,X)||f.fromEntry(z,M)||w.fromEntry(L,k,N,z,X,M,de))return;const te=e[N],Se=e[z],Re=Se.x-te.x,Ce=Se.y-te.y,dt=Math.sqrt(Re*Re+Ce*Ce)||1,ht=o*dt*Re,at=o*dt*Ce;te.dx+=ht,te.dy+=at,Se.dx-=ht,Se.dy-=at}),h)for(let L=0;L<y;L++){const k=E[L],N=e[k],{x:z,y:X}=N,M=Math.sqrt(z*z+X*X)||1;e[k].dx-=z*h*M,e[k].dy-=X*h*M}const T=!1;for(let L=0;L<y;L++){const k=E[L],N=e[k],z=Math.sqrt(N.dx*N.dx+N.dy*N.dy);z>p&&(N.dx*=p/z,N.dy*=p/z),A.fromGraph(t,k)?N.fixed=!0:(N.x+=N.dx,N.y+=N.dy,N.fixed=!1)}return{converged:T}},ci={};ci.assignLayoutChanges=function(r,t,e){const{nodeXAttribute:n,nodeYAttribute:i}=e;r.updateEachNodeAttributes((a,o)=>{const u=t[a];return!u||u.fixed||(o[n]=u.x,o[i]=u.y),o},{attributes:["x","y"]})};ci.collectLayoutChanges=function(r){const t={};for(const e in r){const n=r[e];t[e]={x:n.x,y:n.y}}return t};var Jm={nodeXAttribute:"x",nodeYAttribute:"y",isNodeFixed:"fixed",shouldSkipNode:null,shouldSkipEdge:null,settings:{attraction:5e-4,repulsion:.1,gravity:1e-4,inertia:.6,maxMove:200}};const Zm=Ts,Qm=qm,ey=Xm,ty=ci,ry=Jm;function Pt(r,t){if(!Zm(r))throw new Error("graphology-layout-force/worker: the given graph is not a valid graphology instance.");t=Qm(t,ry),this.callbacks={},t.onConverged&&(this.callbacks.onConverged=t.onConverged),this.graph=r,this.params=t,this.nodeStates={},this.frameID=null,this.running=!1,this.killed=!1}Pt.prototype.isRunning=function(){return this.running};Pt.prototype.runFrame=function(){let{converged:r}=ey(this.graph,this.nodeStates,this.params);ty.assignLayoutChanges(this.graph,this.nodeStates,this.params),r=!1,r?(this.callbacks.onConverged&&this.callbacks.onConverged(),this.stop()):this.frameID=window.requestAnimationFrame(()=>this.runFrame())};Pt.prototype.stop=function(){return this.running=!1,this.frameID!==null&&(window.cancelAnimationFrame(this.frameID),this.frameID=null),this};Pt.prototype.start=function(){if(this.killed)throw new Error("graphology-layout-force/worker.start: layout was killed.");this.running||(this.running=!0,this.runFrame())};Pt.prototype.kill=function(){this.stop(),delete this.nodeStates,this.killed=!0};var ny=Pt;const iy=Xt(ny);class ay{constructor(t){if(this.container=document.getElementById(t),!this.container)throw new Error(`Container with id "${t}" not found.`);this.graph=new se,this.renderer=new Mm(this.graph,this.container,{labelThreshold:0,enableHovering:!1,renderLabels:!0,allowInvalidContainer:!0}),this.draggedNode=null,this.isDragging=!1,this.settings={isNodeFixed:(e,n)=>n.highlighted,strongGravityMode:!1,gravity:1,scalingRatio:2,adjustSizes:!0,barnesHutOptimize:!0,barnesHutTheta:1.2,repulsionStrength:100},this.startLayout(),this.initializeInteractions()}initializeInteractions(){this.renderer.on("downNode",t=>{this.isDragging=!0,this.draggedNode=t.node,this.graph.setNodeAttribute(this.draggedNode,"highlighted",!0)}),this.renderer.getMouseCaptor().on("mousemovebody",t=>{if(!this.isDragging||!this.draggedNode)return;const e=this.renderer.viewportToGraph(t);this.graph.setNodeAttribute(this.draggedNode,"x",e.x),this.graph.setNodeAttribute(this.draggedNode,"y",e.y),t.preventSigmaDefault(),t.original.preventDefault(),t.original.stopPropagation()}),this.renderer.getMouseCaptor().on("mouseup",()=>{this.draggedNode&&this.graph.removeNodeAttribute(this.draggedNode,"highlighted"),this.isDragging=!1,this.draggedNode=null}),this.renderer.getMouseCaptor().on("mousedown",()=>{this.renderer.getCustomBBox()||this.renderer.setCustomBBox(this.renderer.getBBox())}),this.renderer.on("clickNode",t=>{console.log("Node clicked:",t.node),this.updateRightPanelWithFeed(t.node)})}updateRightPanelWithFeed(t){const n=this.graph.getNodeAttributes(t).colorhsl;Jf(n,t)}getColorFromString(t){const e=t.match(/hsl\(([^,]+),\s*([^,]+)%,\s*([^,]+)%\)/);if(!e)return console.error("Invalid HSL color string:",t),"#000";const i=parseFloat(e[1])%360,a=parseFloat(e[2]),o=parseFloat(e[3]);return Fn.hsl(i,a/100,o/100).css()}getStringFromColor(t){const[e,n,i]=Fn(t).hsl();return`hsl(${e%360}, ${n*100}%, ${i*100}%)`}getNodeAttributes(t){return{x:t.x,y:t.y,size:t.size||10,color:this.getColorFromString(t.color),colorhsl:t.color,label:t.title,title:t.title}}getClosestNodes(t,e=2){return this.graph.nodes().map(n=>{const i=this.graph.getNodeAttributes(n),a=Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2);return{nodeId:n,distance:a}}).sort((n,i)=>n.distance-i.distance).slice(0,e)}addNode(t){const e=Hm();return this.graph.addNode(e,t),e}addEdge(t,e){this.graph.addEdge(t,e)}updateGraph(t){const e=new Set(this.graph.nodes()),n=new Set(this.graph.edges()),i={x:0,y:0},a=.05,o=10;t.nodes.forEach(u=>{if(!e.has(u.id)){const h=Math.random()*Math.PI*2,d=Math.random()*a,p=this.getNodeAttributes(u);p.x=i.x+d*Math.cos(h),p.y=i.y+d*Math.sin(h),p.size=o,p.edgeStrength=.1,this.graph.addNode(u.id,p);const f=(A,E)=>{const T=Date.now()-A,L=1e3;if(T<L){const N=.1+T/L*(1-.1);this.graph.forEachEdge(E,z=>{this.graph.setEdgeAttribute(z,"edgeStrength",N)}),requestAnimationFrame(()=>f(A,E))}},w=Date.now();requestAnimationFrame(()=>f(w,u.id))}}),e.forEach(u=>{t.nodes.some(h=>h.id===u)||(this.graph.forEachEdge(u,h=>{this.graph.dropEdge(h),n.delete(h)}),this.graph.dropNode(u))}),t.links.forEach(u=>{const h=typeof u.source=="object"?u.source.id:u.source,d=typeof u.target=="object"?u.target.id:u.target,p=`${h}-${d}`;if(!n.has(p)){const f=this.graph.getNodeAttribute(h,"color"),w=this.graph.getNodeAttribute(d,"color"),A=Fn.mix(f,w,.5,"rgb").brighten(.77).hex();this.graph.addEdgeWithKey(p,h,d,{size:u.size||1,color:A})}}),n.forEach(u=>{if(this.graph.hasEdge(u)){const[h,d]=this.graph.extremities(u);t.links.some(p=>{const f=typeof p.source=="object"?p.source.id:p.source,w=typeof p.target=="object"?p.target.id:p.target;return h===f&&d===w||h===w&&d===f})||this.graph.dropEdge(u)}}),this.renderer.refresh()}clearGraph(){this.graph.clear(),this.renderer.refresh()}startLayout(){console.log("Starting layout with settings:",this.settings),this.layout&&(this.layout.stop(),console.log("Previous layout stopped.")),this.layout=new iy(this.graph,this.settings),console.log("New ForceSupervisor created. with settings:",this.settings),this.layout.start(),console.log("Layout started.")}stopLayout(){this.layout&&this.layout.stop()}updateForceSettings(t){this.stopLayout(),this.settings={...this.settings,...t},this.startLayout(),this.renderer.refresh()}}let qt;function oy(r){qt||(qt=new ay("graph-container")),qt.updateGraph(r)}function au(){qt.clearGraph()}function sy(r){qt.updateForceSettings(r)}De.log("This is a log message from graph.js");const ou=800,su=600;let pr,xr,Tt=!1;function uy(r){Tt=r,De.log("Negative edges set to:",Tt),Gt()}function cy(r,t={width:ou,height:su}){const e=ly(r,t),n=dy(e);return{nodes:e,links:n}}function ly(r,t){const{width:e,height:n}=hy(t);return r.map(i=>({id:i.id,title:i.title,color:i.feedColor,x:e/2+(Math.random()-.5)*10,y:n/2+(Math.random()-.5)*10,vx:0,vy:0,degree:0,mass:0}))}function dy(r){const t=[];for(let e=0;e<r.length;e++)for(let n=e+1;n<r.length;n++)t.push({source:r[e],target:r[n],weight:0});return t}function hy({width:r,height:t}){return{width:So(r)?r:ou,height:So(t)?t:su}}function So(r){return typeof r=="number"&&!isNaN(r)}function fy(r,t=.2){const e=r.map(a=>a.weight).sort((a,o)=>a-o),n=Math.floor(t*e.length),i=e[n];return r.filter(a=>a.weight>=i)}async function Gt(r=null,t=null){pr=r||pr,xr=t||xr,De.log("Articles cache:",pr);const e=document.querySelectorAll("#feedslist div.clicked");De.log("Selected Feeds Elements:",e);let n=[];e.forEach(i=>{const{id:a}=i,o=pr[a];if(o){const u=o.map(h=>{var d,p;return{id:h.id||"",title:((d=h.article)==null?void 0:d.title)||"",feedColor:h.feedColor||"",content:((p=h.article)==null?void 0:p.text)||""}});n=[...n,...u]}}),De.log("All articles:",n),n.length>0?py(n):au()}function py(r){const t=cy(r);De.log("Graph dataa:",t),gy(t),De.log("Graph dataB:",t),oy(t)}function gy(r){if(xr){De.log("negative edges: ",Tt);const t=r.links.map(n=>({source:n.source.id,target:n.target.id,weight:n.weight}));De.log("Graph data before similarity Pairs update:"),De.table(t),my(r,xr,!Tt),r.links=Tt?r.links:fy(r.links,.5);const e=r.links.map(n=>({source:n.source.id,target:n.target.id,weight:n.weight}));De.log("Graph data after similarity Pairs update:"),De.table(e)}}function vy(r){return(r+1)/2}function my(r,t,e=!0){r.links.forEach(n=>{const i=`${n.source.id}-${n.target.id}`,a=`${n.target.id}-${n.source.id}`,o=t[i]||t[a];typeof o=="number"?n.weight=e?vy(o):o:n.weight=0})}const uu=Ro(),cu=new EventSource(`${uu}/article-updates`),yy=new EventSource(`${uu}/events`);cu.onmessage=r=>{try{const t=JSON.parse(r.data);Qf(t),Nh(t)}catch(t){ge.error("Error parsing article data:",t)}};cu.onerror=r=>{ge.error("Error with event source for articles:",r)};yy.addEventListener("similarityPairsUpdate",r=>{try{const t=JSON.parse(r.data);Gt(Ae,t)}catch(t){ge.error("Error parsing similarity Pairs data:",t)}});let Ft=null;function by(r){return Ft&&Ft.id===r.id}function wy(){if(!Ft)return;const r=document.querySelector(`.feed[data-id="${Ft.id}"]`);r&&toggleFeedElement(r,r.dataset.originalColor)}function li(){Qo(!1),Ft=null}function _y(r){Ft=r,Qo(!0)}function Ey(r,t){if(!r||!r.classList){logger.error("Invalid feedElement passed to updateFeedElementStyles:",r);return}t?(r.classList.add("clicked"),r.style.backgroundColor=r.dataset.originalColor+"80",r.style.boxShadow="inset 0 0 5px rgba(0,0,0,0.3)"):(r.classList.remove("clicked"),r.style.backgroundColor=r.dataset.originalColor,r.style.boxShadow="")}const Co=document.querySelector("#selectAllButton");async function xy(r,t){for(const e of r){const n=e.id,i=t[n];if(!i||!Array.isArray(i.unreadStories)){ge.error(`Feed data for ID ${n} is missing unreadStories or is not an array.`);continue}await Hn(i)}Gt(Ae)}function Ay(){au(),li()}async function Sy(r){const t=document.querySelectorAll("#feedslist div"),e=Co.textContent==="Select All";t.forEach(n=>Ey(n,e)),Co.textContent=e?"Unselect All":"Select All",e?await xy(t,r):Ay()}async function Cy(r,t){if(by(t)){Ny(r);return}if(Ty(r)){Ly(r);return}Ry(r,t)}function Ty(r){return r.classList.contains("clicked")}function Ny(r){ge.log("Currently displayed feed clicked, retracting main content"),li(),jn(r,r.dataset.originalColor),Gt(Ae)}function Ly(r){ge.log("Feed is selected but not the displayed feed, unselecting"),jn(r,r.dataset.originalColor),Gt(Ae)}async function Ry(r,t){wy(),ge.log("Selecting new feed and displaying its articles"),_y(t),jn(r,r.dataset.originalColor),await Hn(t),Gt(Ae)}const Fy=document.querySelector("#feedslist");async function Dy(r,t,e){const n=document.createElement("div");n.textContent=`${r.feed_title} (${r.nt})`,n.id=r.id;const i=180,a=220,o=80,u=140,h=Math.ceil(e/2),d=Math.floor(e/2),p=(a-i)/h,f=(u-o)/d,w=t%2===0,A=Math.floor(t/2),L=`hsl(${w?i+A*p%360:o+A*f%360}, 60%, 85%)`;return Object.assign(n.style,{backgroundColor:L,padding:"10px",cursor:"pointer"}),n.dataset.originalColor=L,n.addEventListener("click",()=>Cy(n,r)),{feedElement:n,color:L}}async function ky(r){const t=document.createDocumentFragment(),e=Object.keys(r).length;for(const[n,i]of Object.entries(r))if(i.nt>0){const{feedElement:a,color:o}=await Dy(i,n,e);i.feedColor=o,t.appendChild(a)}Fy.appendChild(t)}const To=document.querySelector("#loading"),Oy=document.querySelector("#maincontent"),No=document.querySelector("#selectAllButton"),$y=document.querySelector("#toggleButton");$y.onclick=async()=>{li()};function Py(r){return r&&new Date().getTime()-r.timestamp<1}async function Gy(){To.style.display="block",Oy.style.right="-40%";const r=JSON.parse(localStorage.getItem("feedsData"));let t=r&&Py(r)?r.feeds:null;if(!t)try{if(t=await qf(),t){const e={feeds:t,timestamp:new Date().getTime()};localStorage.setItem("feedsData",JSON.stringify(e))}else throw new Error("No feeds data received")}catch(e){ge.error("Failed to fetch feeds:",e)}t&&(await ky(t),No.style.display="block",No.onclick=()=>Sy(t)),To.style.display="none"}window.onload=Gy;function Lo(r,t,e,n,i){const a=r.value;let o;if(i==="log"){const u=Math.log(e.min),d=(Math.log(e.max)-u)/(r.max-r.min);o=Math.exp(u+d*(a-r.min))}else o=e.min+a/100*(e.max-e.min);t.textContent=o.toFixed(n)}document.getElementById("forcesButton").addEventListener("click",function(){var r=document.getElementById("forceSettings"),t=document.getElementById("articles");r.style.display==="none"?(r.style.display="block",t.style.display="none"):(r.style.display="none",t.style.display="block")});function My(){document.querySelectorAll(".slider").forEach(t=>{const e=t.getAttribute("data-output"),n=document.getElementById(e),i={min:parseFloat(t.getAttribute("data-scale-min")),max:parseFloat(t.getAttribute("data-scale-max")),factor:parseFloat(t.getAttribute("data-scale-factor"))},a=parseInt(t.getAttribute("data-precision"),10),o=t.getAttribute("data-scale-type");let u;if(o==="log"){const h=Math.log(i.min),p=(Math.log(i.max)-h)/(t.max-t.min);u=(Math.log(1)-h)/p+parseFloat(t.min)}else u=(parseFloat(n.textContent)-i.min)/(i.max-i.min)*100;t.value=u,t.addEventListener("input",()=>{Lo(t,n,i,a,o),sy({gravity:parseFloat(document.getElementById("gravityOutput").textContent),scalingRatio:parseFloat(document.getElementById("scalingRatioOutput").textContent),barnesHutTheta:parseFloat(document.getElementById("barnesHutThetaOutput").textContent),repulsionStrength:parseFloat(document.getElementById("repulsionStrengthOutput").textContent),coolingRate:parseFloat(document.getElementById("coolingRateOutput").textContent)})}),Lo(t,n,i,a,o)})}function Iy(){const r=document.getElementById("negativeEdgesToggle");r.checked=Tt,r.addEventListener("change",function(){uy(r.checked)}),My()}document.addEventListener("DOMContentLoaded",Iy);
